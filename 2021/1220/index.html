<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1220 - 1226 | ahnjs TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Today I Learned">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.c9ce91a1.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5fb46d7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" as="script"><link rel="preload" href="/TIL/assets/js/page-1220-1226.4cb62ec6.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" as="script"><link rel="prefetch" href="/TIL/assets/js/103.8c089b22.js"><link rel="prefetch" href="/TIL/assets/js/104.119134a5.js"><link rel="prefetch" href="/TIL/assets/js/layout-Blog.a086a7ca.js"><link rel="prefetch" href="/TIL/assets/js/layout-Layout.0945805f.js"><link rel="prefetch" href="/TIL/assets/js/layout-NotFound.9e898f41.js"><link rel="prefetch" href="/TIL/assets/js/layout-Slide.f940a7a7.js"><link rel="prefetch" href="/TIL/assets/js/page-0102-0109.d861648d.js"><link rel="prefetch" href="/TIL/assets/js/page-0102~0108.3f3ff8b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0109~0115.4c6b192d.js"><link rel="prefetch" href="/TIL/assets/js/page-0110-0116.feb84c5b.js"><link rel="prefetch" href="/TIL/assets/js/page-0116~0129.d55b06ca.js"><link rel="prefetch" href="/TIL/assets/js/page-0117-0123.7a6dce2f.js"><link rel="prefetch" href="/TIL/assets/js/page-0124-0206.ee32f254.js"><link rel="prefetch" href="/TIL/assets/js/page-0130~0205.df7a6a64.js"><link rel="prefetch" href="/TIL/assets/js/page-0206~0226.5da382f5.js"><link rel="prefetch" href="/TIL/assets/js/page-0211-0220.cd9bd482.js"><link rel="prefetch" href="/TIL/assets/js/page-0217-0221.1ed564ea.js"><link rel="prefetch" href="/TIL/assets/js/page-0221-0227.40b291d8.js"><link rel="prefetch" href="/TIL/assets/js/page-0222-0229.c4aa2b4d.js"><link rel="prefetch" href="/TIL/assets/js/page-0227~0305.164780e1.js"><link rel="prefetch" href="/TIL/assets/js/page-0228-0313.960c5eb2.js"><link rel="prefetch" href="/TIL/assets/js/page-0301-0307.8a2dd769.js"><link rel="prefetch" href="/TIL/assets/js/page-0306~0319.d7e1dd39.js"><link rel="prefetch" href="/TIL/assets/js/page-0308-0314.95d08be9.js"><link rel="prefetch" href="/TIL/assets/js/page-0314-0320.a482c7e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0315-0321.0bf22c5a.js"><link rel="prefetch" href="/TIL/assets/js/page-0320~0402.dc9cbbee.js"><link rel="prefetch" href="/TIL/assets/js/page-0321-0328.536bc991.js"><link rel="prefetch" href="/TIL/assets/js/page-0322-0328.5002c0f8.js"><link rel="prefetch" href="/TIL/assets/js/page-0329-0404.c6f98895.js"><link rel="prefetch" href="/TIL/assets/js/page-0329~0403.5b50aeae.js"><link rel="prefetch" href="/TIL/assets/js/page-0403~0423.db8f2eb4.js"><link rel="prefetch" href="/TIL/assets/js/page-0404~0410.6dd2170c.js"><link rel="prefetch" href="/TIL/assets/js/page-0405-0411.dfef4290.js"><link rel="prefetch" href="/TIL/assets/js/page-0411~0417.31e79aa4.js"><link rel="prefetch" href="/TIL/assets/js/page-0412-0418.aab597de.js"><link rel="prefetch" href="/TIL/assets/js/page-0418~0424.acb47103.js"><link rel="prefetch" href="/TIL/assets/js/page-0419-0425.bc1c1f3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0425~0501.63985992.js"><link rel="prefetch" href="/TIL/assets/js/page-0426-0502.d7a75a07.js"><link rel="prefetch" href="/TIL/assets/js/page-0502~0515.21ce942d.js"><link rel="prefetch" href="/TIL/assets/js/page-0503-0509.fb0660a5.js"><link rel="prefetch" href="/TIL/assets/js/page-0510-0516.00f7a787.js"><link rel="prefetch" href="/TIL/assets/js/page-0516~0529.c375a6ba.js"><link rel="prefetch" href="/TIL/assets/js/page-0517-0523.b1aa4a22.js"><link rel="prefetch" href="/TIL/assets/js/page-0523~0605.6e7cab56.js"><link rel="prefetch" href="/TIL/assets/js/page-0524-0530.8c92fe4f.js"><link rel="prefetch" href="/TIL/assets/js/page-0531-0606.e40cfd3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0606~0619.b2a4a63a.js"><link rel="prefetch" href="/TIL/assets/js/page-0607-0613.b7eaa930.js"><link rel="prefetch" href="/TIL/assets/js/page-0612.6d4d2838.js"><link rel="prefetch" href="/TIL/assets/js/page-0613.dfd2eb79.js"><link rel="prefetch" href="/TIL/assets/js/page-0614-0620.8c3b6db2.js"><link rel="prefetch" href="/TIL/assets/js/page-0614.c29fe08f.js"><link rel="prefetch" href="/TIL/assets/js/page-0621-0627.8b7cfba5.js"><link rel="prefetch" href="/TIL/assets/js/page-0627~0703.32c82c88.js"><link rel="prefetch" href="/TIL/assets/js/page-0628-0704.a12f4dd5.js"><link rel="prefetch" href="/TIL/assets/js/page-0705-0808.84dfa0c2.js"><link rel="prefetch" href="/TIL/assets/js/page-0711~0717.c1d09532.js"><link rel="prefetch" href="/TIL/assets/js/page-0718~0724.28a7589f.js"><link rel="prefetch" href="/TIL/assets/js/page-0725~0807.ef50582d.js"><link rel="prefetch" href="/TIL/assets/js/page-0807~0902.96994631.js"><link rel="prefetch" href="/TIL/assets/js/page-0808~0814.d656f648.js"><link rel="prefetch" href="/TIL/assets/js/page-0809-0815.348cc1c5.js"><link rel="prefetch" href="/TIL/assets/js/page-0815~0824.df5c5da0.js"><link rel="prefetch" href="/TIL/assets/js/page-0816-0822.87a87566.js"><link rel="prefetch" href="/TIL/assets/js/page-0822~0911.4867b37a.js"><link rel="prefetch" href="/TIL/assets/js/page-0823-0829.8bcfd48b.js"><link rel="prefetch" href="/TIL/assets/js/page-0830-0905.8b54a9e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0903~0910.f917d595.js"><link rel="prefetch" href="/TIL/assets/js/page-0906-0919.a1897d51.js"><link rel="prefetch" href="/TIL/assets/js/page-0911~0918.7dfbe6de.js"><link rel="prefetch" href="/TIL/assets/js/page-0912~0918.274ce7a6.js"><link rel="prefetch" href="/TIL/assets/js/page-0919~0925.e25dd9ff.js"><link rel="prefetch" href="/TIL/assets/js/page-0920-0926.22e5547a.js"><link rel="prefetch" href="/TIL/assets/js/page-0926~1002.d97a33b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0927-1003.cd544f10.js"><link rel="prefetch" href="/TIL/assets/js/page-1003~1009.b12a6f87.js"><link rel="prefetch" href="/TIL/assets/js/page-1004-1010.92ee8f8e.js"><link rel="prefetch" href="/TIL/assets/js/page-1010~1016.00b69211.js"><link rel="prefetch" href="/TIL/assets/js/page-1011-1017.c314b6aa.js"><link rel="prefetch" href="/TIL/assets/js/page-1017~1030.03e8572f.js"><link rel="prefetch" href="/TIL/assets/js/page-1018-1024.35384747.js"><link rel="prefetch" href="/TIL/assets/js/page-1025-1031.e5a2aad2.js"><link rel="prefetch" href="/TIL/assets/js/page-1031~1113.813912c9.js"><link rel="prefetch" href="/TIL/assets/js/page-1101-1107.e08121f1.js"><link rel="prefetch" href="/TIL/assets/js/page-1108-1114.14c10b7a.js"><link rel="prefetch" href="/TIL/assets/js/page-1113~1109.6ffeae7e.js"><link rel="prefetch" href="/TIL/assets/js/page-1114~1127.edbc49cd.js"><link rel="prefetch" href="/TIL/assets/js/page-1115-1124.248147ec.js"><link rel="prefetch" href="/TIL/assets/js/page-1122-1128.de82e713.js"><link rel="prefetch" href="/TIL/assets/js/page-1128~1211.ca0d6242.js"><link rel="prefetch" href="/TIL/assets/js/page-1129-1205.57233094.js"><link rel="prefetch" href="/TIL/assets/js/page-1204~1217.bfef77e0.js"><link rel="prefetch" href="/TIL/assets/js/page-1206-1212.100e1893.js"><link rel="prefetch" href="/TIL/assets/js/page-1212~0101.031e14d3.js"><link rel="prefetch" href="/TIL/assets/js/page-1213-1219.0e09712c.js"><link rel="prefetch" href="/TIL/assets/js/page-📖TodayILearned.7bda0772.js"><link rel="prefetch" href="/TIL/assets/js/vendors~photo-swipe.7980dd4b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.c9ce91a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/TIL/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">ahnjs TIL</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2023</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2022</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">2021</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2021/0217/" class="sidebar-link">0217 - 0221</a></li><li><a href="/TIL/2021/0222/" class="sidebar-link">0222 - 0229</a></li><li><a href="/TIL/2021/0301/" class="sidebar-link">0301 - 0307</a></li><li><a href="/TIL/2021/0308/" class="sidebar-link">0308 - 0314</a></li><li><a href="/TIL/2021/0315/" class="sidebar-link">0315 - 0321</a></li><li><a href="/TIL/2021/0322/" class="sidebar-link">0322 - 0328</a></li><li><a href="/TIL/2021/0329/" class="sidebar-link">0329 - 0404</a></li><li><a href="/TIL/2021/0405/" class="sidebar-link">0405 - 0411</a></li><li><a href="/TIL/2021/0412/" class="sidebar-link">0412 - 0418</a></li><li><a href="/TIL/2021/0419/" class="sidebar-link">0419 - 0425</a></li><li><a href="/TIL/2021/0426/" class="sidebar-link">0426 - 0502</a></li><li><a href="/TIL/2021/0503/" class="sidebar-link">0503 - 0509</a></li><li><a href="/TIL/2021/0510/" class="sidebar-link">0510 - 0516</a></li><li><a href="/TIL/2021/0517/" class="sidebar-link">0517 - 0523</a></li><li><a href="/TIL/2021/0524/" class="sidebar-link">0524 - 0530</a></li><li><a href="/TIL/2021/0531/" class="sidebar-link">0531 - 0606</a></li><li><a href="/TIL/2021/0607/" class="sidebar-link">0607 - 0613</a></li><li><a href="/TIL/2021/0614/" class="sidebar-link">0614 - 0620</a></li><li><a href="/TIL/2021/0621/" class="sidebar-link">0621 - 0627</a></li><li><a href="/TIL/2021/0628/" class="sidebar-link">0628 - 0704</a></li><li><a href="/TIL/2021/0705/" class="sidebar-link">0705 - 0808</a></li><li><a href="/TIL/2021/0809/" class="sidebar-link">0809 - 0815</a></li><li><a href="/TIL/2021/0816/" class="sidebar-link">0816 - 0822</a></li><li><a href="/TIL/2021/0823/" class="sidebar-link">0823 - 0829</a></li><li><a href="/TIL/2021/0830/" class="sidebar-link">0830 - 0905</a></li><li><a href="/TIL/2021/0906/" class="sidebar-link">0906 - 0919</a></li><li><a href="/TIL/2021/0920/" class="sidebar-link">0920 - 0926</a></li><li><a href="/TIL/2021/0927/" class="sidebar-link">0927 - 1003</a></li><li><a href="/TIL/2021/1004/" class="sidebar-link">1004 - 1010</a></li><li><a href="/TIL/2021/1011/" class="sidebar-link">1011 - 1017</a></li><li><a href="/TIL/2021/1018/" class="sidebar-link">1018 - 1024</a></li><li><a href="/TIL/2021/1101/" class="sidebar-link">1101 - 1107</a></li><li><a href="/TIL/2021/1108/" class="sidebar-link">1108 - 1114</a></li><li><a href="/TIL/2021/1115/" class="sidebar-link">1115 - 1124</a></li><li><a href="/TIL/2021/1122/" class="sidebar-link">1122 - 1128</a></li><li><a href="/TIL/2021/1129/" class="sidebar-link">1129 - 1205</a></li><li><a href="/TIL/2021/1206/" class="sidebar-link">1206 - 1212</a></li><li><a href="/TIL/2021/1213/" class="sidebar-link">1213 - 1219</a></li><li><a href="/TIL/2021/1220/" aria-current="page" class="active sidebar-link">1220 - 1226</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#_1221-전략패턴과-커맨드패턴" class="sidebar-link">1221 - 전략패턴과 커맨드패턴</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#전략패턴" class="sidebar-link heading3">전략패턴</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#커맨드-패턴" class="sidebar-link heading3">커맨드 패턴</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#전략패턴과-커맨드패턴의-차이" class="sidebar-link heading3">전략패턴과 커맨드패턴의 차이</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#_1224-multipart" class="sidebar-link">1224 - Multipart</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#multipart란" class="sidebar-link heading3">Multipart란?</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#httpservletrequest는-파일-업로드를-지원하지-않는다" class="sidebar-link heading3">HttpServletRequest는 파일 업로드를 지원하지 않는다.</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#spring-mvc에서의-파일-업로드" class="sidebar-link heading3">Spring MVC에서의 파일 업로드</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#_1225-authenticationprincipal" class="sidebar-link">1225 - @AuthenticationPrincipal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1220/#동작-원리" class="sidebar-link heading3">동작 원리</a></li></ul></li></ul></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">1220 - 1226</span></h1> <div class="page-info"><!----> </div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/TIL/2021/1220/#_1221-전략패턴과-커맨드패턴" class="anchor-link heading2"><div>1221 - 전략패턴과 커맨드패턴</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#전략패턴" class="anchor-link heading3"><div>전략패턴</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#커맨드-패턴" class="anchor-link heading3"><div>커맨드 패턴</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#전략패턴과-커맨드패턴의-차이" class="anchor-link heading3"><div>전략패턴과 커맨드패턴의 차이</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#_1224-multipart" class="anchor-link heading2"><div>1224 - Multipart</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#multipart란" class="anchor-link heading3"><div>Multipart란?</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#httpservletrequest는-파일-업로드를-지원하지-않는다" class="anchor-link heading3"><div>HttpServletRequest는 파일 업로드를 지원하지 않는다.</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#spring-mvc에서의-파일-업로드" class="anchor-link heading3"><div>Spring MVC에서의 파일 업로드</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#_1225-authenticationprincipal" class="anchor-link heading2"><div>1225 - @AuthenticationPrincipal</div></a></li><li class="anchor"><a href="/TIL/2021/1220/#동작-원리" class="anchor-link heading3"><div>동작 원리</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="_1220-1226"><a href="#_1220-1226" class="header-anchor">#</a> 1220 - 1226</h1> <h2 id="_1221-전략패턴과-커맨드패턴"><a href="#_1221-전략패턴과-커맨드패턴" class="header-anchor">#</a> 1221 - 전략패턴과 커맨드패턴</h2> <p>인터페이스를 구현하여 사용하는 두 가지 패턴인 전략 패턴과 커맨드 패턴의 차이</p> <h3 id="전략패턴"><a href="#전략패턴" class="header-anchor">#</a> 전략패턴</h3> <p>전략 패턴은 프로그램이 진행되면서 캡슐화된 로직을 선택할 수 있게 하는 디자인 패턴이다. 로직 실행은 인터페이스에 의존을 시키고 인터페이스를 구현한 로직들을 전달해줌으로써 분기처리 없이 유연서을 갖출 수가 있다.</p> <ul><li>예제 코드</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PeopleWithMovement</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Transportation</span> transportation<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">PeopleWithMovement</span><span class="token punctuation">(</span><span class="token class-name">Transportation</span> transportation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>transportation <span class="token operator">=</span> transportation<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">String</span> start<span class="token punctuation">,</span> <span class="token class-name">String</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        transportation<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">changeTransporation</span><span class="token punctuation">(</span><span class="token class-name">Transportation</span> transportation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>transportation <span class="token operator">=</span> transportation<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>전략을 행항 주체인 Transporation은 인터페이스로 분리되어 캡슐화 되어 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Transportation</span> <span class="token punctuation">{</span>

    <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">String</span> start<span class="token punctuation">,</span> <span class="token class-name">String</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bicycle</span> <span class="token keyword">implements</span> <span class="token class-name">Transportation</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">String</span> start<span class="token punctuation">,</span> <span class="token class-name">String</span> end<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;출발점 : &quot;</span> <span class="token operator">+</span> start <span class="token operator">+</span> <span class="token string">&quot;에서 목적지 : &quot;</span> <span class="token operator">+</span> end <span class="token operator">+</span> <span class="token string">&quot;까지 `자전거`로 이동합니다.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">implements</span> <span class="token class-name">Transportation</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">String</span> start<span class="token punctuation">,</span> <span class="token class-name">String</span> end<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;출발점 : &quot;</span> <span class="token operator">+</span> start <span class="token operator">+</span> <span class="token string">&quot;에서 목적지 : &quot;</span> <span class="token operator">+</span> end <span class="token operator">+</span> <span class="token string">&quot;까지 `버스`로 이동합니다.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Transporation을 구현하여 Bus와 Bicycle 코드 작성</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Bicycle</span> bicycle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bicycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bus</span> bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PeopleWithMovement</span> whybeFirst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PeopleWithMovement</span><span class="token punctuation">(</span>bicycle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        whybeFirst<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">&quot;시작점&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;끝점&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PeopleWithMovement</span> whybeSecond <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PeopleWithMovement</span><span class="token punctuation">(</span>bus<span class="token punctuation">)</span><span class="token punctuation">;</span>
        whybeSecond<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">&quot;시작점&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;끝점&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PeopleWithMovement</span> whybeChangeMovement <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PeopleWithMovement</span><span class="token punctuation">(</span>bicycle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        whybeChangeMovement<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">&quot;시작점&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;중간지점&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        whybeChangeMovement<span class="token punctuation">.</span><span class="token function">changeTransporation</span><span class="token punctuation">(</span>bus<span class="token punctuation">)</span><span class="token punctuation">;</span>
        whybeChangeMovement<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">&quot;중간지점&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;끝점&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>실행 결과</p> <div class="language-java extra-class"><pre class="language-java"><code>출발점 <span class="token operator">:</span> 시작점에서 목적지 <span class="token operator">:</span> 끝점까지 `자전거`로 이동합니다<span class="token punctuation">.</span>
출발점 <span class="token operator">:</span> 시작점에서 목적지 <span class="token operator">:</span> 끝점까지 `버스`로 이동합니다<span class="token punctuation">.</span>
출발점 <span class="token operator">:</span> 시작점에서 목적지 <span class="token operator">:</span> 중간지점까지 `자전거`로 이동합니다<span class="token punctuation">.</span>
출발점 <span class="token operator">:</span> 중간지점에서 목적지 <span class="token operator">:</span> 끝점까지 `버스`로 이동합니다<span class="token punctuation">.</span>
</code></pre></div><h3 id="커맨드-패턴"><a href="#커맨드-패턴" class="header-anchor">#</a> 커맨드 패턴</h3> <p>커맨드 패턴은 요청을 홀로 처리할 수 있도록 요청을 수행하는 여러 인자를 함께 패키징하여 나중에 처리할 수 있도록 만들어주는 행동 중심 디자인 패턴이다. 커맨드를 실행시키는 객체는 커맨드 내부의 요소에 대해서 숨김으로써 코드의 유연성을 가질 수 있다.</p> <ul><li>예제 코드</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PeopleWithLottery</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LotteryCommand</span><span class="token punctuation">&gt;</span></span> lotteryCommands<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">PeopleWithLottery</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LotteryCommand</span><span class="token punctuation">&gt;</span></span> lotteryCommands<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lotteryCommands <span class="token operator">=</span> lotteryCommands<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLotteryCommand</span><span class="token punctuation">(</span><span class="token class-name">LotteryCommand</span> lotteryCommand<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lotteryCommands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>lotteryCommand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">scratchAllLottery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lotteryCommands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">LotteryCommand</span> lotteryCommand <span class="token operator">=</span> lotteryCommands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            lotteryCommand<span class="token punctuation">.</span><span class="token function">scratch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//초기화</span>
        lotteryCommands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LotteryCommand</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">scratch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InstantScratch</span> <span class="token keyword">implements</span> <span class="token class-name">LotteryCommand</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token class-name">InstantLottery</span> instantLottery<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">InstantScratch</span><span class="token punctuation">(</span><span class="token class-name">InstantLottery</span> instantLottery<span class="token punctuation">,</span> <span class="token class-name">Account</span> account<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>instantLottery <span class="token operator">=</span> instantLottery<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> <span class="token class-name">Account</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">scratch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//instantLottery의 당첨을 확인하고 account에 돈을 집어 넣는 로직</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InstantLottery</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> win<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">InstantLottery</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>win <span class="token operator">=</span> win<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isWin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> win<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> balance<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">putMoney</span><span class="token punctuation">(</span><span class="token keyword">int</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        balance <span class="token operator">+=</span> money<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">PeopleWithLottery</span> whybe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PeopleWithLottery</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Account</span> 와이비통장 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//즉석복권 구입</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//즉석복권 생성 로직 </span>
            <span class="token class-name">InstantLottery</span> instantLottery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InstantLottery</span><span class="token punctuation">(</span>당첨여부<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//즉석복권긁기행위 객체 생성 및 커맨드 목록에 추가</span>
            <span class="token class-name">InstantScratch</span> 즉석복권긁기커맨드 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InstantScratch</span><span class="token punctuation">(</span>즉석복권<span class="token punctuation">,</span> 와이비통장<span class="token punctuation">)</span><span class="token punctuation">;</span>
            whybe<span class="token punctuation">.</span><span class="token function">addLotteryCommand</span><span class="token punctuation">(</span>즉석복권긁기커맨드<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        whybe<span class="token punctuation">.</span><span class="token function">scratchAllLotery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>당첨을 확인하고 통장에 돈을 추가하는 것을 캡슐화하고, 긁는 행위를 호출하는 객체(People), 명령을 담장하는 객체(LotteryCommand) 그리고 명령 수행으로 인하여 영향을 받는 객체(MyAccount)가 모두 다르게 구성.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NumberScratch</span> <span class="token keyword">implements</span> <span class="token class-name">LotteryCommand</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> winners<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">NumberLottery</span> numberLottery<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">NumberScratch</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> winners<span class="token punctuation">,</span> <span class="token class-name">NumberLottery</span> numberLottery<span class="token punctuation">,</span> <span class="token class-name">Account</span> account<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>winners <span class="token operator">=</span> winners<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberLottery <span class="token operator">=</span> numberLottery<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">scratch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// winners와 numberLottery를 비교하여 당첨금을 계산하고 </span>
        <span class="token comment">// account에 해당 금액을 입금하는 로직</span>
    <span class="token punctuation">}</span>   
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NumberLottery</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> numbers<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">NumberLottery</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numbers <span class="token operator">=</span> numbers<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> winners<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 당첨 번호와 비교하여 자신의 등수를 계산하는 로직</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">PeopleWithLottery</span> whybe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PeopleWithLottery</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Account</span> 영이통장 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//즉석복권 구입</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//번호식 복권 생성 로직 </span>
            <span class="token class-name">NumberLottery</span> 번호식복권 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NumberLottery</span><span class="token punctuation">(</span>선택한 번호<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//번호식복권긁기행위 객체 생성 및 커맨드 목록에 추가</span>
            <span class="token class-name">NumberScratch</span> 번호식복권긁기커맨드 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NumberScratch</span><span class="token punctuation">(</span>이번주 당첨번호<span class="token punctuation">,</span> 번호식복권<span class="token punctuation">,</span> 영이통장<span class="token punctuation">)</span><span class="token punctuation">;</span>
            whybe<span class="token punctuation">.</span><span class="token function">addLotteryCommand</span><span class="token punctuation">(</span>번호식복권긁기커맨드<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        whybe<span class="token punctuation">.</span><span class="token function">scratchAllLottery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>행위를 캡슐화하여 복권을 긁는 행위를 호출하는 객체인 PeopleWithLottery와 명령 수행으로 인하여 영향을 받는 객체에 큰 변화를 거치지 않도록 만듬</p> <h3 id="전략패턴과-커맨드패턴의-차이"><a href="#전략패턴과-커맨드패턴의-차이" class="header-anchor">#</a> 전략패턴과 커맨드패턴의 차이</h3> <p>전략 패턴은 <code>어떻게</code>라는 측면에 집중. 커맨드 패턴은 <code>무엇</code>에 초점</p> <br> <h2 id="_1224-multipart"><a href="#_1224-multipart" class="header-anchor">#</a> 1224 - Multipart</h2> <h3 id="multipart란"><a href="#multipart란" class="header-anchor">#</a> Multipart란?</h3> <ul><li>웹 클라이언트가 요청을 보낼 때, http 프로토콜의 바디 부분에 데이터를 여러 부분으로 나눠서 보내는 것.
웹 클라이언트가 서버에게 파이을 업로드 할 때, http 프로토콜의 바디 부분에 파일정보를 담아서 전송을 하는데, 파일을 한번에 여러개 전송을 하면 body 부분에 파일이 여러개의 부분으롤 연결되어 전송된다. 이렇게 여러 부분으로 나뉘어서 전송되는 것을 Multipart data라고 한다.</li> <li>보통 파일을 전송할 때 사용한다.</li></ul> <h3 id="httpservletrequest는-파일-업로드를-지원하지-않는다"><a href="#httpservletrequest는-파일-업로드를-지원하지-않는다" class="header-anchor">#</a> HttpServletRequest는 파일 업로드를 지원하지 않는다.</h3> <ul><li>HttpServletRequest는 웹 클라이언트가 전달하는 Multipart 데이터를 쉽게 처리하는 메소드를 제공하지 않는다.
(HttpServletRequest는 http 프로토콜의 body 부분을 읽어들이는 input 스트림안을 지원, 사용자는 이런 input 스트림을 이용해서 Multipart부분을 잘 나누어서 사용해야한다. 보통은 직접 구현하지 않고 라이브러리를 사용)</li> <li>서블릿에서 파일 업로드를 처리하려면 별도의 라이브러리를 사용해야 한다. 대표적인 라이브러리가 아파치 재단의 commons-filedupload이다.</li></ul> <h3 id="spring-mvc에서의-파일-업로드"><a href="#spring-mvc에서의-파일-업로드" class="header-anchor">#</a> Spring MVC에서의 파일 업로드</h3> <p>Spring MVC에서 파일 업로드 하려면 몇가지 라이브러리와 설정을 추가</p> <ul><li>commons-fileupload, commons-io 라이브러리 추가</li> <li>MultipartResolver Bean 추가</li> <li>DispatcherServlet은 준비과정에서 &quot;multipart/form-data&quot;가 요청으로 올 경우 MultipartResolver를 사용한다.
(MultipartFile 매개변수를 사용하기 위해서는 MultipartResolver Bean이 등록되어있어야 한다.)</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">MultipartResolver</span> <span class="token function">multipartResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span>commons<span class="token punctuation">.</span></span>CommonsMultipartResolver</span> multipartResolver <span class="token operator">=</span> <span class="token keyword">new</span> 
    <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span>commons<span class="token punctuation">.</span></span>CommonsMultipartResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    multipartResolver<span class="token punctuation">.</span><span class="token function">setMaxUplaodSize</span><span class="token punctuation">(</span><span class="token number">10485760</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1024 * 1024 * 10 (최대 10MB)</span>
    <span class="token keyword">return</span> multipartResolver<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">StandardServletMultipartResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MultipartConfigElement</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.servlet.multipart&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">MultipartProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultipartAutoConfiguration</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">MultipartProperties</span> multipartProperties<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">MultipartAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">MultipartProperties</span> multipartProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>multipartProperties <span class="token operator">=</span> multipartProperties<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">MultipartConfigElement</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">CommonsMultipartResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">MultipartConfigElement</span> <span class="token function">multipartConfigElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multipartProperties<span class="token punctuation">.</span><span class="token function">createMultipartConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span>MULTIPART_RESOLVER_BEAN_NAME<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">MultipartResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">StandardServletMultipartResolver</span> <span class="token function">multipartResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">StandardServletMultipartResolver</span> multipartResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardServletMultipartResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		multipartResolver<span class="token punctuation">.</span><span class="token function">setResolveLazily</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>multipartProperties<span class="token punctuation">.</span><span class="token function">isResolveLazily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> multipartResolver<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>MultipartResolver는 SpringMVC에서 기본적으로 등록해주지 않지만, SpringBoot에서는 위와 같이 MultipartAutoConfiguration클래스에서 MultipartResolver Bean이 등록되어있지 않는 경우 자동으로 Bean을 등록해준다. 따라서 SpringBoot에서는 별도의 설정없이 MultipartFile 매개변수를 사용할 수 있다.</p> <br> <h2 id="_1225-authenticationprincipal"><a href="#_1225-authenticationprincipal" class="header-anchor">#</a> 1225 - @AuthenticationPrincipal</h2> <p>스프링 시큐리티는 SecurityContext에 인증된 Authentication 객체를 넣어두고 현재 스레드 내에서 공유되도록 관리하고 있다.
보통은 인증 이후 @AuthenticationPrincipal 어노테이션을 통해 UserDetails 인터페이스를 구현한 유저 객체를 주입할 때 사용하는 편이다.</p> <p>관련 클래스와 인터페이스</p> <ul><li>SecurityContext : 인터페이스. Security Context 인터페이스. Authentication에 대한 접근 getter를 정의해 놓았다.</li> <li>SecurityContextImpl : 클래스. SecurityContext 인터페이스를 구현한 객체 Authentication 객체에 대한 getter/setter를 정의해 놓은 객체. 해당 구현체를 통해 내부적으로 현재 스레드의 Security Context를 생성하여 인증 후 Authentication 객체를 넣어놓는 역할을 한다.</li> <li>Authentication : 인증 정보에 대한 부분을 정의해놓은 인터페이스. Principal과 같은 Credentials, Authorities 에 대한 정의가 되어있다. 여러 구현체가 있다. (ex. UsernamePasswordAuthenticationToken)
<ul><li>Principal의 의미는 &quot;인증되는 주체의 ID&quot;</li> <li>Credentials은 &quot;주체가 정확한지 증명하는 것&quot;</li> <li>Authorities는 &quot;권한&quot;</li></ul></li> <li>UserDetails : 사용자 정보를 가지는 인터페이스. 이를 구현하여 실제 로그인에 사용할 클래스를 만들면 되고, 스프링 시큐리티 내부적으로 직접 사용하지는 않고 Authentication으로 캡슐화하여 저장된다. 따라서 UserDetails구현체의 정보는 Spring Security Context에 저장된 Authentication 객체가 가져간다.</li> <li>HandlerMethodArgumentResolver : 인터페이스. 특정 적략에 따라 한 request에서 넘어온 인자들을 메소드 파라미터로 해석할 수 있도록 도와줌</li> <li>AuthenticationPrincipalArgumentResolver : 스프링 시큐리티에서 HandlerMethodArgumentResolver를 구현한 구현체로 @AuthenticationPrincipal 어노테이션이 실제로 사용되는 부분.</li></ul> <h3 id="동작-원리"><a href="#동작-원리" class="header-anchor">#</a> 동작 원리</h3> <p>현재 스레드가 세션을 물고 있다면 이미 SecurityContextHolder의 getContext() 메소드를 통해 SecurityContext 객체를 얻고 그 안의 getAuthentication() 메소드를 통해 Authentication (인증객체)를 얻을 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/logout&quot;</span><span class="token punctuation">,</span> 
             consumes <span class="token operator">=</span> <span class="token class-name">MediaTypes</span><span class="token punctuation">.</span>HAL_JSON_VALUE<span class="token punctuation">,</span> 
             produces <span class="token operator">=</span> <span class="token class-name">MediaTypes</span><span class="token punctuation">.</span>HAL_JSON_VALUE<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@AuthenticationPrincipal</span> <span class="token class-name">SecurityUser</span> securityUser<span class="token punctuation">,</span> 
                     <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> authorization<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// 컨트롤러 로직</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Spring Security를 사용하는 경우, AuthenticationPrincipalArgumentResolver 클래스를 활용하여 resolveArgument 메소드를 구현하고 SecurityContext에 저장된 인증객체를 기반으로 Authentication 객체를 꺼내오게 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationPrincipalArgumentResolver</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerMethodArgumentResolver</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token class-name">ExpressionParser</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpelExpressionParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token class-name">BeanResolver</span> beanResolver<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supportsParameter</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">findMethodAnnotation</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationPrincipal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> parameter<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">resolveArgument</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">,</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
			<span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token class-name">WebDataBinderFactory</span> binderFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
        <span class="token comment">// Security Context에서 꺼내욘 객체를 기반으로 한다.</span>
		<span class="token class-name">Authentication</span> authentication <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>authentication <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

        <span class="token comment">// 인증객체에서 Principal을 꺼낸다.</span>
		<span class="token class-name">Object</span> principal <span class="token operator">=</span> authentication<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 해당 어노테이션이 붙은 파라미터가 존재하는지 찾는다.</span>
		<span class="token class-name">AuthenticationPrincipal</span> annotation <span class="token operator">=</span> <span class="token function">findMethodAnnotation</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationPrincipal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> expressionToParse <span class="token operator">=</span> annotation<span class="token punctuation">.</span><span class="token function">expression</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasLength</span><span class="token punctuation">(</span>expressionToParse<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">StandardEvaluationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardEvaluationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			context<span class="token punctuation">.</span><span class="token function">setRootObject</span><span class="token punctuation">(</span>principal<span class="token punctuation">)</span><span class="token punctuation">;</span>
			context<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;this&quot;</span><span class="token punctuation">,</span> principal<span class="token punctuation">)</span><span class="token punctuation">;</span>
			context<span class="token punctuation">.</span><span class="token function">setBeanResolver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>beanResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Expression</span> expression <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parser<span class="token punctuation">.</span><span class="token function">parseExpression</span><span class="token punctuation">(</span>expressionToParse<span class="token punctuation">)</span><span class="token punctuation">;</span>
			principal <span class="token operator">=</span> expression<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>principal <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>principal<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>annotation<span class="token punctuation">.</span><span class="token function">errorOnInvalidType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ClassCastException</span><span class="token punctuation">(</span>principal <span class="token operator">+</span> <span class="token string">&quot; is not assignable to &quot;</span> <span class="token operator">+</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

        <span class="token comment">// principal 리턴</span>
		<span class="token keyword">return</span> principal<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanResolver</span><span class="token punctuation">(</span><span class="token class-name">BeanResolver</span> beanResolver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>beanResolver <span class="token operator">=</span> beanResolver<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Annotation</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">findMethodAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> annotationClass<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">T</span> annotation <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterAnnotation</span><span class="token punctuation">(</span>annotationClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>annotation <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> annotation<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annotationsToSearch <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Annotation</span> toSearch <span class="token operator">:</span> annotationsToSearch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			annotation <span class="token operator">=</span> <span class="token class-name">AnnotationUtils</span><span class="token punctuation">.</span><span class="token function">findAnnotation</span><span class="token punctuation">(</span>toSearch<span class="token punctuation">.</span><span class="token function">annotationType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> annotationClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>annotation <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> annotation<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>컨트롤러의 파라미터마다 해당 resolveArgument 메소드가 실행된다.</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">September 13, 2022 21:44</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: jaesungahn91@gmail.com" class="contributor">
          ahnjs
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/TIL/2021/1213/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        1213 - 1219
      </a></span> <!----></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/TIL/assets/js/app.5fb46d7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" defer></script><script src="/TIL/assets/js/page-1220-1226.4cb62ec6.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" defer></script>
  </body>
</html>
