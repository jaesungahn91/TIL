<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1108 - 1114 | ahnjs TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Today I Learned">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.c9ce91a1.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5fb46d7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" as="script"><link rel="preload" href="/TIL/assets/js/page-1108-1114.14c10b7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" as="script"><link rel="prefetch" href="/TIL/assets/js/103.8c089b22.js"><link rel="prefetch" href="/TIL/assets/js/104.119134a5.js"><link rel="prefetch" href="/TIL/assets/js/layout-Blog.a086a7ca.js"><link rel="prefetch" href="/TIL/assets/js/layout-Layout.0945805f.js"><link rel="prefetch" href="/TIL/assets/js/layout-NotFound.9e898f41.js"><link rel="prefetch" href="/TIL/assets/js/layout-Slide.f940a7a7.js"><link rel="prefetch" href="/TIL/assets/js/page-0102-0109.d861648d.js"><link rel="prefetch" href="/TIL/assets/js/page-0102~0108.3f3ff8b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0109~0115.4c6b192d.js"><link rel="prefetch" href="/TIL/assets/js/page-0110-0116.feb84c5b.js"><link rel="prefetch" href="/TIL/assets/js/page-0116~0129.d55b06ca.js"><link rel="prefetch" href="/TIL/assets/js/page-0117-0123.7a6dce2f.js"><link rel="prefetch" href="/TIL/assets/js/page-0124-0206.ee32f254.js"><link rel="prefetch" href="/TIL/assets/js/page-0130~0205.df7a6a64.js"><link rel="prefetch" href="/TIL/assets/js/page-0206~0226.5da382f5.js"><link rel="prefetch" href="/TIL/assets/js/page-0211-0220.cd9bd482.js"><link rel="prefetch" href="/TIL/assets/js/page-0217-0221.1ed564ea.js"><link rel="prefetch" href="/TIL/assets/js/page-0221-0227.40b291d8.js"><link rel="prefetch" href="/TIL/assets/js/page-0222-0229.c4aa2b4d.js"><link rel="prefetch" href="/TIL/assets/js/page-0227~0305.164780e1.js"><link rel="prefetch" href="/TIL/assets/js/page-0228-0313.960c5eb2.js"><link rel="prefetch" href="/TIL/assets/js/page-0301-0307.8a2dd769.js"><link rel="prefetch" href="/TIL/assets/js/page-0306~0319.d7e1dd39.js"><link rel="prefetch" href="/TIL/assets/js/page-0308-0314.95d08be9.js"><link rel="prefetch" href="/TIL/assets/js/page-0314-0320.a482c7e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0315-0321.0bf22c5a.js"><link rel="prefetch" href="/TIL/assets/js/page-0320~0402.dc9cbbee.js"><link rel="prefetch" href="/TIL/assets/js/page-0321-0328.536bc991.js"><link rel="prefetch" href="/TIL/assets/js/page-0322-0328.5002c0f8.js"><link rel="prefetch" href="/TIL/assets/js/page-0329-0404.c6f98895.js"><link rel="prefetch" href="/TIL/assets/js/page-0329~0403.5b50aeae.js"><link rel="prefetch" href="/TIL/assets/js/page-0403~0423.db8f2eb4.js"><link rel="prefetch" href="/TIL/assets/js/page-0404~0410.6dd2170c.js"><link rel="prefetch" href="/TIL/assets/js/page-0405-0411.dfef4290.js"><link rel="prefetch" href="/TIL/assets/js/page-0411~0417.31e79aa4.js"><link rel="prefetch" href="/TIL/assets/js/page-0412-0418.aab597de.js"><link rel="prefetch" href="/TIL/assets/js/page-0418~0424.acb47103.js"><link rel="prefetch" href="/TIL/assets/js/page-0419-0425.bc1c1f3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0425~0501.63985992.js"><link rel="prefetch" href="/TIL/assets/js/page-0426-0502.d7a75a07.js"><link rel="prefetch" href="/TIL/assets/js/page-0502~0515.21ce942d.js"><link rel="prefetch" href="/TIL/assets/js/page-0503-0509.fb0660a5.js"><link rel="prefetch" href="/TIL/assets/js/page-0510-0516.00f7a787.js"><link rel="prefetch" href="/TIL/assets/js/page-0516~0529.c375a6ba.js"><link rel="prefetch" href="/TIL/assets/js/page-0517-0523.b1aa4a22.js"><link rel="prefetch" href="/TIL/assets/js/page-0523~0605.6e7cab56.js"><link rel="prefetch" href="/TIL/assets/js/page-0524-0530.8c92fe4f.js"><link rel="prefetch" href="/TIL/assets/js/page-0531-0606.e40cfd3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0606~0619.b2a4a63a.js"><link rel="prefetch" href="/TIL/assets/js/page-0607-0613.b7eaa930.js"><link rel="prefetch" href="/TIL/assets/js/page-0612.6d4d2838.js"><link rel="prefetch" href="/TIL/assets/js/page-0613.dfd2eb79.js"><link rel="prefetch" href="/TIL/assets/js/page-0614-0620.8c3b6db2.js"><link rel="prefetch" href="/TIL/assets/js/page-0614.c29fe08f.js"><link rel="prefetch" href="/TIL/assets/js/page-0621-0627.8b7cfba5.js"><link rel="prefetch" href="/TIL/assets/js/page-0627~0703.32c82c88.js"><link rel="prefetch" href="/TIL/assets/js/page-0628-0704.a12f4dd5.js"><link rel="prefetch" href="/TIL/assets/js/page-0705-0808.84dfa0c2.js"><link rel="prefetch" href="/TIL/assets/js/page-0711~0717.c1d09532.js"><link rel="prefetch" href="/TIL/assets/js/page-0718~0724.28a7589f.js"><link rel="prefetch" href="/TIL/assets/js/page-0725~0807.ef50582d.js"><link rel="prefetch" href="/TIL/assets/js/page-0807~0902.96994631.js"><link rel="prefetch" href="/TIL/assets/js/page-0808~0814.d656f648.js"><link rel="prefetch" href="/TIL/assets/js/page-0809-0815.348cc1c5.js"><link rel="prefetch" href="/TIL/assets/js/page-0815~0824.df5c5da0.js"><link rel="prefetch" href="/TIL/assets/js/page-0816-0822.87a87566.js"><link rel="prefetch" href="/TIL/assets/js/page-0822~0911.4867b37a.js"><link rel="prefetch" href="/TIL/assets/js/page-0823-0829.8bcfd48b.js"><link rel="prefetch" href="/TIL/assets/js/page-0830-0905.8b54a9e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0903~0910.f917d595.js"><link rel="prefetch" href="/TIL/assets/js/page-0906-0919.a1897d51.js"><link rel="prefetch" href="/TIL/assets/js/page-0911~0918.7dfbe6de.js"><link rel="prefetch" href="/TIL/assets/js/page-0912~0918.274ce7a6.js"><link rel="prefetch" href="/TIL/assets/js/page-0919~0925.e25dd9ff.js"><link rel="prefetch" href="/TIL/assets/js/page-0920-0926.22e5547a.js"><link rel="prefetch" href="/TIL/assets/js/page-0926~1002.d97a33b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0927-1003.cd544f10.js"><link rel="prefetch" href="/TIL/assets/js/page-1003~1009.b12a6f87.js"><link rel="prefetch" href="/TIL/assets/js/page-1004-1010.92ee8f8e.js"><link rel="prefetch" href="/TIL/assets/js/page-1010~1016.00b69211.js"><link rel="prefetch" href="/TIL/assets/js/page-1011-1017.c314b6aa.js"><link rel="prefetch" href="/TIL/assets/js/page-1017~1030.03e8572f.js"><link rel="prefetch" href="/TIL/assets/js/page-1018-1024.35384747.js"><link rel="prefetch" href="/TIL/assets/js/page-1025-1031.e5a2aad2.js"><link rel="prefetch" href="/TIL/assets/js/page-1031~1113.813912c9.js"><link rel="prefetch" href="/TIL/assets/js/page-1101-1107.e08121f1.js"><link rel="prefetch" href="/TIL/assets/js/page-1113~1109.6ffeae7e.js"><link rel="prefetch" href="/TIL/assets/js/page-1114~1127.edbc49cd.js"><link rel="prefetch" href="/TIL/assets/js/page-1115-1124.248147ec.js"><link rel="prefetch" href="/TIL/assets/js/page-1122-1128.de82e713.js"><link rel="prefetch" href="/TIL/assets/js/page-1128~1211.ca0d6242.js"><link rel="prefetch" href="/TIL/assets/js/page-1129-1205.57233094.js"><link rel="prefetch" href="/TIL/assets/js/page-1204~1217.bfef77e0.js"><link rel="prefetch" href="/TIL/assets/js/page-1206-1212.100e1893.js"><link rel="prefetch" href="/TIL/assets/js/page-1212~0101.031e14d3.js"><link rel="prefetch" href="/TIL/assets/js/page-1213-1219.0e09712c.js"><link rel="prefetch" href="/TIL/assets/js/page-1220-1226.4cb62ec6.js"><link rel="prefetch" href="/TIL/assets/js/page-📖TodayILearned.7bda0772.js"><link rel="prefetch" href="/TIL/assets/js/vendors~photo-swipe.7980dd4b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.c9ce91a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/TIL/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">ahnjs TIL</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2023</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2022</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">2021</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2021/0217/" class="sidebar-link">0217 - 0221</a></li><li><a href="/TIL/2021/0222/" class="sidebar-link">0222 - 0229</a></li><li><a href="/TIL/2021/0301/" class="sidebar-link">0301 - 0307</a></li><li><a href="/TIL/2021/0308/" class="sidebar-link">0308 - 0314</a></li><li><a href="/TIL/2021/0315/" class="sidebar-link">0315 - 0321</a></li><li><a href="/TIL/2021/0322/" class="sidebar-link">0322 - 0328</a></li><li><a href="/TIL/2021/0329/" class="sidebar-link">0329 - 0404</a></li><li><a href="/TIL/2021/0405/" class="sidebar-link">0405 - 0411</a></li><li><a href="/TIL/2021/0412/" class="sidebar-link">0412 - 0418</a></li><li><a href="/TIL/2021/0419/" class="sidebar-link">0419 - 0425</a></li><li><a href="/TIL/2021/0426/" class="sidebar-link">0426 - 0502</a></li><li><a href="/TIL/2021/0503/" class="sidebar-link">0503 - 0509</a></li><li><a href="/TIL/2021/0510/" class="sidebar-link">0510 - 0516</a></li><li><a href="/TIL/2021/0517/" class="sidebar-link">0517 - 0523</a></li><li><a href="/TIL/2021/0524/" class="sidebar-link">0524 - 0530</a></li><li><a href="/TIL/2021/0531/" class="sidebar-link">0531 - 0606</a></li><li><a href="/TIL/2021/0607/" class="sidebar-link">0607 - 0613</a></li><li><a href="/TIL/2021/0614/" class="sidebar-link">0614 - 0620</a></li><li><a href="/TIL/2021/0621/" class="sidebar-link">0621 - 0627</a></li><li><a href="/TIL/2021/0628/" class="sidebar-link">0628 - 0704</a></li><li><a href="/TIL/2021/0705/" class="sidebar-link">0705 - 0808</a></li><li><a href="/TIL/2021/0809/" class="sidebar-link">0809 - 0815</a></li><li><a href="/TIL/2021/0816/" class="sidebar-link">0816 - 0822</a></li><li><a href="/TIL/2021/0823/" class="sidebar-link">0823 - 0829</a></li><li><a href="/TIL/2021/0830/" class="sidebar-link">0830 - 0905</a></li><li><a href="/TIL/2021/0906/" class="sidebar-link">0906 - 0919</a></li><li><a href="/TIL/2021/0920/" class="sidebar-link">0920 - 0926</a></li><li><a href="/TIL/2021/0927/" class="sidebar-link">0927 - 1003</a></li><li><a href="/TIL/2021/1004/" class="sidebar-link">1004 - 1010</a></li><li><a href="/TIL/2021/1011/" class="sidebar-link">1011 - 1017</a></li><li><a href="/TIL/2021/1018/" class="sidebar-link">1018 - 1024</a></li><li><a href="/TIL/2021/1101/" class="sidebar-link">1101 - 1107</a></li><li><a href="/TIL/2021/1108/" aria-current="page" class="active sidebar-link">1108 - 1114</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#_1108-ssl" class="sidebar-link">1108 - ssl</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#ssl이란" class="sidebar-link heading3">SSL이란?</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#ssl-tls-작동원리" class="sidebar-link heading3">SSL/TLS 작동원리</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#ssl-tls의-중요성" class="sidebar-link heading3">SSL/TLS의 중요성</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#ssl-tls의-차이" class="sidebar-link heading3">SSL/TLS의 차이</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#ssl인증이란" class="sidebar-link heading3">SSL인증이란?</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#ssl-인증서-유형" class="sidebar-link heading3">SSL 인증서 유형</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#_1110-mapstruct-맵스트럭트" class="sidebar-link">1110 - MapStruct(맵스트럭트)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#맵스트럭트-사용법" class="sidebar-link heading3">맵스트럭트 사용법</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#_1112-custom-exception-장단점" class="sidebar-link">1112 - custom exception 장단점</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#표준-예외-사용시-장점" class="sidebar-link heading3">표준 예외 사용시 장점</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#커스텀-예외-사용시-장점" class="sidebar-link heading3">커스텀 예외 사용시 장점</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#_1113-임베디드-타입-embedded-type" class="sidebar-link">1113 - 임베디드 타입(embedded type)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#임베디드-타입-복합-값-타입" class="sidebar-link heading3">임베디드 타입(복합 값 타입)</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#임베디드-타입-사용-방법" class="sidebar-link heading3">임베디드 타입 사용 방법</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#임베디드-타입의-장점" class="sidebar-link heading3">임베디드 타입의 장점</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#임베디드-타입과-테이블-매핑" class="sidebar-link heading3">임베디드 타입과 테이블 매핑</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#임베디드-타입과-연관관계" class="sidebar-link heading3">임베디드 타입과 연관관계</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#attributeoverride-속성-재정의" class="sidebar-link heading3">@AttributeOverride: 속성 재정의</a></li><li class="sidebar-sub-header"><a href="/TIL/2021/1108/#임베디드-타입과-null" class="sidebar-link heading3">임베디드 타입과 Null</a></li></ul></li></ul></li><li><a href="/TIL/2021/1115/" class="sidebar-link">1115 - 1124</a></li><li><a href="/TIL/2021/1122/" class="sidebar-link">1122 - 1128</a></li><li><a href="/TIL/2021/1129/" class="sidebar-link">1129 - 1205</a></li><li><a href="/TIL/2021/1206/" class="sidebar-link">1206 - 1212</a></li><li><a href="/TIL/2021/1213/" class="sidebar-link">1213 - 1219</a></li><li><a href="/TIL/2021/1220/" class="sidebar-link">1220 - 1226</a></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">1108 - 1114</span></h1> <div class="page-info"><!----> </div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/TIL/2021/1108/#_1108-ssl" class="anchor-link heading2"><div>1108 - ssl</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#ssl이란" class="anchor-link heading3"><div>SSL이란?</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#ssl-tls-작동원리" class="anchor-link heading3"><div>SSL/TLS 작동원리</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#ssl-tls의-중요성" class="anchor-link heading3"><div>SSL/TLS의 중요성</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#ssl-tls의-차이" class="anchor-link heading3"><div>SSL/TLS의 차이</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#ssl인증이란" class="anchor-link heading3"><div>SSL인증이란?</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#ssl-인증서-유형" class="anchor-link heading3"><div>SSL 인증서 유형</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#_1110-mapstruct-맵스트럭트" class="anchor-link heading2"><div>1110 - MapStruct(맵스트럭트)</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#맵스트럭트-사용법" class="anchor-link heading3"><div>맵스트럭트 사용법</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#_1112-custom-exception-장단점" class="anchor-link heading2"><div>1112 - custom exception 장단점</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#표준-예외-사용시-장점" class="anchor-link heading3"><div>표준 예외 사용시 장점</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#커스텀-예외-사용시-장점" class="anchor-link heading3"><div>커스텀 예외 사용시 장점</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#_1113-임베디드-타입-embedded-type" class="anchor-link heading2"><div>1113 - 임베디드 타입(embedded type)</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#임베디드-타입-복합-값-타입" class="anchor-link heading3"><div>임베디드 타입(복합 값 타입)</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#임베디드-타입-사용-방법" class="anchor-link heading3"><div>임베디드 타입 사용 방법</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#임베디드-타입의-장점" class="anchor-link heading3"><div>임베디드 타입의 장점</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#임베디드-타입과-테이블-매핑" class="anchor-link heading3"><div>임베디드 타입과 테이블 매핑</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#임베디드-타입과-연관관계" class="anchor-link heading3"><div>임베디드 타입과 연관관계</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#attributeoverride-속성-재정의" class="anchor-link heading3"><div>@AttributeOverride: 속성 재정의</div></a></li><li class="anchor"><a href="/TIL/2021/1108/#임베디드-타입과-null" class="anchor-link heading3"><div>임베디드 타입과 Null</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="_1108-1114"><a href="#_1108-1114" class="header-anchor">#</a> 1108 - 1114</h1> <h2 id="_1108-ssl"><a href="#_1108-ssl" class="header-anchor">#</a> 1108 - ssl</h2> <h3 id="ssl이란"><a href="#ssl이란" class="header-anchor">#</a> SSL이란?</h3> <p>SSL(Secure Socket Layer)은 암호화 기반 인터넷 보안 프로토콜이다. 인터넷 통신의 개인정보 보호, 인증, 데이터 무결성을 보장하기 위해 Netscape가 1995년 처음으로 개발했다. SSL은 현재 사용 중인 TLS 암호화의 전신이다.</p> <p>SSL/TLS를 사용하는 웹사이트의 URL에는 &quot;HTTP&quot;대신 &quot;HTTPS&quot;가 있다.</p> <h3 id="ssl-tls-작동원리"><a href="#ssl-tls-작동원리" class="header-anchor">#</a> SSL/TLS 작동원리</h3> <ul><li>SSL은 높은 수준의 개인정보 보호를 제공하기 위해, 웹에서 전송되는 데이터를 암호화한다. 따라서, 데이터를 가로채려는 자는 거의 해독할 수 없는 복잡한 문자만 보게 된다.</li> <li>SSL은 두 통신 장치 사이에 핸드셰이크라는 인증 프로세스를 시작하여 두 장치의 ID를 확인한다.</li> <li>SSL은 또한 데이터 무결성을 제공하기 위해 데이터에 디지털 서명하여 데이터가 의도된 수신자에 도착하기 전에 조작되지 않았다는 것을 확인하다.</li></ul> <p>SSL은 여러 번 개선되어 매번 성능이 개선되었으며, 1999년에 SSL은 TLS로 업데이트 됐다.</p> <h3 id="ssl-tls의-중요성"><a href="#ssl-tls의-중요성" class="header-anchor">#</a> SSL/TLS의 중요성</h3> <ul><li>예, 주문 과정에서 고객의 신용 카드 번호가 사용됐을떄 탈취자에게 노출되게 된다.</li> <li>또한 SSL은 특정한 유형의 사이버 공격도 차단한다.</li></ul> <h3 id="ssl-tls의-차이"><a href="#ssl-tls의-차이" class="header-anchor">#</a> SSL/TLS의 차이</h3> <ul><li>SSL은 TLS(Transport Layer Security)라는 또 다른 프로토콜의 바로 이전 버전이다. 1999년 IETF는 SSL에 대한 업데이트를 제안했고, Netscape가 더 이상 참여하지 않게 되면서, 이름이 TLS로 변경되었다.</li></ul> <h3 id="ssl인증이란"><a href="#ssl인증이란" class="header-anchor">#</a> SSL인증이란?</h3> <p>SSL은 SSL 인증서가 있는 웹사이트만 실행할 수 있다. SSL 인증서는 웹사이트나 애플리케이션 서버가 웹에 저장하고 표시한다.</p> <p>SSL 인증서에 포함된 가장 중요한 정보에 웹사이트의 공개 키가 있다. 이 공개 키 덕북에 암호화가 가능하며, 사용자의 장치는 공개 키를 보고 이를 이용하여 웹 서버와 안전한 암호화 키를 수립한다. 한편, 웹 서버에도 기밀로 유지하는 개인 키가 있다. 개인 키는 공개 키로 암호화된 데이터를 해독한다. CA(인증 기관)는 SSL 인증서 발행을 담당한다.</p> <h3 id="ssl-인증서-유형"><a href="#ssl-인증서-유형" class="header-anchor">#</a> SSL 인증서 유형</h3> <ul><li>단일 도메인</li> <li>와일드카드</li> <li>멀티 도메인</li> <li>도메인 유효성 검사</li> <li>조직 유효성 검사</li> <li>확장 유효성 검사</li></ul> <br> <h2 id="_1110-mapstruct-맵스트럭트"><a href="#_1110-mapstruct-맵스트럭트" class="header-anchor">#</a> 1110 - MapStruct(맵스트럭트)</h2> <p>Model mapping을 아주 쉽게 해주는 라이브러리.</p> <h3 id="맵스트럭트-사용법"><a href="#맵스트럭트-사용법" class="header-anchor">#</a> 맵스트럭트 사용법</h3> <h4 id="build-gradle"><a href="#build-gradle" class="header-anchor">#</a> build.gradle</h4> <div class="language-xml extra-class"><pre class="language-xml"><code>buildscript {
	ext {
		mapstructVersion = '1.3.1.Final'
	}
}

...

// Mapstruct
implementation &quot;org.mapstruct:mapstruct:${mapstructVersion}&quot;
annotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstructVersion}&quot;
testAnnotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstructVersion}&quot;

...

compileJava {
	options.compilerArgs = [
			'-Amapstruct.suppressGeneratorTimestamp=true',
			'-Amapstruct.suppressGeneratorVersionInfoComment=true'
	]
}
</code></pre></div><h4 id="java"><a href="#java" class="header-anchor">#</a> java</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">(</span>staticName <span class="token operator">=</span> <span class="token string">&quot;of&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarDto</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token operator">--</span><span class="token operator">-</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">(</span>staticName <span class="token operator">=</span> <span class="token string">&quot;of&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> modelName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> modelColor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token operator">--</span><span class="token operator">-</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">CarMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CarMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelColor&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>각각 dto, domain, mapper</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapstructTest</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarDto</span> carDto <span class="token operator">=</span> <span class="token class-name">CarDto</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;bmw x4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token class-name">CarMapper</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token function">assertEquals</span><span class="token punctuation">(</span>carDto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> car<span class="token punctuation">.</span><span class="token function">getModelName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span>carDto<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> car<span class="token punctuation">.</span><span class="token function">getModelColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>간단한 테스트 코드</p> <ul><li>실제 생성된 코드</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Generated</span><span class="token punctuation">(</span>
    value <span class="token operator">=</span> <span class="token string">&quot;org.mapstruct.ap.MappingProcessor&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarMapperImpl</span> <span class="token keyword">implements</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> carDto <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        car<span class="token punctuation">.</span><span class="token function">setModelName</span><span class="token punctuation">(</span> carDto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        car<span class="token punctuation">.</span><span class="token function">setModelColor</span><span class="token punctuation">(</span> carDto<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">return</span> car<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="하나의-객체로-합치기"><a href="#하나의-객체로-합치기" class="header-anchor">#</a> 하나의 객체로 합치기</h4> <ul><li>여러 객체의 필드값을 하나의 객체로 합치기가 가능하다. 특별히 다른 옵션을 넣는 것은 아니다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">(</span>staticName <span class="token operator">=</span> <span class="token string">&quot;of&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDto</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">-</span> 

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">(</span>staticName <span class="token operator">=</span> <span class="token string">&quot;of&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddressDto</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> si<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> dong<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token operator">--</span><span class="token operator">-</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserInfoMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">UserInfoMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserInfoMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;user.name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;address.si&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;si&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;address.dong&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;dong&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">UserInfo</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">UserDto</span> user<span class="token punctuation">,</span> <span class="token class-name">AddressDto</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token operator">--</span><span class="token operator">-</span> 

<span class="token annotation punctuation">@Generated</span><span class="token punctuation">(</span>
    value <span class="token operator">=</span> <span class="token string">&quot;org.mapstruct.ap.MappingProcessor&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfoMapperImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserInfoMapper</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">UserDto</span> user<span class="token punctuation">,</span> <span class="token class-name">AddressDto</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> user <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> address <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span> user <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            userInfo<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> address <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            userInfo<span class="token punctuation">.</span><span class="token function">setDong</span><span class="token punctuation">(</span> address<span class="token punctuation">.</span><span class="token function">getDong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            userInfo<span class="token punctuation">.</span><span class="token function">setSi</span><span class="token punctuation">(</span> address<span class="token punctuation">.</span><span class="token function">getSi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token keyword">return</span> userInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="이미-생성된-객체에-매핑"><a href="#이미-생성된-객체에-매핑" class="header-anchor">#</a> 이미 생성된 객체에 매핑</h4> <ul><li>새로운 인스턴스를 생성하는 것이 아니라, 기존에 이미 생성되어 있는 객체에 매핑이 필요한 경우</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserInfoMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">UserInfoMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserInfoMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;user.name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;address.si&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;si&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;address.dong&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;dong&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">UserDto</span> user<span class="token punctuation">,</span> <span class="token class-name">AddressDto</span> address<span class="token punctuation">,</span> <span class="token annotation punctuation">@MappingTarget</span> <span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token annotation punctuation">@Generated</span><span class="token punctuation">(</span>
    value <span class="token operator">=</span> <span class="token string">&quot;org.mapstruct.ap.MappingProcessor&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfoMapperImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserInfoMapper</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">UserDto</span> user<span class="token punctuation">,</span> <span class="token class-name">AddressDto</span> address<span class="token punctuation">,</span> <span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> user <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> address <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span> user <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            userInfo<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> address <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            userInfo<span class="token punctuation">.</span><span class="token function">setDong</span><span class="token punctuation">(</span> address<span class="token punctuation">.</span><span class="token function">getDong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            userInfo<span class="token punctuation">.</span><span class="token function">setSi</span><span class="token punctuation">(</span> address<span class="token punctuation">.</span><span class="token function">getSi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="타입-변환"><a href="#타입-변환" class="header-anchor">#</a> 타입 변환</h4> <ul><li>대부분의 암시적인 자동 형변환이 가능하다. (Integer -&gt; String ...) 다음은 조금 유용한 기능이다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">CarDto</span> <span class="token function">carToCarDto</span><span class="token punctuation">(</span><span class="token class-name">Car</span> car<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@IterableMapping</span><span class="token punctuation">(</span>numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">prices</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> prices<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="source-target-mapping-policy"><a href="#source-target-mapping-policy" class="header-anchor">#</a> Source, Target mapping policy</h4> <ul><li>매핑될 필드가 존재하지 않을 때, 엄격한 정책을 가져가기 위한 기능을 제공한다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">(</span>staticName <span class="token operator">=</span> <span class="token string">&quot;of&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> modelName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> modelColor<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> modelPrice<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">(</span>staticName <span class="token operator">=</span> <span class="token string">&quot;of&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarDto</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> color<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">CarMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CarMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelColor&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelPrice&quot;</span><span class="token punctuation">,</span> numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
</code></pre></div><p>위 코드는 타겟이 되는 오브젝트 필드에 대한 정책을 가져간다. Car 클래스에는 description 필드가 있는데, CarDto 클래스에는 해당 필드가 존재하지 않기 때문에 컴파일시 컴파일에러가 발생한다.(ERROR, IGNORE, WARN 정책 존재) 만약 특정 필드는 해당 정책을 피하고 싶다면 아래와 같이 어노테이션하나를 달아준다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">CarMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CarMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelColor&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelPrice&quot;</span><span class="token punctuation">,</span> numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> ignore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
</code></pre></div><h4 id="null-정책"><a href="#null-정책" class="header-anchor">#</a> null 정책</h4> <ul><li>Source가 null이거나 혹은 Source의 특정 필드가 null일때 적용가능한 정책이 존재한다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>
        unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span>
        nullValueMappingStrategy <span class="token operator">=</span> <span class="token class-name">NullValueMappingStrategy</span><span class="token punctuation">.</span>RETURN_DEFAULT
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">CarMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CarMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelColor&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelPrice&quot;</span><span class="token punctuation">,</span> numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> ignore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
</code></pre></div><p>위 코드는 Source 오브젝트가 null일때, 기본생성자로 필드가 비어있는 Target 오브젝트를 반환해준다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>
        unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span>
        nullValueMappingStrategy <span class="token operator">=</span> <span class="token class-name">NullValueMappingStrategy</span><span class="token punctuation">.</span>RETURN_NULL
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">CarMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CarMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelColor&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelPrice&quot;</span><span class="token punctuation">,</span> numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>
            source <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> 
            target <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> 
            ignore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            nullValuePropertyMappingStrategy <span class="token operator">=</span> <span class="token class-name">NullValuePropertyMappingStrategy</span><span class="token punctuation">.</span>SET_TO_DEFAULT
    <span class="token punctuation">)</span>
    <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
</code></pre></div><p>위 코드는 각 필드에 대해 null정책을 부여한다. 만약 SET_TO_DEFAULT로 설정하면, List 일때는 빈 ArrayList를 생성해주고, String은 빈문자열, 특정 오브젝트라면 해당 오브젝트의 기본 생성자 등으로 기본값을 생성해준다.</p> <h4 id="특정-필드-매핑-무시"><a href="#특정-필드-매핑-무시" class="header-anchor">#</a> 특정 필드 매핑 무시</h4> <ul><li>특정 필드는 매핑되지 않길 원한다면 @Mapping 어노테이션에 ignore = true 속성을 넣어준다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>
        unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span>
        nullValueMappingStrategy <span class="token operator">=</span> <span class="token class-name">NullValueMappingStrategy</span><span class="token punctuation">.</span>RETURN_NULL
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token class-name">CarMapper</span> INSTANCE <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CarMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelColor&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelPrice&quot;</span><span class="token punctuation">,</span> numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> ignore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapstructTest</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarDto</span> carDto <span class="token operator">=</span> <span class="token class-name">CarDto</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
                <span class="token string">&quot;bmw x4&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>
                <span class="token number">10000</span><span class="token punctuation">,</span>
                <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token class-name">CarMapper</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>car<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
result <span class="token operator">=</span><span class="token operator">&gt;</span>
 
<span class="token class-name">Car</span><span class="token punctuation">(</span>modelName<span class="token operator">=</span>bmw x4<span class="token punctuation">,</span> modelColor<span class="token operator">=</span>black<span class="token punctuation">,</span> modelPrice<span class="token operator">=</span>$<span class="token number">10000.00</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="매핑-전처리-후처리"><a href="#매핑-전처리-후처리" class="header-anchor">#</a> 매핑 전처리, 후처리</h4> <ul><li>매핑하기 이전과 매핑 이후 특정 로직을 주입시킬 수 있다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>
        unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span>
        nullValueMappingStrategy <span class="token operator">=</span> <span class="token class-name">NullValueMappingStrategy</span><span class="token punctuation">.</span>RETURN_NULL<span class="token punctuation">,</span>
        componentModel <span class="token operator">=</span> <span class="token string">&quot;spring&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@BeforeMapping</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">,</span> <span class="token annotation punctuation">@MappingTarget</span> <span class="token class-name">Car</span> car<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>carDto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;bmw x4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            car<span class="token punctuation">.</span><span class="token function">setModelColor</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            car<span class="token punctuation">.</span><span class="token function">setModelColor</span><span class="token punctuation">(</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
    <span class="token punctuation">}</span>
 
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;modelColor&quot;</span><span class="token punctuation">,</span> ignore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token string">&quot;modelPrice&quot;</span><span class="token punctuation">,</span> numberFormat <span class="token operator">=</span> <span class="token string">&quot;$#.00&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@AfterMapping</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MappingTarget</span> <span class="token class-name">Car</span> car<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        car<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span>car<span class="token punctuation">.</span><span class="token function">getModelName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> car<span class="token punctuation">.</span><span class="token function">getModelColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Generate</span> <span class="token class-name">Code</span><span class="token punctuation">&gt;</span></span>
 
<span class="token annotation punctuation">@Generated</span><span class="token punctuation">(</span>
    value <span class="token operator">=</span> <span class="token string">&quot;org.mapstruct.ap.MappingProcessor&quot;</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarMapperImpl</span> <span class="token keyword">extends</span> <span class="token class-name">CarMapper</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CarDto</span> carDto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> carDto <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token function">setColor</span><span class="token punctuation">(</span> carDto<span class="token punctuation">,</span> car <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        car<span class="token punctuation">.</span><span class="token function">setModelName</span><span class="token punctuation">(</span> carDto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> carDto<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            car<span class="token punctuation">.</span><span class="token function">setModelPrice</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">DecimalFormat</span><span class="token punctuation">(</span> <span class="token string">&quot;$#.00&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span> carDto<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        car<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span> carDto<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token function">setDescription</span><span class="token punctuation">(</span> car <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">return</span> car<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>전처리와 후처리를 위한 메서드는 private를 사용해서는 안된다. 그 이유는 generate된 코드에 전, 후 처리 메서드가 들어가는 것이 아니라 추상 클래스에 있는 메서드를 그대로 사용하기 때문이다.</p> <ul><li>공식 레퍼런스
https://mapstruct.org/documentation/stable/reference/html/</li></ul> <br> <h2 id="_1112-custom-exception-장단점"><a href="#_1112-custom-exception-장단점" class="header-anchor">#</a> 1112 - custom exception 장단점</h2> <h3 id="표준-예외-사용시-장점"><a href="#표준-예외-사용시-장점" class="header-anchor">#</a> 표준 예외 사용시 장점</h3> <ol><li>예외 메시지로도 충분히 의미를 전달할 수 있다.</li></ol> <ul><li>유효하지 않은 입력값에 대한 예외 같은 경우 자바에서 정의해 놓은 IllegalArgumentException을 사용하고 메시지만 예외사항에 맞게 재정의해준다면 충분히 그 의미를 파악할 수 있다.</li></ul> <ol start="2"><li>표준 예외를 사용하면 가독성이 높아진다.</li></ol> <ul><li>인수로 부적절한 값이 들어올 때 던지는 예외인 IllegalArgumentException, 일을 수행하기에 적합하지 않은 상태의 객체인 경우 던지는 예외인 IllegalStateException, 요청받은 작업을 지원하지 않는 경우에 던지는 예외인 UnsupportedOperationException 등, 우리는 이미 익숙하고, 쓰임에 대해 잘 알고있는 예외들이 많다.<br>
이런 예외들이 아닌 처음 보는 예외들은 당연히 구체적인 쓰임을 잘 모른다. 이런 이유로 낯선 예외보다는 익숙한 예외를 마주치는 것이 당연히 가동성이 높을 수 밖에 없다.<br>
또한, 낯선 예외를 만났을 땐, 당연하게도 그 커스텀 익셉션을 파악하는 작업이 따라온다. 이 또한 비용이 될 수 있다.<br>
표준 예외에 대한 쓰임은 공식문서를 참고하면 된다.
https://docs.oracle.com/javase/8/docs/api/?java/lang/RuntimeException.html</li></ul> <ol start="3"><li>일일히 예외 클래스를 만들다보면 지나치게 커스텀 예외가 많아질 수 있다.</li></ol> <ul><li>많은 domain이 생기고 도메인 별 정의된 custom Exception들이 생길 경우 지나치게 많아질 수 있다. 이 디렉토리와 클래스를 관리하는 것 역시 일이며, 지나치게 많아진다면 메모리 문제도 발생할 수 있고, 클래스 로딩에도 시간이 더 소요될 가능성이 있다.</li></ul> <h3 id="커스텀-예외-사용시-장점"><a href="#커스텀-예외-사용시-장점" class="header-anchor">#</a> 커스텀 예외 사용시 장점</h3> <p>사용자 정의 예외가 필요하다.</p> <ul><li>Spring의 @Valid 어노테이션은 예외 상황에서 MethodArgumentNotValidException을 발생시킨다. 해당 예외의 패키지 구조는 org.springframework.web.bind.MethodArgumentNotValidException 으로 Spring에서 만든 사용자 정의 예외다.</li></ul> <ol><li>이름으로도 정보 전달이 가능하다.</li></ol> <ul><li>NoSuchElementException 만으로는 어떤 요소가 없는지 알 수 없다. 하지만, PostNotFoundException이 발생했따면, Post를 찾는 요청을 보냈지만 해당 요소가 없다는 상황을 유추할 수 있을 것이다.<br>
이처럼 Custom Exception은 이름을 통해 일차적으로 예외 발생 상황에 대해 유추할 수 있는 정보를 제공한다.</li></ul> <ol start="2"><li>상세한 예외 정보를 제공할 수 있다.</li></ol> <ul><li>컬렉션의 범위를 벗어난 index 접근 요청이 생겼다고 가정했을때, 기존의 예외에선 IllegalArgumentException이나 IndexOutOfBoundsException을 후보로 생각해볼 수 있을 것이다. 예외 메시지로는 &quot;범위를 벗어났습니다.&quot; 정도면 적당하다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token string">&quot;범위를 벗어났습니다.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>하지만 전체 범위가 얼마인지, 요청한 index가 몇인지 파악하기 우해서는 프로그래머가 직접 디버깅하거나 정보를 담은 메시지를 만들어줘야 한다. 디버그르류 통해 직접 정보를 찾아내는 행위는 썩 좋은 일이 아니다. 개발 과정에 피로함만 늘어간다. 메시지는 단 한 곳에서만 발생하는 예외라면 상관없지만 여러 곳에서 발생한다면 리팩토링하기가 힘들어 질 것이다.<br>
이러한 상황에서 사용자 정의 예외는 좋은 해결책이 될 수 있다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IllegalIndexException</span> <span class="token keyword">extends</span> <span class="token class-name">IndexOutOfBoundsException</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">&quot;범위를 벗어났습니다.&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">IllegalIndexException</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> target<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>message <span class="token operator">+</span> <span class="token string">&quot; size: &quot;</span>  <span class="token operator">+</span> target<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; index: &quot;</span> <span class="token operator">+</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>예를 보면 요청 받은 컬렉션의 최대 범위가 어디까지인지, 요청한 index는 몇인지 확인 가능하다. try/catch를 통해 발생한 예외를 붙잡아 새로 만든 예외를 던져도 되고, 기존 예외가 발생하기 전에 index를 검사해 새로 맏는 예외를 직접 발생시켜도 괜찮다.<br>
전달하는 정보의 수정이 필요할 때는 IllegalIndexException 클래스를 수정하면 된다. 같은 예외를 발생시키는 모든 상황에 적용될 것이다.</li></ul> <ol start="3"><li>예외에 대한 응집도가 향상된다.</li></ol> <ul><li>클래스를 만드는 행위는 관련 정보를 해당 클래스에서 최대한 관리하겠다는 이야기다.<br>
표준예외와 메시지로도 충분히 정보를 전달할 수 있지만, 전달하는 정보의 양이 많아지거나 여러곳에서 발생하는 예외라면 책임소재가 불분명해진다.<br>
사실 정적 메소드를 담은 유틸성 클래스로도 충분히 표준 예외를 사용하면서 이문제를 해결할 수 도 있지만 사용자 정의 예외를 사용한다면 객체의 책임이 분리된 깔끔한 코드를 얻을 수 있다.</li></ul> <ol start="4"><li>예외 발생 후처리가 용이하다.</li></ol> <ul><li>예외는 상속 관계에 있기 때문에, Exception이나 RuntimeException을 잡아두면 프로그램 내에서 발생하는 거의 모든 예외에 대해 처리가 가능하다. 하지만 이는 프로그래머가 의도하지 않은 예외까지 모두 잡아내 혼란을 야기할 수 있다.<br>
재사용성이 높은 것은 표준 예외들의 장점이다. 하지만 그 장점 때문에 발생 위치를 정확하게 파악하기 힘들다는 단점도 생긴다.</li></ul> <ol start="5"><li>예외 생성 비용을 절감한다.</li></ol> <ul><li>자바에서 예외를 생성하는 행위는 생각보다 많은 비용이 소모된다. 바로 stack trace 때문이다.<br>
stack trace는 예외 발생 시 call stack에 있는 메소드 리스트를 저장한다. 이를 통해 예외가 발생한 정확한 위치를 파악할 수 있다. 하지만 try/catch나 Advice를 통해 예외를 처리한다면 해다 예외의 stack trace는 사용하지 않을 때가 많다. 비용을 들여 만들었다지만 사용하지 않고 사라지는 형태, 너무나도 비요율적이다.</li></ul> <p>stack trace의 생성은 예외의 부모 클래스 중 Throwable의 fillInStackTrace() 메소드를 통해 이루어진다. 사용자 정의 예외는 해당 메소드를 Override 함으로 stack trace의 생성 비용을 줄일 수 있다. 필요하다면 짧게 일부만을 생성할 수도, 아예 생성하지 않을 수도 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token class-name">Throwable</span> <span class="token function">fillInStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">{</span>
	  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">CustomException</span> CUSTOM_EXCEPTION <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomException</span><span class="token punctuation">(</span><span class="token string">&quot;대충 예외라는 내용&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>만일 구현해 낸 Custom Exception이 stack trace도 갖지 않고, 상황에 따라 정보를 다르게 주는 예외가 아니라 단순하게 메세지만 넘겨준다면 해당 예외를 캐싱해 두는 것도 비용 절감의 방법이다.</li></ul> <br> <h2 id="_1113-임베디드-타입-embedded-type"><a href="#_1113-임베디드-타입-embedded-type" class="header-anchor">#</a> 1113 - 임베디드 타입(embedded type)</h2> <h3 id="임베디드-타입-복합-값-타입"><a href="#임베디드-타입-복합-값-타입" class="header-anchor">#</a> 임베디드 타입(복합 값 타입)</h3> <p>새로운 값 타입을 직접 정의해서 사용할 수 있따. JPA에서는 이것을 임베디드 타입(embedded type)이라 한다. 중요한 것은 직접 정의한 임베디드 타입도 int, String 처럼 값 타입이다.</p> <h4 id="예제"><a href="#예제" class="header-anchor">#</a> 예제</h4> <ul><li>임베디드 타입을 사용하지 않았을 때</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedValue</span>
  <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  
  <span class="token comment">// 근무 기간</span>
  <span class="token annotation punctuation">@Temporal</span><span class="token punctuation">(</span><span class="token class-name">TemporalType</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span>
  <span class="token class-name">Date</span> startDate<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Temporal</span><span class="token punctuation">(</span><span class="token class-name">TemporalType</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span>
  <span class="token class-name">Date</span> endDate<span class="token punctuation">;</span>
  
  <span class="token comment">// 집 주소 표현</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> street<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> zipcode<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>임베디드 타입 사용</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedVAlue</span>
  <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token keyword">private</span> <span class="token class-name">Period</span> workPeriod<span class="token punctuation">;</span>	<span class="token comment">// 근무 기간</span>
  
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token keyword">private</span> <span class="token class-name">Address</span> homeAddress<span class="token punctuation">;</span>	<span class="token comment">// 집 주소</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">-</span>

<span class="token annotation punctuation">@Embeddable</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Peroid</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Temporal</span><span class="token punctuation">(</span><span class="token class-name">TemporalType</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span>
  <span class="token class-name">Date</span> startDate<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Temporal</span><span class="token punctuation">(</span><span class="token class-name">TemporalType</span><span class="token operator">/</span><span class="token class-name">Date</span><span class="token punctuation">)</span>
  <span class="token class-name">Date</span> endDate<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> isWork <span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// .. 값 타입을 위한 메서드를 정의할 수 있다</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">-</span>

<span class="token annotation punctuation">@Embeddable</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 매핑할 컬럼 정의 가능</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> street<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> zipcode<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="임베디드-타입-사용-방법"><a href="#임베디드-타입-사용-방법" class="header-anchor">#</a> 임베디드 타입 사용 방법</h3> <ul><li>@Embeddable : 값 타입을 정의하는 곳에 표시</li> <li>@Embedded : 값 타입을 사용하는 곳에 표시</li> <li><code>임베디드 타입은 기본 생성자가 필수</code></li></ul> <p>임베디드 타입을 포함한 모든 값 타입은 엔티티의 생명주기에 의존하므로 엔티티와 임베디드 타입 관계를 UML로 표현 하면 컴포지션(composition) 관계가 된다.</p> <blockquote><p>하이버네이트는 임베디드 타입을 컴포넌트(components)라 한다.</p></blockquote> <p><img src="https://media.vlpt.us/post-images/conatuseus/8c9227f0-1a86-11ea-81c4-6f5e57ac36c2/image.png" alt="uml">
&lt;회원-컴포지션 관계 UML (출처: 김영한님 강의)&gt;</p> <h3 id="임베디드-타입의-장점"><a href="#임베디드-타입의-장점" class="header-anchor">#</a> 임베디드 타입의 장점</h3> <ul><li>재사용</li> <li>높은 응집도</li> <li>Period 객체의 isWork() 메서드처럼 해당 값 타입만 사용하는 의미있는 메서드를 만들 수 있다.</li></ul> <h3 id="임베디드-타입과-테이블-매핑"><a href="#임베디드-타입과-테이블-매핑" class="header-anchor">#</a> 임베디드 타입과 테이블 매핑</h3> <p><img src="https://media.vlpt.us/post-images/conatuseus/a7d7d0a0-1a86-11ea-bdac-0d8b2621ee12/image.png" alt="uml2">
&lt;임베디드 타입을 사용한 회원-테이블 매핑 (출처: 김영한님 강의)&gt;</p> <p>임베디드 타입은 엔티티의 값일 뿐이다. 따라서 값이 속한 엔티티의 테이블에 매핑되며, 임베디드 타입을 사용하기 전과 후에 매핑되는 테이블은 동일하다.</p> <p>임베디드 타입 덕분에 객체와 테이블을 아주 세밀하게(fine-grained) 매핑하는 것이 가능하다. 잘 설계한 ORM 애플리케이션은 매핑한 테이블의 수보다 클래스의 수가 더 많다.</p> <h3 id="임베디드-타입과-연관관계"><a href="#임베디드-타입과-연관관계" class="header-anchor">#</a> 임베디드 타입과 연관관계</h3> <p>임베디드 타입은 값 타입을 포함하거나 엔티티를 참조할 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token class-name">Address</span> address<span class="token punctuation">;</span>	<span class="token comment">// 임베디드 타입 포함</span>
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token class-name">PhoneNumber</span> phoneNumber<span class="token punctuation">;</span>	<span class="token comment">// 임베디드 타입 포함</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@Embeddable</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> street<span class="token punctuation">;</span>
  <span class="token class-name">String</span> city<span class="token punctuation">;</span>
  <span class="token class-name">String</span> state<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token class-name">Zipcode</span> zipcode<span class="token punctuation">;</span> <span class="token comment">// 임베디드 타입 포함</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@Embeddable</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Zipcode</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> zip<span class="token punctuation">;</span>
  <span class="token class-name">String</span> plusFour<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@Embeddable</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneNumber</span> <span class="token punctuation">{</span>
 
  <span class="token class-name">String</span> areaCode<span class="token punctuation">;</span>
  <span class="token class-name">String</span> localNumber<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@ManyToOne</span>
  <span class="token class-name">PhoneServiceProvider</span> provider<span class="token punctuation">;</span>	<span class="token comment">// 엔티티 참조</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneServiceProvider</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Id</span>
  <span class="token class-name">String</span> name<span class="token punctuation">;</span>
 	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>값 타입인 Address가 값 타입인 Zipcode를 포함하고, 값 타입인 PhoneNumber가 엔티티 타입인 PhoneServiceProvider를 참조한다.</p> <h3 id="attributeoverride-속성-재정의"><a href="#attributeoverride-속성-재정의" class="header-anchor">#</a> @AttributeOverride: 속성 재정의</h3> <p>임베디드 타입에 정의한 매핑정보를 재정의하려면 엔티티에 @AttributeOverride를 사용하면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 같은 임베디드 타입을 가지고 있는 회원</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedValue</span>
  <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token class-name">Address</span> homeAddress<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token class-name">Address</span> companyAddress<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>위 코드의 문제점은 테이블에 매핑하는 컬럼명이 중복된다. 이떄는 아래와 같이 @AttributeOberrides를 사용해서 매핑정보를 재정의해야 한다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedValue</span>
  <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token class-name">Address</span> homeAddress<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Embedded</span>
  <span class="token annotation punctuation">@AttributeOverrides</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@AttributeOverride</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;COMPANY_CITY&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@AttributeOverride</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;street&quot;</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;COMPANY_STREET&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@AttributeOverride</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;zipcode&quot;</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;COMPANY_ZIPCODE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">Address</span> companyAddress<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 생성된 테이블</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
CREATE <span class="token class-name">TABLE</span> MEMBER <span class="token punctuation">(</span>
	<span class="token class-name">COMPANY_CITY</span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token class-name">COMPANY_STREET</span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token class-name">COMPANY_ZIPCODE</span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  city <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  street <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  zipcode <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
</code></pre></div><p>@AttributeOverrides는 엔티티에 설정해야 한다. 임베디드 타입이 임베디드 타입을 가지고 있어도 엔티티에 설정해야 한다.</p> <h3 id="임베디드-타입과-null"><a href="#임베디드-타입과-null" class="header-anchor">#</a> 임베디드 타입과 Null</h3> <p>임베디드 타입이 null이면 매핑한 컬럼 값은 모두 null이 된다.</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">September 13, 2022 21:44</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: jaesungahn91@gmail.com" class="contributor">
          ahnjs
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/TIL/2021/1101/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        1101 - 1107
      </a></span> <span class="next"><a href="/TIL/2021/1115/">
        1115 - 1124
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/TIL/assets/js/app.5fb46d7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" defer></script><script src="/TIL/assets/js/page-1108-1114.14c10b7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" defer></script>
  </body>
</html>
