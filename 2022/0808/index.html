<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>0808 ~ 0814 | ahnjs TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Today I Learned">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.c9ce91a1.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5fb46d7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" as="script"><link rel="preload" href="/TIL/assets/js/page-0808~0814.d656f648.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" as="script"><link rel="prefetch" href="/TIL/assets/js/103.8c089b22.js"><link rel="prefetch" href="/TIL/assets/js/104.119134a5.js"><link rel="prefetch" href="/TIL/assets/js/layout-Blog.a086a7ca.js"><link rel="prefetch" href="/TIL/assets/js/layout-Layout.0945805f.js"><link rel="prefetch" href="/TIL/assets/js/layout-NotFound.9e898f41.js"><link rel="prefetch" href="/TIL/assets/js/layout-Slide.f940a7a7.js"><link rel="prefetch" href="/TIL/assets/js/page-0102-0109.d861648d.js"><link rel="prefetch" href="/TIL/assets/js/page-0102~0108.3f3ff8b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0109~0115.4c6b192d.js"><link rel="prefetch" href="/TIL/assets/js/page-0110-0116.feb84c5b.js"><link rel="prefetch" href="/TIL/assets/js/page-0116~0129.d55b06ca.js"><link rel="prefetch" href="/TIL/assets/js/page-0117-0123.7a6dce2f.js"><link rel="prefetch" href="/TIL/assets/js/page-0124-0206.ee32f254.js"><link rel="prefetch" href="/TIL/assets/js/page-0130~0205.df7a6a64.js"><link rel="prefetch" href="/TIL/assets/js/page-0206~0226.5da382f5.js"><link rel="prefetch" href="/TIL/assets/js/page-0211-0220.cd9bd482.js"><link rel="prefetch" href="/TIL/assets/js/page-0217-0221.1ed564ea.js"><link rel="prefetch" href="/TIL/assets/js/page-0221-0227.40b291d8.js"><link rel="prefetch" href="/TIL/assets/js/page-0222-0229.c4aa2b4d.js"><link rel="prefetch" href="/TIL/assets/js/page-0227~0305.164780e1.js"><link rel="prefetch" href="/TIL/assets/js/page-0228-0313.960c5eb2.js"><link rel="prefetch" href="/TIL/assets/js/page-0301-0307.8a2dd769.js"><link rel="prefetch" href="/TIL/assets/js/page-0306~0319.d7e1dd39.js"><link rel="prefetch" href="/TIL/assets/js/page-0308-0314.95d08be9.js"><link rel="prefetch" href="/TIL/assets/js/page-0314-0320.a482c7e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0315-0321.0bf22c5a.js"><link rel="prefetch" href="/TIL/assets/js/page-0320~0402.dc9cbbee.js"><link rel="prefetch" href="/TIL/assets/js/page-0321-0328.536bc991.js"><link rel="prefetch" href="/TIL/assets/js/page-0322-0328.5002c0f8.js"><link rel="prefetch" href="/TIL/assets/js/page-0329-0404.c6f98895.js"><link rel="prefetch" href="/TIL/assets/js/page-0329~0403.5b50aeae.js"><link rel="prefetch" href="/TIL/assets/js/page-0403~0423.db8f2eb4.js"><link rel="prefetch" href="/TIL/assets/js/page-0404~0410.6dd2170c.js"><link rel="prefetch" href="/TIL/assets/js/page-0405-0411.dfef4290.js"><link rel="prefetch" href="/TIL/assets/js/page-0411~0417.31e79aa4.js"><link rel="prefetch" href="/TIL/assets/js/page-0412-0418.aab597de.js"><link rel="prefetch" href="/TIL/assets/js/page-0418~0424.acb47103.js"><link rel="prefetch" href="/TIL/assets/js/page-0419-0425.bc1c1f3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0425~0501.63985992.js"><link rel="prefetch" href="/TIL/assets/js/page-0426-0502.d7a75a07.js"><link rel="prefetch" href="/TIL/assets/js/page-0502~0515.21ce942d.js"><link rel="prefetch" href="/TIL/assets/js/page-0503-0509.fb0660a5.js"><link rel="prefetch" href="/TIL/assets/js/page-0510-0516.00f7a787.js"><link rel="prefetch" href="/TIL/assets/js/page-0516~0529.c375a6ba.js"><link rel="prefetch" href="/TIL/assets/js/page-0517-0523.b1aa4a22.js"><link rel="prefetch" href="/TIL/assets/js/page-0523~0605.6e7cab56.js"><link rel="prefetch" href="/TIL/assets/js/page-0524-0530.8c92fe4f.js"><link rel="prefetch" href="/TIL/assets/js/page-0531-0606.e40cfd3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0606~0619.b2a4a63a.js"><link rel="prefetch" href="/TIL/assets/js/page-0607-0613.b7eaa930.js"><link rel="prefetch" href="/TIL/assets/js/page-0612.6d4d2838.js"><link rel="prefetch" href="/TIL/assets/js/page-0613.dfd2eb79.js"><link rel="prefetch" href="/TIL/assets/js/page-0614-0620.8c3b6db2.js"><link rel="prefetch" href="/TIL/assets/js/page-0614.c29fe08f.js"><link rel="prefetch" href="/TIL/assets/js/page-0621-0627.8b7cfba5.js"><link rel="prefetch" href="/TIL/assets/js/page-0627~0703.32c82c88.js"><link rel="prefetch" href="/TIL/assets/js/page-0628-0704.a12f4dd5.js"><link rel="prefetch" href="/TIL/assets/js/page-0705-0808.84dfa0c2.js"><link rel="prefetch" href="/TIL/assets/js/page-0711~0717.c1d09532.js"><link rel="prefetch" href="/TIL/assets/js/page-0718~0724.28a7589f.js"><link rel="prefetch" href="/TIL/assets/js/page-0725~0807.ef50582d.js"><link rel="prefetch" href="/TIL/assets/js/page-0807~0902.96994631.js"><link rel="prefetch" href="/TIL/assets/js/page-0809-0815.348cc1c5.js"><link rel="prefetch" href="/TIL/assets/js/page-0815~0824.df5c5da0.js"><link rel="prefetch" href="/TIL/assets/js/page-0816-0822.87a87566.js"><link rel="prefetch" href="/TIL/assets/js/page-0822~0911.4867b37a.js"><link rel="prefetch" href="/TIL/assets/js/page-0823-0829.8bcfd48b.js"><link rel="prefetch" href="/TIL/assets/js/page-0830-0905.8b54a9e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0903~0910.f917d595.js"><link rel="prefetch" href="/TIL/assets/js/page-0906-0919.a1897d51.js"><link rel="prefetch" href="/TIL/assets/js/page-0911~0918.7dfbe6de.js"><link rel="prefetch" href="/TIL/assets/js/page-0912~0918.274ce7a6.js"><link rel="prefetch" href="/TIL/assets/js/page-0919~0925.e25dd9ff.js"><link rel="prefetch" href="/TIL/assets/js/page-0920-0926.22e5547a.js"><link rel="prefetch" href="/TIL/assets/js/page-0926~1002.d97a33b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0927-1003.cd544f10.js"><link rel="prefetch" href="/TIL/assets/js/page-1003~1009.b12a6f87.js"><link rel="prefetch" href="/TIL/assets/js/page-1004-1010.92ee8f8e.js"><link rel="prefetch" href="/TIL/assets/js/page-1010~1016.00b69211.js"><link rel="prefetch" href="/TIL/assets/js/page-1011-1017.c314b6aa.js"><link rel="prefetch" href="/TIL/assets/js/page-1017~1030.03e8572f.js"><link rel="prefetch" href="/TIL/assets/js/page-1018-1024.35384747.js"><link rel="prefetch" href="/TIL/assets/js/page-1025-1031.e5a2aad2.js"><link rel="prefetch" href="/TIL/assets/js/page-1031~1113.813912c9.js"><link rel="prefetch" href="/TIL/assets/js/page-1101-1107.e08121f1.js"><link rel="prefetch" href="/TIL/assets/js/page-1108-1114.14c10b7a.js"><link rel="prefetch" href="/TIL/assets/js/page-1113~1109.6ffeae7e.js"><link rel="prefetch" href="/TIL/assets/js/page-1114~1127.edbc49cd.js"><link rel="prefetch" href="/TIL/assets/js/page-1115-1124.248147ec.js"><link rel="prefetch" href="/TIL/assets/js/page-1122-1128.de82e713.js"><link rel="prefetch" href="/TIL/assets/js/page-1128~1211.ca0d6242.js"><link rel="prefetch" href="/TIL/assets/js/page-1129-1205.57233094.js"><link rel="prefetch" href="/TIL/assets/js/page-1204~1217.bfef77e0.js"><link rel="prefetch" href="/TIL/assets/js/page-1206-1212.100e1893.js"><link rel="prefetch" href="/TIL/assets/js/page-1212~0101.031e14d3.js"><link rel="prefetch" href="/TIL/assets/js/page-1213-1219.0e09712c.js"><link rel="prefetch" href="/TIL/assets/js/page-1220-1226.4cb62ec6.js"><link rel="prefetch" href="/TIL/assets/js/page-📖TodayILearned.7bda0772.js"><link rel="prefetch" href="/TIL/assets/js/vendors~photo-swipe.7980dd4b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.c9ce91a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/TIL/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">ahnjs TIL</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2023</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">2022</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2022/0102/" class="sidebar-link">0102 - 0109</a></li><li><a href="/TIL/2022/0110/" class="sidebar-link">0110 - 0116</a></li><li><a href="/TIL/2022/0117/" class="sidebar-link">0117 - 0123</a></li><li><a href="/TIL/2022/0124/" class="sidebar-link">0124 - 0206</a></li><li><a href="/TIL/2022/0211/" class="sidebar-link">0211 - 0220</a></li><li><a href="/TIL/2022/0221/" class="sidebar-link">0221 - 0227</a></li><li><a href="/TIL/2022/0228/" class="sidebar-link">0228 - 0313</a></li><li><a href="/TIL/2022/0314/" class="sidebar-link">0314 - 0320</a></li><li><a href="/TIL/2022/0321/" class="sidebar-link">0321 - 0328</a></li><li><a href="/TIL/2022/0328/" class="sidebar-link">0329 ~ 0403</a></li><li><a href="/TIL/2022/0404/" class="sidebar-link">0404 ~ 0410</a></li><li><a href="/TIL/2022/0411/" class="sidebar-link">0411 ~ 0417</a></li><li><a href="/TIL/2022/0418/" class="sidebar-link">0418 ~ 0424</a></li><li><a href="/TIL/2022/0425/" class="sidebar-link">0425 ~ 0501</a></li><li><a href="/TIL/2022/0502/" class="sidebar-link">0502 ~ 0515</a></li><li><a href="/TIL/2022/0516/" class="sidebar-link">0516 ~ 0529</a></li><li><a href="/TIL/2022/0523/" class="sidebar-link">0523 ~ 0605</a></li><li><a href="/TIL/2022/0606/" class="sidebar-link">0606 ~ 0619</a></li><li><a href="/TIL/2022/0627/" class="sidebar-link">0627 ~ 0703</a></li><li><a href="/TIL/2022/0711/" class="sidebar-link">0711 ~ 0717</a></li><li><a href="/TIL/2022/0718/" class="sidebar-link">0718 ~ 0724</a></li><li><a href="/TIL/2022/0725/" class="sidebar-link">0725 ~ 0807</a></li><li><a href="/TIL/2022/0808/" aria-current="page" class="active sidebar-link">0808 ~ 0814</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#_0808-procedure와-function-차이" class="sidebar-link">0808 - Procedure와 Function 차이</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#procedure-프로시저란" class="sidebar-link heading3">[ Procedure 프로시저란? ]</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#function-함수란" class="sidebar-link heading3">[ Function 함수란? ]</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#함수와-프로시저의-차이" class="sidebar-link heading3">[ 함수와 프로시저의 차이 ]</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#_0809-feign-client" class="sidebar-link">0809 - Feign Client</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#feign-기본-사용법" class="sidebar-link heading3">Feign 기본 사용법</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#_0811-jenkins-pipeline" class="sidebar-link">0811 - jenkins pipeline</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#_0813-git-submodule" class="sidebar-link">0813 - Git Submodule</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#git-submodule이란" class="sidebar-link heading3">[ Git Submodule이란 ]</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#git-submodule-사용방법" class="sidebar-link heading3">[ Git Submodule 사용방법 ]</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#_0814-애노테이션-프로세서-annotation-processor" class="sidebar-link">0814 - 애노테이션 프로세서(Annotation Processor)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#annotation-processor란" class="sidebar-link heading3">Annotation Processor란?</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#lombok과-annotation-processor" class="sidebar-link heading3">Lombok과 Annotation Processor</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0808/#작동원리" class="sidebar-link heading3">작동원리</a></li></ul></li></ul></li><li><a href="/TIL/2022/0815/" class="sidebar-link">0815 ~ 0824</a></li><li><a href="/TIL/2022/0822/" class="sidebar-link">0822 ~ 0911</a></li><li><a href="/TIL/2022/0912/" class="sidebar-link">0912 ~ 0918</a></li><li><a href="/TIL/2022/0919/" class="sidebar-link">0919 ~ 0925</a></li><li><a href="/TIL/2022/0926/" class="sidebar-link">0926 ~ 1002</a></li><li><a href="/TIL/2022/1003/" class="sidebar-link">1003 ~ 1009</a></li><li><a href="/TIL/2022/1010/" class="sidebar-link">1010 ~ 1016</a></li><li><a href="/TIL/2022/1017/" class="sidebar-link">1017 ~ 1030</a></li><li><a href="/TIL/2022/1031/" class="sidebar-link">1031 ~ 1113</a></li><li><a href="/TIL/2022/1114/" class="sidebar-link">1114 ~ 1127</a></li><li><a href="/TIL/2022/1128/" class="sidebar-link">1128 ~ 1211</a></li><li><a href="/TIL/2022/1212/" class="sidebar-link">1212 ~ 0101</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2021</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">0808 ~ 0814</span></h1> <div class="page-info"><!----> </div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/TIL/2022/0808/#_0808-procedure와-function-차이" class="anchor-link heading2"><div>0808 - Procedure와 Function 차이</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#procedure-프로시저란" class="anchor-link heading3"><div>[ Procedure 프로시저란? ]</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#function-함수란" class="anchor-link heading3"><div>[ Function 함수란? ]</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#함수와-프로시저의-차이" class="anchor-link heading3"><div>[ 함수와 프로시저의 차이 ]</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#_0809-feign-client" class="anchor-link heading2"><div>0809 - Feign Client</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#feign-기본-사용법" class="anchor-link heading3"><div>Feign 기본 사용법</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#_0811-jenkins-pipeline" class="anchor-link heading2"><div>0811 - jenkins pipeline</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#_0813-git-submodule" class="anchor-link heading2"><div>0813 - Git Submodule</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#git-submodule이란" class="anchor-link heading3"><div>[ Git Submodule이란 ]</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#git-submodule-사용방법" class="anchor-link heading3"><div>[ Git Submodule 사용방법 ]</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#_0814-애노테이션-프로세서-annotation-processor" class="anchor-link heading2"><div>0814 - 애노테이션 프로세서(Annotation Processor)</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#annotation-processor란" class="anchor-link heading3"><div>Annotation Processor란?</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#lombok과-annotation-processor" class="anchor-link heading3"><div>Lombok과 Annotation Processor</div></a></li><li class="anchor"><a href="/TIL/2022/0808/#작동원리" class="anchor-link heading3"><div>작동원리</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="_0808-0814"><a href="#_0808-0814" class="header-anchor">#</a> 0808 ~ 0814</h1> <h2 id="_0808-procedure와-function-차이"><a href="#_0808-procedure와-function-차이" class="header-anchor">#</a> 0808 - Procedure와 Function 차이</h2> <h3 id="procedure-프로시저란"><a href="#procedure-프로시저란" class="header-anchor">#</a> [ Procedure 프로시저란? ]</h3> <blockquote><p>데이터베이스에 대한 일련의 작업을 정리한 절차를 관계형 데이터베이스 관리 시스템에 저장한 것으로 영구저장모듈(Persistent Storage Module)이라고 불린다.<br>
일련의 쿼리를 마치 하나의 함수처럼 실행하기 위한 쿼리의 집합이다.<br>
즉, 하나의 작업을 수행하기 위한 쿼리의 모음이다.</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CALL</span> 프로시저명<span class="token punctuation">(</span><span class="token operator">IN</span>파라미터명<span class="token punctuation">,</span> <span class="token variable">@OUT</span>파라미터명<span class="token punctuation">)</span>
<span class="token keyword">EXECUTE</span> 프로시저명<span class="token punctuation">(</span><span class="token operator">IN</span>파라미터명<span class="token punctuation">,</span> <span class="token variable">@OUT</span>파라미터명<span class="token punctuation">)</span>

<span class="token comment">---</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> 프로시져이름 <span class="token punctuation">(</span>파라미터<span class="token number">1</span><span class="token punctuation">,</span>파라미터<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">IS</span>
변수

<span class="token keyword">BEGIN</span>

쿼리문

<span class="token keyword">END</span> 프로시져 이름<span class="token punctuation">;</span>

<span class="token comment">---</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> GET_TIER<span class="token punctuation">(</span>in_name <span class="token operator">IN</span> VARCHAR2<span class="token punctuation">,</span>out_tier <span class="token keyword">OUT</span> VARCHAR2<span class="token punctuation">)</span>

<span class="token operator">IS</span>

<span class="token keyword">BEGIN</span>
	
    <span class="token keyword">SELECT</span> TIER <span class="token keyword">INTO</span> out_tier <span class="token keyword">FROM</span> SUMMONER_TB <span class="token keyword">WHERE</span> NAME <span class="token operator">=</span> in_name<span class="token punctuation">;</span>

EXCEPTION
  <span class="token comment">--소환사를 찾을 수 없을 때</span>
  WEHN NO_DATA_FOUND <span class="token keyword">THEN</span>
  
    out_tier:<span class="token operator">=</span><span class="token string">'NO_SUMMONER_FOUND'</span><span class="token punctuation">;</span>

<span class="token keyword">END</span> GET_TIER<span class="token punctuation">;</span>
</code></pre></div><h3 id="function-함수란"><a href="#function-함수란" class="header-anchor">#</a> [ Function 함수란? ]</h3> <blockquote><p>하나의 특별한 목적의 작업을 수행하기 위해 독립적으로 설계된 코드의 집합.<br>
즉, 함수가 여러 작업을 위한 기능이라면 프로시저는 작업을 정리한 절차이다.<br>
보통 로직을 도와주는 역할이며, 간단한 계산, 수치 등을 나타낼 때 사용한다.</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 함수명<span class="token punctuation">(</span><span class="token operator">IN</span> 파라미터명<span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>

<span class="token comment">---</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> 함수이름<span class="token punctuation">(</span>파라미터<span class="token number">1</span>이름 타입<span class="token punctuation">,</span> 파라미터<span class="token number">2</span>이름 타입<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">RETURN</span> 반환할타입
<span class="token operator">IS</span>
	변수 선언
<span class="token keyword">BEGIN</span>
	실행문 작성
	<span class="token keyword">RETURN</span> 반환할값
<span class="token keyword">END</span><span class="token punctuation">;</span>

<span class="token comment">--- </span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> SUM_TWICE<span class="token punctuation">(</span>n1 NUMBER<span class="token punctuation">,</span> n2 NUMBER<span class="token punctuation">)</span>
<span class="token keyword">RETURN</span> NUMBER
<span class="token operator">IS</span>
	twice_sum  NUMBER :<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">BEGIN</span>
	twice_sum :<span class="token operator">=</span> <span class="token punctuation">(</span>n1 <span class="token operator">+</span> n2<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">RETURN</span> twice_sum<span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="함수와-프로시저의-차이"><a href="#함수와-프로시저의-차이" class="header-anchor">#</a> [ 함수와 프로시저의 차이 ]</h3> <p>프로시저 또한 매개변수를 받아 여러 작업을 수행하여 값을 반환할 수 있고, 함수 또한 매겨변수를 받아 여러 작업을 수행하여 값을 반환할 수 있다.</p> <h4 id="매개변수"><a href="#매개변수" class="header-anchor">#</a> 매개변수</h4> <ul><li>프로시저는 매개변수를 입력, 출력, 입출력 형식으로 받을 수 있다.</li> <li>함수는 매개변수를 입력 형식으로만 받을 수 있다.</li></ul> <h4 id="반환값"><a href="#반환값" class="header-anchor">#</a> 반환값</h4> <ul><li>프로시저는 반환값을 가질 수 도 있고 가지지 않을 수도 있다.</li> <li>함수는 반환값을 반드시 가져야 한다.</li></ul> <h4 id="쿼리문-내에서-실행가능"><a href="#쿼리문-내에서-실행가능" class="header-anchor">#</a> 쿼리문 내에서 실행가능</h4> <ul><li>프로시저는 SELECT, WHERE 문등에서 사용 불가하다.</li> <li>함수는 SELECT, WHERE 문 등에서 사용이 가능하다.</li></ul> <h4 id="처리-장소"><a href="#처리-장소" class="header-anchor">#</a> 처리 장소</h4> <ul><li>프로시저는 클라이언트(화면)에서 값을 건네받아 서버에서 작업을 한 뒤 클라이언트에게 전달한다. 즉, 서버에서 실행이 되어 속도면에서 빠른 성능을 보여준다.</li> <li>함수는 클라이언트(화면)에서 실행이 되어 프로시저보다 속도가 느리다.</li></ul> <br> <h2 id="_0809-feign-client"><a href="#_0809-feign-client" class="header-anchor">#</a> 0809 - Feign Client</h2> <p>페인은 넷플릭스에서 개발한 웹 서비스 클라이언트 도구(Http Client 모듈)로 애노테이션을 템플릿화된 요청으로 처리해 동작하는 HTTP 클라이언트 바인더다. 기존 HTTP client 작성을 쉽게 만들어주며 인터페이스를 만들고 애노테이션을 붙이는 방식이기 때문에 간단하게 사용할 수 있는 장점이 있다.</p> <h3 id="feign-기본-사용법"><a href="#feign-기본-사용법" class="header-anchor">#</a> Feign 기본 사용법</h3> <h4 id="의존성주입"><a href="#의존성주입" class="header-anchor">#</a> [ 의존성주입 ]</h4> <ul><li>maven</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud-version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud-version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.cloud-version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>gradle</li></ul> <div class="language-gradle extra-class"><pre class="language-text"><code>buildscript {
  dependencies {
    classpath &quot;io.spring.gradle:dependency-management-plugin:1.0.10.RELEASE&quot;
  }
}

ext {
  set('springCloudVersion', &quot;Hoxton.SR8&quot;)
}

apply plugin: &quot;io.spring.dependency-management&quot;

dependencyManagement {
  imports {
    mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}&quot;
  }
}
</code></pre></div><h4 id="application"><a href="#application" class="header-anchor">#</a> [ Application ]</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>@EnableFeignClients 어노테이션이 지정된 package들을 돌아다니면서 @FeignClient 어노테이션을 찾아 구현체를 만들어 준다.</p> <h4 id="interface-작성"><a href="#interface-작성" class="header-anchor">#</a> [ Interface 작성 ]</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;stores&quot;</span><span class="token punctuation">,</span> configuration <span class="token operator">=</span> <span class="token class-name">FooConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">&quot;${feign.url}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StoreClient</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/stores&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Store</span><span class="token punctuation">&gt;</span></span> <span class="token function">getStores</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/stores&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Store</span><span class="token punctuation">&gt;</span></span> <span class="token function">getStores</span><span class="token punctuation">(</span><span class="token class-name">Pageable</span> pageable<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/stores/{storeId}&quot;</span><span class="token punctuation">,</span> consumes <span class="token operator">=</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Store</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;storeId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> storeId<span class="token punctuation">,</span> <span class="token class-name">Store</span> store<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>@FeignClent 어노테이션을 통해 feign을 사용하는 인터페이스라고 알린다.</li> <li>configuration 옵션을 통해 default 값을 override 할 수 있다.</li> <li>url 옵션을 통해 불러올 url을 세팅한다.</li></ul> <h4 id="service-작성"><a href="#service-작성" class="header-anchor">#</a> [ Service 작성 ]</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoreService</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">StoreClient</span> storeClient<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">StoreService</span><span class="token punctuation">(</span><span class="token class-name">StoreClient</span> storeClient<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>storeClient <span class="token operator">=</span> storeClient<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Store</span><span class="token punctuation">&gt;</span></span> <span class="token function">getStores</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> storeClient<span class="token punctuation">.</span><span class="token function">getStores</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>getStores()를 호출하여 FeignClient를 호출한다.</li></ul> <br> <h2 id="_0811-jenkins-pipeline"><a href="#_0811-jenkins-pipeline" class="header-anchor">#</a> 0811 - jenkins pipeline</h2> <p>웹훅없이 기본적이 pipeline으로 클론, 빌드, 배포까지만 진행하는 방법</p> <h4 id="credentials-세팅"><a href="#credentials-세팅" class="header-anchor">#</a> [ Credentials 세팅 ]</h4> <ul><li>Jenkins 관리 -&gt; Manage Credentials -&gt; Add Credentials</li> <li>Jenkins 관리 -&gt; 시스템 설정 -&gt; GitHub -&gt; 서버등록</li></ul> <h4 id="git-parameter"><a href="#git-parameter" class="header-anchor">#</a> [ Git Parameter ]</h4> <ul><li>Git Parameter Plug-In 설치</li> <li>파이프라인 -&gt; 매개변수 설정</li></ul> <h4 id="ssh-서버로-파일전송"><a href="#ssh-서버로-파일전송" class="header-anchor">#</a> [ SSH 서버로 파일전송 ]</h4> <ul><li>publish over ssh 플러그인 설치</li> <li>Jenkins 관리 -&gt; 시스템 설정 -&gt; 원격 서버 설정</li></ul> <h4 id="파이프-라인-생성"><a href="#파이프-라인-생성" class="header-anchor">#</a> [ 파이프 라인 생성 ]</h4> <ul><li>새로운 item -&gt; 파이프라인 생성</li> <li>Pipeline Syntax통해 스니펫 설정</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>pipeline <span class="token punctuation">{</span>
    agent any
    parameters <span class="token punctuation">{</span>
        gitParameter branchFilter: <span class="token string">'origin/(.*)'</span>, defaultValue: <span class="token string">'develop'</span>, name: <span class="token string">'BRANCH'</span>, type: <span class="token string">'PT_BRANCH'</span>
    <span class="token punctuation">}</span>
    stages <span class="token punctuation">{</span>
        stage<span class="token punctuation">(</span><span class="token string">'github clone'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            steps <span class="token punctuation">{</span>
                <span class="token function">git</span> branch: <span class="token string">&quot;<span class="token variable">${params.BRANCH}</span>&quot;</span>, credentialsId: <span class="token string">'jaesungahn91'</span>, url: <span class="token string">'https://github.com/wiiee-kr/wiiee-server.git'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        stage<span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            steps<span class="token punctuation">{</span>
                <span class="token function">sh</span><span class="token string">''</span>'
                    ./gradlew api:clean api:bootJar
                <span class="token string">''</span>'
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>   
        
        stage<span class="token punctuation">(</span><span class="token string">'publish on ssh'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            steps<span class="token punctuation">{</span>
                sshPublisher<span class="token punctuation">(</span>
                  publishers: 
                    <span class="token punctuation">[</span>
                      sshPublisherDesc<span class="token punctuation">(</span>
                        configName: <span class="token string">'wiiee-api-test'</span>, 
                        transfers: 
                          <span class="token punctuation">[</span>
                            sshTransfer<span class="token punctuation">(</span>
                              cleanRemote: false, 
                              excludes: <span class="token string">''</span>,
                              execCommand: <span class="token string">'sh /home/ec2-user/deploy.sh'</span>, 
                              execTimeout: <span class="token number">120000</span>, 
                              flatten: false, 
                              makeEmptyDirs: false, 
                              noDefaultExcludes: false, 
                              patternSeparator: <span class="token string">'[, ]+'</span>, 
                              remoteDirectory: <span class="token string">'./'</span>, 
                              remoteDirectorySDF: false, 
                              removePrefix: <span class="token string">'api/build/libs/'</span>, 
                              sourceFiles: <span class="token string">'api/build/libs/*.jar'</span><span class="token punctuation">)</span>
                          <span class="token punctuation">]</span>, 
                        usePromotionTimestamp: false, 
                        useWorkspaceInPromotion: false, 
                        verbose: <span class="token boolean">true</span><span class="token punctuation">)</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="_0813-git-submodule"><a href="#_0813-git-submodule" class="header-anchor">#</a> 0813 - Git Submodule</h2> <p>credential 파일 관리를 위한 방법중 하나로 사용하고 있는 Git Submodule에 대해 학습하자.</p> <ul><li>git submodule</li> <li>설정파일 암호화
<ul><li>Jasypt 라이브러리</li></ul></li> <li>Spring Cloud Config를 통한 설정파일 분리</li></ul> <h3 id="git-submodule이란"><a href="#git-submodule이란" class="header-anchor">#</a> [ Git Submodule이란 ]</h3> <p>메인 레포지토리에 하위 레포지토리를 두고 관리하기 위한 도구이다. 하나의 프로젝트에서 다른 프로젝트를 함께 사용해야 하는 경우 주로 사용한다. 즉, Git 저장소 안에 다른 Git 저장소를 디렉토리로 분리해 넣는 것이 서브모듈이다. 다른 독립된 Git 저장소를 Clone 해서 내 Git 저장소 안에 포함할 수 있으며 각 저장소의 커밋은 독립적으로 관리한다.</p> <h3 id="git-submodule-사용방법"><a href="#git-submodule-사용방법" class="header-anchor">#</a> [ Git Submodule 사용방법 ]</h3> <h4 id="서브-모듈추가"><a href="#서브-모듈추가" class="header-anchor">#</a> 서브 모듈추가</h4> <ul><li>git submodule add {URL}</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> submodule <span class="token function">add</span> https://github.com/chaconinc/DbConnector
Cloning into <span class="token string">'DbConnector'</span><span class="token punctuation">..</span>.
remote: Counting objects: <span class="token number">11</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">10</span>/10<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">11</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">11</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>
Unpacking objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">11</span>/11<span class="token punctuation">)</span>, done.
Checking connectivity<span class="token punctuation">..</span>. done.
</code></pre></div><ul><li>기본적으로 서브모듈은 프로젝트 저장소의 이름으로 디렉토리를 만든다. 디렉토리 이름으로 서브모듈을 추가할 수도 있다.</li></ul> <h4 id="서브모듈-확인"><a href="#서브모듈-확인" class="header-anchor">#</a> 서브모듈 확인</h4> <ul><li>git status</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> status
On branch master
Your branch is up-to-date with <span class="token string">'origin/master'</span><span class="token builtin class-name">.</span>

Changes to be committed:
  <span class="token punctuation">(</span>use <span class="token string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="token punctuation">)</span>

    new file:   .gitmodules
    new file:   DbConnector
</code></pre></div><ul><li>.gitmodules</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>[submodule &quot;DbConnector&quot;]
    path = DbConnector
    url = https://github.com/chaconinc/DbConnector
</code></pre></div><ul><li>git diff</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> <span class="token function">diff</span> --cached DbConnector
<span class="token function">diff</span> --git a/DbConnector b/DbConnector
new <span class="token function">file</span> mode <span class="token number">160000</span>
index 0000000<span class="token punctuation">..</span>c3f01dc
--- /dev/null
+++ b/DbConnector
@@ -0,0 +1 @@
+Subproject commit c3f01dc8862123d317dd46284b05b6892c7b29bc
</code></pre></div><ul><li>Git은 DbConnector 디렉토리를 서브모듈로 취급하기 때문에 해당 디렉토리 아래의 파일 수정사항을 직접 추적하지 않는다. 대신 서브모듈 디렉토리를 통째로 특별한 커밋으로 취급한다.</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> <span class="token function">diff</span> --cached --submodule
<span class="token function">diff</span> --git a/.gitmodules b/.gitmodules
new <span class="token function">file</span> mode <span class="token number">100644</span>
index 0000000<span class="token punctuation">..</span>71fc376
--- /dev/null
+++ b/.gitmodules
@@ -0,0 +1,3 @@
+<span class="token punctuation">[</span>submodule <span class="token string">&quot;DbConnector&quot;</span><span class="token punctuation">]</span>
+       path <span class="token operator">=</span> DbConnector
+       url <span class="token operator">=</span> https://github.com/chaconinc/DbConnector
Submodule DbConnector 0000000<span class="token punctuation">..</span>.c3f01dc <span class="token punctuation">(</span>new submodule<span class="token punctuation">)</span>
</code></pre></div><ul><li>git commit &amp; git push</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> commit -am <span class="token string">'added DbConnector module'</span>
<span class="token punctuation">[</span>master fb9093c<span class="token punctuation">]</span> added DbConnector module
 <span class="token number">2</span> files changed, <span class="token number">4</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>
 create mode <span class="token number">100644</span> .gitmodules
 create mode <span class="token number">160000</span> DbConnector
</code></pre></div><p>DbConnector 디렉토리 모드는 160000이다. git에게 있어 160000모드는 일반적인 파일이나 디렉토리가 아니라 특별하다는 의미이다.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> push origin master
</code></pre></div><h4 id="서브모듈-포함한-프로젝트-clone"><a href="#서브모듈-포함한-프로젝트-clone" class="header-anchor">#</a> 서브모듈 포함한 프로젝트 Clone</h4> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> clone https://github.com/chaconinc/MainProject
Cloning into <span class="token string">'MainProject'</span><span class="token punctuation">..</span>.
remote: Counting objects: <span class="token number">14</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">13</span>/13<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">14</span> <span class="token punctuation">(</span>delta <span class="token number">1</span><span class="token punctuation">)</span>, reused <span class="token number">13</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>
Unpacking objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">14</span>/14<span class="token punctuation">)</span>, done.
Checking connectivity<span class="token punctuation">..</span>. done.
$ <span class="token builtin class-name">cd</span> MainProject
$ <span class="token function">ls</span> -la
total <span class="token number">16</span>
drwxr-xr-x   <span class="token number">9</span> schacon  staff  <span class="token number">306</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 <span class="token builtin class-name">.</span>
drwxr-xr-x   <span class="token number">7</span> schacon  staff  <span class="token number">238</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 <span class="token punctuation">..</span>
drwxr-xr-x  <span class="token number">13</span> schacon  staff  <span class="token number">442</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 .git
-rw-r--r--   <span class="token number">1</span> schacon  staff   <span class="token number">92</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 .gitmodules
drwxr-xr-x   <span class="token number">2</span> schacon  staff   <span class="token number">68</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 DbConnector
-rw-r--r--   <span class="token number">1</span> schacon  staff  <span class="token number">756</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 Makefile
drwxr-xr-x   <span class="token number">3</span> schacon  staff  <span class="token number">102</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 includes
drwxr-xr-x   <span class="token number">4</span> schacon  staff  <span class="token number">136</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 scripts
drwxr-xr-x   <span class="token number">4</span> schacon  staff  <span class="token number">136</span> Sep <span class="token number">17</span> <span class="token number">15</span>:21 src
$ <span class="token builtin class-name">cd</span> DbConnector/
$ <span class="token function">ls</span>
$
</code></pre></div><ul><li>프로젝트를 Clone하면 기본적으로 서브모듈 디렉토리는 빈 디렉토리이다.</li> <li>이후에 <code>git submodule init</code> 명령을 실행하면 서브모듈 정보를 기반으로 로컬 환경설정 파일이 준비된다. 이후 <code>git submodule update</code> 명령으로 서브모듈의 리모트 저장소에서 데이터를 가져오고 서브모듈을 포함한 프로젝트의 현재 스냅샷에서 Checkout 해야 할 커밋 정보를 가져와서 서브모듈 프로젝트에 대 한 Checkout을 한다.</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> submodule init
Submodule <span class="token string">'DbConnector'</span> <span class="token punctuation">(</span>https://github.com/chaconinc/DbConnector<span class="token punctuation">)</span> registered <span class="token keyword">for</span> path <span class="token string">'DbConnector'</span>
$ <span class="token function">git</span> submodule update
Cloning into <span class="token string">'DbConnector'</span><span class="token punctuation">..</span>.
remote: Counting objects: <span class="token number">11</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">10</span>/10<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">11</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">11</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>
Unpacking objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">11</span>/11<span class="token punctuation">)</span>, done.
Checking connectivity<span class="token punctuation">..</span>. done.
Submodule path <span class="token string">'DbConnector'</span><span class="token builtin class-name">:</span> checked out <span class="token string">'c3f01dc8862123d317dd46284b05b6892c7b29bc'</span>
</code></pre></div><ul><li>DbConnector 디렉토리는 마지막으로 커밋을 했던 상태로 복원된다.</li> <li>방금 과정을 메인 프로젝트를 Clone 할 때 git clone 명령 뒤에 <code>--recurse-submodules</code> 옵션을 붙이면 서브모듈을 자동으로 초기화하고 업데이트한다.</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> clone --recurse-submodules https://github.com/chaconinc/MainProject
Cloning into <span class="token string">'MainProject'</span><span class="token punctuation">..</span>.
remote: Counting objects: <span class="token number">14</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">13</span>/13<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">14</span> <span class="token punctuation">(</span>delta <span class="token number">1</span><span class="token punctuation">)</span>, reused <span class="token number">13</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>
Unpacking objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">14</span>/14<span class="token punctuation">)</span>, done.
Checking connectivity<span class="token punctuation">..</span>. done.
Submodule <span class="token string">'DbConnector'</span> <span class="token punctuation">(</span>https://github.com/chaconinc/DbConnector<span class="token punctuation">)</span> registered <span class="token keyword">for</span> path <span class="token string">'DbConnector'</span>
Cloning into <span class="token string">'DbConnector'</span><span class="token punctuation">..</span>.
remote: Counting objects: <span class="token number">11</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">10</span>/10<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">11</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">11</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>
Unpacking objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">11</span>/11<span class="token punctuation">)</span>, done.
Checking connectivity<span class="token punctuation">..</span>. done.
Submodule path <span class="token string">'DbConnector'</span><span class="token builtin class-name">:</span> checked out <span class="token string">'c3f01dc8862123d317dd46284b05b6892c7b29bc'</span>
</code></pre></div><p>메인 프로젝트에 submodule이 이미 있고, 하위 프로젝트의 새로운 커밋을 가져와야 하는 상황에선 update 명령어를 활용한다. 이 명령어로 메인 프로젝트에서 submodule의 커밋을 가져오면, 이전에 봤던 것처럼 새로 커밋해야 하는 파일이 생긴다. 앞서 한것과 동일하게 해당 파일을 add, commit, push해서 로컬과 원격프로젝트에 반영한다.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">git</span> submodule update --remote --merge

// .gitmodules 파일에 정의되어 있는 브랜치<span class="token punctuation">(</span>default는 main 또는 master<span class="token punctuation">)</span>의 최신 버전으로 업데이트
// $ <span class="token function">git</span> submodule update --remote

// 로컬에서 작업 중인 부분과 원격에 작업된 부분이 다른 경우 머지까지 진행
// $ <span class="token function">git</span> submodule update --remote --merge
</code></pre></div><br> <h2 id="_0814-애노테이션-프로세서-annotation-processor"><a href="#_0814-애노테이션-프로세서-annotation-processor" class="header-anchor">#</a> 0814 - 애노테이션 프로세서(Annotation Processor)</h2> <h3 id="annotation-processor란"><a href="#annotation-processor란" class="header-anchor">#</a> Annotation Processor란?</h3> <blockquote><p>“Annotation Processing” is a hook into the compile process of the java compiler, to analyse the source code for user defined annotations and handle then (by producing compiler errors, compiler warning, emitting source code, byte code …).</p></blockquote> <p>Annotation Processor는 컴파일 단계에서 Annotation에 정의된 일렬의 프로세스를 동작하게 하는 것을 의미한다. 컴파일 단계에서 실행되기 때문에, 빌드 단계에서 에러를 출력하게 할 수 있고 소스코드 및 바이트 코드를 생성할 수도 있다.<br>
사용하는 예로 자바의 @Override가 있으며, Lombok(롬북) 라이브러리도 있다.<br>
기본적으로 포함되어 있는 어노테이션이 아니면 annotationProcessor를 통해 추가해줘야 한다.</p> <h3 id="lombok과-annotation-processor"><a href="#lombok과-annotation-processor" class="header-anchor">#</a> Lombok과 Annotation Processor</h3> <p>Lombok이란 @Getter, @Setter, @Builder 등의 Annotation과 Annotation Processor를 제공하여 표준적으로 작성해야 할 코드를 개발자 대신 생성해주는 라이브러리다.<br>
컴파일 시점에 Annotation Processor를 사용하여 abstract syntaxtree를 조작한다.</p> <h3 id="작동원리"><a href="#작동원리" class="header-anchor">#</a> 작동원리</h3> <h4 id="moja-interface"><a href="#moja-interface" class="header-anchor">#</a> Moja Interface</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Magic</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Moja</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">pullOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="magic-애노테이션"><a href="#magic-애노테이션" class="header-anchor">#</a> Magic 애노테이션</h4> <ul><li>Target을 TYPE으로 지정하면, 인터페이스, 클래스, ENUM에 지정이 가능하다.</li> <li>Rentention정보를 소스레벨 까지만 유지하고, 컴파일 시점에 애토네이션 프로세서를 사용해 MagicMoja를 생성한다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span> <span class="token comment">// TYPE 으로 지정하면, 인터페이스 ,클래스, enum에 지정이 가능함.</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>SOURCE<span class="token punctuation">)</span> <span class="token comment">// 소스레벨에서 만 유지하고, 컴파일시 애노테이션 프로세서로 소스코드를 생성할것임</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Magic</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// MagicMoja 가 애노테이션 프로세서를 사용해서생성할 클래스이다.</span>
        <span class="token class-name">Moja</span> moja <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MagicMoja</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>moja<span class="token punctuation">.</span><span class="token function">pullOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>애노테이션 프로세서를 사용하여, @Magic 애노테이션이 적용된 인터페이스가 존재하면, MagicMoja 라는 클래스를 생성한다.</li></ul> <h4 id="magicmojaprocessor"><a href="#magicmojaprocessor" class="header-anchor">#</a> MagicMojaProcessor</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Process 인터페이스를 구현해도 되지만, 자바에서 제공하는 AbstractProcessor 추상클래스를 구현해도 된다.
 * Process 에서 구현해야하는 여러 메서드들을 구현해주고 있다.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MagicMojaProcessor</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractProcessor</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 이 프로세서가 어떤 애노테이션들을 처리할 것인지 설정하는 메서드 오버라이딩.
     *
     * Element란 ?
     * - 패키지
     * - 클래스
     * - 메서드
     * 소스코드의 구성요소를 엘리먼트라고 부른다
     * 각 엘리먼트들이 프로세스를 할때 참조할 수 있다.
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSupportedAnnotationTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Set</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Magic</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 몇 버전의 소스코드를 지원하는지 설정.
     * - 최신버전 지원하도록 설정
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">SourceVersion</span> <span class="token function">getSupportedSourceVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SourceVersion</span><span class="token punctuation">.</span><span class="token function">latestSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 애노테이션 프로세서는 라운드 라는 개념으로 처리를 한다.
     * - 여러 라운드에 거쳐 처리를 한다.
     * - 각 라운드마다 프로세서에게 특정 애노테이션을 가지고 있는 엘리먼트를 찾으면 처리를 요청한다.
     * - 처리된 결과가 다음 라운드에게 전달될 수 있다.
     * - Filter Chaining 과 어찌보면 비슷한 느낌이다.
     *
     * 만약 여기서 true를 리턴하면, 애노테이션 프로세서가 처리를 한것이다.
     * true를 리턴하면, 다른 프로세서가 이를 처리하지 않는다.
     * @param annotations
     * @param roundEnv
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">TypeElement</span><span class="token punctuation">&gt;</span></span> annotations<span class="token punctuation">,</span> <span class="token class-name">RoundEnvironment</span> roundEnv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* 적절한 위치에 애노테이션을 사용했는지 체크 */</span>
        <span class="token comment">/* 애노테이션을 사용한 엘리먼트에 대한 정보를 가져올수 있다.*/</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> elementsAnnotatedWith <span class="token operator">=</span> roundEnv<span class="token punctuation">.</span><span class="token function">getElementsAnnotatedWith</span><span class="token punctuation">(</span><span class="token class-name">Magic</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elementsAnnotatedWith<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/* 애노테이션이 인터페이스 아닌곳에 사용했을 경우 */</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getKind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">ElementKind</span><span class="token punctuation">.</span>INTERFACE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                processingEnv<span class="token punctuation">.</span><span class="token function">getMessager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token class-name">Diagnostic<span class="token punctuation">.</span>Kind</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span> <span class="token string">&quot;@Magic 애노테이션은 Interface만 지원하는 애노테이션 입니다.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 로깅</span>
                processingEnv<span class="token punctuation">.</span><span class="token function">getMessager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token class-name">Diagnostic<span class="token punctuation">.</span>Kind</span><span class="token punctuation">.</span>NOTE<span class="token punctuation">,</span> <span class="token string">&quot;Processing &quot;</span> <span class="token operator">+</span> element<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Processor Interface를 사용해도 되지만, 자바에서 기본으로 제공하는 AbstractProcessor 추상 클래스를 사용한다.
<ul><li>인터페이스에서 기본으로 구현해야할 것들을 어느정도 구현하고 있다.</li></ul></li></ul> <blockquote><p>주요 메서드</p></blockquote> <ul><li>getSupportedAnnotationTypes : 이 프로세서가 처리할 애노테이션들을 지정한다.</li> <li>getSupportedSourceVersion : 소스코드 버전을 몇까지 지원할 것인지 지정한다.</li> <li>process : 애노테이션 프로세서가 애노테이션 프로세서가 처리할 애노테이션을 사용하고 있는 엘리먼트 들을 참조할 수 있다.
<ul><li>엘리먼트란? 소스코드의 구성요소들을 엘리먼트라고 한다(패키지 엘리먼트, 클래스 엘리먼트, 메서드 엘리먼트)</li> <li>각 엘리먼트들을 프로세스할때 참조가 가능하다.</li></ul></li></ul></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">September 13, 2022 21:44</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: jaesungahn91@gmail.com" class="contributor">
          ahnjs
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/TIL/2022/0725/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        0725 ~ 0807
      </a></span> <span class="next"><a href="/TIL/2022/0815/">
        0815 ~ 0824
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/TIL/assets/js/app.5fb46d7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" defer></script><script src="/TIL/assets/js/page-0808~0814.d656f648.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" defer></script>
  </body>
</html>
