<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>0102 - 0109 | ahnjs TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Today I Learned">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.c9ce91a1.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5fb46d7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" as="script"><link rel="preload" href="/TIL/assets/js/page-0102-0109.d861648d.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" as="script"><link rel="prefetch" href="/TIL/assets/js/103.8c089b22.js"><link rel="prefetch" href="/TIL/assets/js/104.119134a5.js"><link rel="prefetch" href="/TIL/assets/js/layout-Blog.a086a7ca.js"><link rel="prefetch" href="/TIL/assets/js/layout-Layout.0945805f.js"><link rel="prefetch" href="/TIL/assets/js/layout-NotFound.9e898f41.js"><link rel="prefetch" href="/TIL/assets/js/layout-Slide.f940a7a7.js"><link rel="prefetch" href="/TIL/assets/js/page-0102~0108.3f3ff8b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0109~0115.4c6b192d.js"><link rel="prefetch" href="/TIL/assets/js/page-0110-0116.feb84c5b.js"><link rel="prefetch" href="/TIL/assets/js/page-0116~0129.d55b06ca.js"><link rel="prefetch" href="/TIL/assets/js/page-0117-0123.7a6dce2f.js"><link rel="prefetch" href="/TIL/assets/js/page-0124-0206.ee32f254.js"><link rel="prefetch" href="/TIL/assets/js/page-0130~0205.df7a6a64.js"><link rel="prefetch" href="/TIL/assets/js/page-0206~0226.5da382f5.js"><link rel="prefetch" href="/TIL/assets/js/page-0211-0220.cd9bd482.js"><link rel="prefetch" href="/TIL/assets/js/page-0217-0221.1ed564ea.js"><link rel="prefetch" href="/TIL/assets/js/page-0221-0227.40b291d8.js"><link rel="prefetch" href="/TIL/assets/js/page-0222-0229.c4aa2b4d.js"><link rel="prefetch" href="/TIL/assets/js/page-0227~0305.164780e1.js"><link rel="prefetch" href="/TIL/assets/js/page-0228-0313.960c5eb2.js"><link rel="prefetch" href="/TIL/assets/js/page-0301-0307.8a2dd769.js"><link rel="prefetch" href="/TIL/assets/js/page-0306~0319.d7e1dd39.js"><link rel="prefetch" href="/TIL/assets/js/page-0308-0314.95d08be9.js"><link rel="prefetch" href="/TIL/assets/js/page-0314-0320.a482c7e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0315-0321.0bf22c5a.js"><link rel="prefetch" href="/TIL/assets/js/page-0320~0402.dc9cbbee.js"><link rel="prefetch" href="/TIL/assets/js/page-0321-0328.536bc991.js"><link rel="prefetch" href="/TIL/assets/js/page-0322-0328.5002c0f8.js"><link rel="prefetch" href="/TIL/assets/js/page-0329-0404.c6f98895.js"><link rel="prefetch" href="/TIL/assets/js/page-0329~0403.5b50aeae.js"><link rel="prefetch" href="/TIL/assets/js/page-0403~0423.db8f2eb4.js"><link rel="prefetch" href="/TIL/assets/js/page-0404~0410.6dd2170c.js"><link rel="prefetch" href="/TIL/assets/js/page-0405-0411.dfef4290.js"><link rel="prefetch" href="/TIL/assets/js/page-0411~0417.31e79aa4.js"><link rel="prefetch" href="/TIL/assets/js/page-0412-0418.aab597de.js"><link rel="prefetch" href="/TIL/assets/js/page-0418~0424.acb47103.js"><link rel="prefetch" href="/TIL/assets/js/page-0419-0425.bc1c1f3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0425~0501.63985992.js"><link rel="prefetch" href="/TIL/assets/js/page-0426-0502.d7a75a07.js"><link rel="prefetch" href="/TIL/assets/js/page-0502~0515.21ce942d.js"><link rel="prefetch" href="/TIL/assets/js/page-0503-0509.fb0660a5.js"><link rel="prefetch" href="/TIL/assets/js/page-0510-0516.00f7a787.js"><link rel="prefetch" href="/TIL/assets/js/page-0516~0529.c375a6ba.js"><link rel="prefetch" href="/TIL/assets/js/page-0517-0523.b1aa4a22.js"><link rel="prefetch" href="/TIL/assets/js/page-0523~0605.6e7cab56.js"><link rel="prefetch" href="/TIL/assets/js/page-0524-0530.8c92fe4f.js"><link rel="prefetch" href="/TIL/assets/js/page-0531-0606.e40cfd3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0606~0619.b2a4a63a.js"><link rel="prefetch" href="/TIL/assets/js/page-0607-0613.b7eaa930.js"><link rel="prefetch" href="/TIL/assets/js/page-0612.6d4d2838.js"><link rel="prefetch" href="/TIL/assets/js/page-0613.dfd2eb79.js"><link rel="prefetch" href="/TIL/assets/js/page-0614-0620.8c3b6db2.js"><link rel="prefetch" href="/TIL/assets/js/page-0614.c29fe08f.js"><link rel="prefetch" href="/TIL/assets/js/page-0621-0627.8b7cfba5.js"><link rel="prefetch" href="/TIL/assets/js/page-0627~0703.32c82c88.js"><link rel="prefetch" href="/TIL/assets/js/page-0628-0704.a12f4dd5.js"><link rel="prefetch" href="/TIL/assets/js/page-0705-0808.84dfa0c2.js"><link rel="prefetch" href="/TIL/assets/js/page-0711~0717.c1d09532.js"><link rel="prefetch" href="/TIL/assets/js/page-0718~0724.28a7589f.js"><link rel="prefetch" href="/TIL/assets/js/page-0725~0807.ef50582d.js"><link rel="prefetch" href="/TIL/assets/js/page-0807~0902.96994631.js"><link rel="prefetch" href="/TIL/assets/js/page-0808~0814.d656f648.js"><link rel="prefetch" href="/TIL/assets/js/page-0809-0815.348cc1c5.js"><link rel="prefetch" href="/TIL/assets/js/page-0815~0824.df5c5da0.js"><link rel="prefetch" href="/TIL/assets/js/page-0816-0822.87a87566.js"><link rel="prefetch" href="/TIL/assets/js/page-0822~0911.4867b37a.js"><link rel="prefetch" href="/TIL/assets/js/page-0823-0829.8bcfd48b.js"><link rel="prefetch" href="/TIL/assets/js/page-0830-0905.8b54a9e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0903~0910.f917d595.js"><link rel="prefetch" href="/TIL/assets/js/page-0906-0919.a1897d51.js"><link rel="prefetch" href="/TIL/assets/js/page-0911~0918.7dfbe6de.js"><link rel="prefetch" href="/TIL/assets/js/page-0912~0918.274ce7a6.js"><link rel="prefetch" href="/TIL/assets/js/page-0919~0925.e25dd9ff.js"><link rel="prefetch" href="/TIL/assets/js/page-0920-0926.22e5547a.js"><link rel="prefetch" href="/TIL/assets/js/page-0926~1002.d97a33b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0927-1003.cd544f10.js"><link rel="prefetch" href="/TIL/assets/js/page-1003~1009.b12a6f87.js"><link rel="prefetch" href="/TIL/assets/js/page-1004-1010.92ee8f8e.js"><link rel="prefetch" href="/TIL/assets/js/page-1010~1016.00b69211.js"><link rel="prefetch" href="/TIL/assets/js/page-1011-1017.c314b6aa.js"><link rel="prefetch" href="/TIL/assets/js/page-1017~1030.03e8572f.js"><link rel="prefetch" href="/TIL/assets/js/page-1018-1024.35384747.js"><link rel="prefetch" href="/TIL/assets/js/page-1025-1031.e5a2aad2.js"><link rel="prefetch" href="/TIL/assets/js/page-1031~1113.813912c9.js"><link rel="prefetch" href="/TIL/assets/js/page-1101-1107.e08121f1.js"><link rel="prefetch" href="/TIL/assets/js/page-1108-1114.14c10b7a.js"><link rel="prefetch" href="/TIL/assets/js/page-1113~1109.6ffeae7e.js"><link rel="prefetch" href="/TIL/assets/js/page-1114~1127.edbc49cd.js"><link rel="prefetch" href="/TIL/assets/js/page-1115-1124.248147ec.js"><link rel="prefetch" href="/TIL/assets/js/page-1122-1128.de82e713.js"><link rel="prefetch" href="/TIL/assets/js/page-1128~1211.ca0d6242.js"><link rel="prefetch" href="/TIL/assets/js/page-1129-1205.57233094.js"><link rel="prefetch" href="/TIL/assets/js/page-1204~1217.bfef77e0.js"><link rel="prefetch" href="/TIL/assets/js/page-1206-1212.100e1893.js"><link rel="prefetch" href="/TIL/assets/js/page-1212~0101.031e14d3.js"><link rel="prefetch" href="/TIL/assets/js/page-1213-1219.0e09712c.js"><link rel="prefetch" href="/TIL/assets/js/page-1220-1226.4cb62ec6.js"><link rel="prefetch" href="/TIL/assets/js/page-📖TodayILearned.7bda0772.js"><link rel="prefetch" href="/TIL/assets/js/vendors~photo-swipe.7980dd4b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.c9ce91a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/TIL/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">ahnjs TIL</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2023</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">2022</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2022/0102/" aria-current="page" class="active sidebar-link">0102 - 0109</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#_0103-원격-저장소에-push된-파일을-ignore" class="sidebar-link">0103 - 원격 저장소에 push된 파일을 ignore</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#_0104-jpa-연관관계" class="sidebar-link">0104 - JPA 연관관계</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#jpa에서-가장-중요한-것" class="sidebar-link heading3">JPA에서 가장 중요한 것</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#연관-관계-정의-규칙" class="sidebar-link heading3">연관 관계 정의 규칙</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#_0105-datajpatest-vs-springboottest" class="sidebar-link">0105 - @DataJpaTest vs @SpringBootTest</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#datajpatest" class="sidebar-link heading3">@DataJpaTest</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#springboottest" class="sidebar-link heading3">@SpringBootTest</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#_0106-junit5-extendwith-mockmvc-testconstructor" class="sidebar-link">0106 - Junit5 : @ExtendWith, MockMvc, @TestConstructor</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#extendwith" class="sidebar-link heading3">@ExtendWith</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#mockmvc" class="sidebar-link heading3">MockMvc</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#testconstructor" class="sidebar-link heading3">@TestConstructor</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#_0107-springboot-test" class="sidebar-link">0107 - Springboot Test</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#스프링부트-테스트-핵심-기능" class="sidebar-link heading3">스프링부트 테스트 핵심 기능</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#springboottest-2" class="sidebar-link heading3">@SpringBootTest</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#webenvironment" class="sidebar-link heading3">WebEnvironment</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#슬라이스-테스트" class="sidebar-link heading3">슬라이스 테스트</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0102/#테스트-유틸" class="sidebar-link heading3">테스트 유틸</a></li></ul></li></ul></li><li><a href="/TIL/2022/0110/" class="sidebar-link">0110 - 0116</a></li><li><a href="/TIL/2022/0117/" class="sidebar-link">0117 - 0123</a></li><li><a href="/TIL/2022/0124/" class="sidebar-link">0124 - 0206</a></li><li><a href="/TIL/2022/0211/" class="sidebar-link">0211 - 0220</a></li><li><a href="/TIL/2022/0221/" class="sidebar-link">0221 - 0227</a></li><li><a href="/TIL/2022/0228/" class="sidebar-link">0228 - 0313</a></li><li><a href="/TIL/2022/0314/" class="sidebar-link">0314 - 0320</a></li><li><a href="/TIL/2022/0321/" class="sidebar-link">0321 - 0328</a></li><li><a href="/TIL/2022/0328/" class="sidebar-link">0329 ~ 0403</a></li><li><a href="/TIL/2022/0404/" class="sidebar-link">0404 ~ 0410</a></li><li><a href="/TIL/2022/0411/" class="sidebar-link">0411 ~ 0417</a></li><li><a href="/TIL/2022/0418/" class="sidebar-link">0418 ~ 0424</a></li><li><a href="/TIL/2022/0425/" class="sidebar-link">0425 ~ 0501</a></li><li><a href="/TIL/2022/0502/" class="sidebar-link">0502 ~ 0515</a></li><li><a href="/TIL/2022/0516/" class="sidebar-link">0516 ~ 0529</a></li><li><a href="/TIL/2022/0523/" class="sidebar-link">0523 ~ 0605</a></li><li><a href="/TIL/2022/0606/" class="sidebar-link">0606 ~ 0619</a></li><li><a href="/TIL/2022/0627/" class="sidebar-link">0627 ~ 0703</a></li><li><a href="/TIL/2022/0711/" class="sidebar-link">0711 ~ 0717</a></li><li><a href="/TIL/2022/0718/" class="sidebar-link">0718 ~ 0724</a></li><li><a href="/TIL/2022/0725/" class="sidebar-link">0725 ~ 0807</a></li><li><a href="/TIL/2022/0808/" class="sidebar-link">0808 ~ 0814</a></li><li><a href="/TIL/2022/0815/" class="sidebar-link">0815 ~ 0824</a></li><li><a href="/TIL/2022/0822/" class="sidebar-link">0822 ~ 0911</a></li><li><a href="/TIL/2022/0912/" class="sidebar-link">0912 ~ 0918</a></li><li><a href="/TIL/2022/0919/" class="sidebar-link">0919 ~ 0925</a></li><li><a href="/TIL/2022/0926/" class="sidebar-link">0926 ~ 1002</a></li><li><a href="/TIL/2022/1003/" class="sidebar-link">1003 ~ 1009</a></li><li><a href="/TIL/2022/1010/" class="sidebar-link">1010 ~ 1016</a></li><li><a href="/TIL/2022/1017/" class="sidebar-link">1017 ~ 1030</a></li><li><a href="/TIL/2022/1031/" class="sidebar-link">1031 ~ 1113</a></li><li><a href="/TIL/2022/1114/" class="sidebar-link">1114 ~ 1127</a></li><li><a href="/TIL/2022/1128/" class="sidebar-link">1128 ~ 1211</a></li><li><a href="/TIL/2022/1212/" class="sidebar-link">1212 ~ 0101</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2021</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">0102 - 0109</span></h1> <div class="page-info"><!----> </div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/TIL/2022/0102/#_0103-원격-저장소에-push된-파일을-ignore" class="anchor-link heading2"><div>0103 - 원격 저장소에 push된 파일을 ignore</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#_0104-jpa-연관관계" class="anchor-link heading2"><div>0104 - JPA 연관관계</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#jpa에서-가장-중요한-것" class="anchor-link heading3"><div>JPA에서 가장 중요한 것</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#연관-관계-정의-규칙" class="anchor-link heading3"><div>연관 관계 정의 규칙</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#_0105-datajpatest-vs-springboottest" class="anchor-link heading2"><div>0105 - @DataJpaTest vs @SpringBootTest</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#datajpatest" class="anchor-link heading3"><div>@DataJpaTest</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#springboottest" class="anchor-link heading3"><div>@SpringBootTest</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#_0106-junit5-extendwith-mockmvc-testconstructor" class="anchor-link heading2"><div>0106 - Junit5 : @ExtendWith, MockMvc, @TestConstructor</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#extendwith" class="anchor-link heading3"><div>@ExtendWith</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#mockmvc" class="anchor-link heading3"><div>MockMvc</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#testconstructor" class="anchor-link heading3"><div>@TestConstructor</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#_0107-springboot-test" class="anchor-link heading2"><div>0107 - Springboot Test</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#스프링부트-테스트-핵심-기능" class="anchor-link heading3"><div>스프링부트 테스트 핵심 기능</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#springboottest-2" class="anchor-link heading3"><div>@SpringBootTest</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#webenvironment" class="anchor-link heading3"><div>WebEnvironment</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#슬라이스-테스트" class="anchor-link heading3"><div>슬라이스 테스트</div></a></li><li class="anchor"><a href="/TIL/2022/0102/#테스트-유틸" class="anchor-link heading3"><div>테스트 유틸</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="_0102-0109"><a href="#_0102-0109" class="header-anchor">#</a> 0102 - 0109</h1> <h2 id="_0103-원격-저장소에-push된-파일을-ignore"><a href="#_0103-원격-저장소에-push된-파일을-ignore" class="header-anchor">#</a> 0103 - 원격 저장소에 push된 파일을 ignore</h2> <ul><li><p>문제<br>
원격 저장소에 이미 올라가 있는 파일을 git ignore에 추가 하여 파일을 무시하고 싶은 경우<br>
그냥 ignore에 추가시키면 추가가 되지 않는다.</p></li> <li><p>해결</p></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">git</span> <span class="token function">rm</span> -r --cached <span class="token builtin class-name">.</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token string">&quot;chore: git ignore&quot;</span>
<span class="token function">git</span> push
</code></pre></div><p>이와 같이 명령을 실행하게 되면 깃의 캐시를 다 날린 다음 다시 add를 진행하게 된다.</p> <br> <h2 id="_0104-jpa-연관관계"><a href="#_0104-jpa-연관관계" class="header-anchor">#</a> 0104 - JPA 연관관계</h2> <h3 id="jpa에서-가장-중요한-것"><a href="#jpa에서-가장-중요한-것" class="header-anchor">#</a> JPA에서 가장 중요한 것</h3> <ul><li>객체와 관계형 데이터베이스 테이블이 어떻게 매핑되는지를 이해하는 것이 중요</li> <li>1차원 매핑
<ul><li>@Entity, @Column, @Id, @GeneratedValue, @Enumerated.. 와 같은 말 그대로 객체와 데이터베이스 사이의 일대일로 대응되는 것으로써 기본적인 Annotation을 숙지</li></ul></li> <li>연관 관계 매핑</li></ul> <h3 id="연관-관계-정의-규칙"><a href="#연관-관계-정의-규칙" class="header-anchor">#</a> 연관 관계 정의 규칙</h3> <p>연관 관계를 매핑할 때, 생각해야 할 3가지</p> <ul><li>방향 : 단방향, 양방향</li> <li>연관 관계의 주인 : 양방향일 때, 연관 관계에서 관리 주체</li> <li>다중성 : 다대일(N:1), 일대다(1:N), 일대일(1:1), 다대다(N:M)</li></ul> <h4 id="단방향-양방향"><a href="#단방향-양방향" class="header-anchor">#</a> 단방향, 양방향</h4> <p>데이터베이스 테이블은 외래키 하나로 양 쪽 테이블 조인이 가능. 따라서 데이터 베이스는 단방향, 양방향을 나눌 필요가 없다.<br>
그러나 객체는 참조용 필드가 있는 객체만 다른 객체를 참조하는 것이 가능하기 때문에 두 객체 사이에 하나의 객체만 참조용 필드를 갖고 참조하면 단방향 관계, 두 객체가 모드가 각각 참조용 필드를 갖고 참조하면 양방향 관계가 된다.<br>
엄밀하게는 양방향 관계는 없고 두 객체가 단방향 참조를 각각 가져서 양방향 관계처럼 사용된다.</p> <h4 id="연관-관계의-주인"><a href="#연관-관계의-주인" class="header-anchor">#</a> 연관 관계의 주인</h4> <p>두 단방향 관계에서 제어의 권한(외래키를 비롯한 테이블 레코드를 저장, 수정, 삭제처리)을 갖는 실질적인 관계까 어떤 것인지 JPA에게 제공, 연관 관계의 주인이 아니라면 조회만 가능하다.<br>
연관 관계의 주인이 아닌 객체에서 <code>mappedBy</code> 속성을 사용하고 외래 키가 있는 곳을 연관 관계의 주인으로 정하면 된다.</p> <h4 id="다중성"><a href="#다중성" class="header-anchor">#</a> 다중성</h4> <ul><li>다대일(N:1) - 단방향(주인이 'N') : 사용가능</li> <li>다대일(N:1) - 양방향(주인이 'N') : 사용가능</li> <li>일대다(1:N) - 단방향(주인이 '1') : 사용불가</li> <li>일대다(1:N) - 양방향(주인이 '1') : 사용불가</li> <li>일대일(1:1) - 단방향 : 사용가능</li> <li>일대일(1:1) - 양방향 : 사용가능</li> <li>다대다(N:M) - 실무 사용금지 =&gt; 자기도 모르는 복잡한 조인의 쿼리가 발생할 수 도 있음. 따라서 중간 테이블을 생성할 것</li></ul> <br> <h2 id="_0105-datajpatest-vs-springboottest"><a href="#_0105-datajpatest-vs-springboottest" class="header-anchor">#</a> 0105 - @DataJpaTest vs @SpringBootTest</h2> <h3 id="datajpatest"><a href="#datajpatest" class="header-anchor">#</a> @DataJpaTest</h3> <p>@DataJpaTest는 오직 JPA 컴포넌트들만을 테스트하기 위한 어노테이션.<br>
full-auto config를 해제하고 JPA 테스트와 연관된 config만 적용한다.</p> <ul><li>@DataJpaTest가 포함하고 있는 어노테이션</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span>TYPE<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>value<span class="token operator">=</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span> <span class="token annotation punctuation">@BootstrapWith</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>orm<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span></span>DataJpaTestContextBootstrapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span></span>SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@OverrideAutoConfiguration</span><span class="token punctuation">(</span>enabled<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@TypeExcludeFilters</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name">DataJpaTypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token annotation punctuation">@AutoConfigureCache</span>
<span class="token annotation punctuation">@AutoConfigureDataJpa</span>
<span class="token annotation punctuation">@AutoConfigureTestDatabase</span>
<span class="token annotation punctuation">@AutoConfigureTestEntityManager</span>
<span class="token annotation punctuation">@ImportAutoConfiguration</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DataJpaTest</span>
</code></pre></div><ol><li>@Transactional
<ul><li>자동으로 롤백</li></ul></li> <li>@AutoConfigureTestDatabase
<ul><li>replace=AutoConfigureTestDatabase.Replace가 디폴트로 설정되어 있어, 설정해놓은 DB가 아닌 in-memory DB를 활용해서 테스트가 실행된다.</li> <li>EmbeddedBatabaseConnection 클래스를 보면 H2, DERBY, HSQL, HSQLDB 중 사용 가능한 in-memory DB에 자동으로 커넥션을 설정하는 것을 확인할 수 있다.</li> <li>replace=AutoConfigureTestDatabase.NONE 으로 값을 덮어 씌우면 설정해놓은 DB를 테스트에 사용할 수 있다.</li></ul></li></ol> <h3 id="springboottest"><a href="#springboottest" class="header-anchor">#</a> @SpringBootTest</h3> <p>@SpringBootTest는 full application config을 로드에서 통합 테스트를 진행하기 위한 어노테이션이다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span>TYPE<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>value<span class="token operator">=</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@BootstrapWith</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name">SpringBootTestContextBootstrapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span></span>SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootTest</span>
</code></pre></div><ul><li>설정해 놓은 config, context, components를 모두 로드한다.</li> <li>DataSource bean을 그대로 사용하기 때문에 in-memory, 로컬, 외부 상관 없이 DB를 사용해서 테스트가 실행된다.</li> <li>테스트할 때마다 DB가 롤백되지 않기 때문에 @Transactional을 사용해야 한다.</li></ul> <br> <h2 id="_0106-junit5-extendwith-mockmvc-testconstructor"><a href="#_0106-junit5-extendwith-mockmvc-testconstructor" class="header-anchor">#</a> 0106 - Junit5 : @ExtendWith, MockMvc, @TestConstructor</h2> <h3 id="extendwith"><a href="#extendwith" class="header-anchor">#</a> @ExtendWith</h3> <ul><li>Junit 4의 @RunWith가 Junit 5에서는 @ExtendWith로 변경</li> <li>@SpringBootTest 애노테이션에 포함되어 있기 떄문에 둘다 명시할 필요는 없다</li></ul> <h3 id="mockmvc"><a href="#mockmvc" class="header-anchor">#</a> MockMvc</h3> <ul><li>Spring MVC 에플리케이션을 테스트 해볼 수 있게 도와준다.</li> <li>실제 서버의 실행 없이 요청하고 응답을 받을 수 있다.</li></ul> <p>MocmMvc와 WebApplicationContext를 @Autowired 애노페이션을 이용해 의존관계를 주입하고, setup() 메서드로 MockMvc를 초기화 한다.<br>
@BeforeEach 애노테이션을 명시함으로써 테스트가 실행되기 전 setup() 메서드가 실행되어 반복적으로 초기화 할 필요가 없다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@WebMvcTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloControllerTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MockMvc</span> mockMvc<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">WebbApplicationContext</span> webApplicationContext<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@BeforeEach</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mockMvc <span class="token operator">=</span> <span class="token class-name">MockMvcBuilders</span>
                        <span class="token punctuation">.</span><span class="token function">webAppContextSetup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationContext<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="testresttemplate"><a href="#testresttemplate" class="header-anchor">#</a> TestRestTemplate</h4> <ul><li>@SpringBootTest의 WebEnvironment설정으로 실제 서버를 동작하게 한 뒤, RestTemplate을 통해 요청, 응답 받을 수 있다.</li> <li>TestRestTemplate는 스프링에서 제공하는 테스트용 RestTemplate이며, 자동으로 내장 서버와 연결된다</li> <li>필요하다면 RestTemplateBuilder를 통해 여러 설정을 추가할 수 있다.</li></ul> <blockquote><p>MockMvc는 사이드에서 테스트 하는것, TestRestTemplate는 클라이언트 사이드에서 테스트 해보는 것</p></blockquote> <h3 id="testconstructor"><a href="#testconstructor" class="header-anchor">#</a> @TestConstructor</h3> <p>JUnit 5부터는 생성자를 통한 의존관계 주입이 가능하다.<br>
AutowireMode.ALL 설정을 통해 @Autowired 애노테이션을 명시하지 않고, private final로 선언된 필드들에 의존관계 주입이 가능하다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token annotation punctuation">@TestConstructor</span><span class="token punctuation">(</span>autowireMode <span class="token operator">=</span> <span class="token class-name">TestConstructor<span class="token punctuation">.</span>AutowireMode</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HelloService</span> helloService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> 테스트<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 테스트 코드 생략</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="_0107-springboot-test"><a href="#_0107-springboot-test" class="header-anchor">#</a> 0107 - Springboot Test</h2> <h3 id="스프링부트-테스트-핵심-기능"><a href="#스프링부트-테스트-핵심-기능" class="header-anchor">#</a> 스프링부트 테스트 핵심 기능</h3> <ul><li>의존성</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="springboottest-2"><a href="#springboottest-2" class="header-anchor">#</a> @SpringBootTest</h3> <blockquote><p>스프링부투에서는 @SpringBootTest 어노테이션을 통해 애플리케이션 테스트에 필요한 거의 모든 의존성들을 제공해준다.</p></blockquote> <blockquote><p>@SpringBootTest 어노테이션은 Spring Main Application(@SpringBootApplication)을 찾아가 하위의 모든 Bean을 Scan한다.</p></blockquote> <blockquote><p>그 후 Test용 Application Context를 만들면서 빈을 등록해주고, mock bean을 찾아가 그 빈만 mock bean으로 교체해준다.</p></blockquote> <h3 id="webenvironment"><a href="#webenvironment" class="header-anchor">#</a> WebEnvironment</h3> <ul><li>MOCK : mock servlet environment로 내장 톰캣 구동을 안한다.</li> <li>RANDOM_PORT, DEFINED_PORT : 내장 톰캣 사용</li> <li>NONE : 서블릿 환경 제공 안함</li></ul> <h4 id="_1-mock"><a href="#_1-mock" class="header-anchor">#</a> 1. MOCK</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span>MOCK<span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureMockMvc</span>
</code></pre></div><p>@RunWith(SpringRunner.class) 어노테이션은 JUnit이 내장된 Runner를 실행할 때 SpringRunner.class라는 확장된 클래스를 실행하라고 지시한다.</p> <p>테스트의 WebEnvironment 환경은 기본적으로 MOCK으로 잡혀있으며, 이 때 내장톰캣을 구동하지 않아 서블릿이 아니라 서블릿을 Mocking한 컨테이너가 뜬다.</p> <p>Mockup이된 서블릿과 interaction 하기 위해서는 MockMVC라는 클라이언트를 사용해야 한다.</p> <h4 id="_2-random-port"><a href="#_2-random-port" class="header-anchor">#</a> 2. RANDOM_PORT</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span>RANDOM_PORT<span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureMockMvc</span>
</code></pre></div><p>WebEnvironment가 RANDOM_PORT를 사용할 때 실제로 서블릿 컨테이너(내장 톰캣)이 랜덤한 포트로 뜬다. 이떄부터는 Test용 RestTemplate, Web Client를 사용한다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> testRestTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertThat</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token string">&quot;hello dsunni&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-mockbean"><a href="#_3-mockbean" class="header-anchor">#</a> 3. MockBean</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span>RANDOM_PORT<span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureMockMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ControllerTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">TestRestTemplate</span> testRestTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@MockBean</span>
    <span class="token class-name">TestService</span> mockTestService<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>@MockBean을 붙여서 mockTestService를 만들면 Application Context안에 TestService 빈을 mockTestService빈으로 교체한다. 실질적으로 원본이 아닌 mock bean을 사용해 테스트할 수 있다.</p> <h4 id="_4-webtestclient"><a href="#_4-webtestclient" class="header-anchor">#</a> 4. @WebTestClient</h4> <p>java5 Spring MVC WebFlux에 새로 추가된 Rest Client 중 하나이다. 기존에 사용하던 Rest Client는 Synchronous였다. 오청 하나 보내면 끝날때 까지 기다렸다가 요청을 보낼 수 있었다.</p> <p>WebTestClient는 Asynchronous하게 동작한다. 요청을 보내고 응답이 오면 그 떄 CallBackEvent가 발생해 실행할 수 있다.</p> <ul><li>의존성 추가</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-webflux<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">WebTestClient</span> webTestClient<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token function">when</span><span class="token punctuation">(</span>mockiService<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        webTestClient<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//request 만들어서</span>
          			<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span>								<span class="token comment">//보내고</span>
                <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		<span class="token comment">//검증</span>
                <span class="token punctuation">.</span><span class="token function">expectBody</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token string">&quot;hello test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>   
</code></pre></div><h3 id="슬라이스-테스트"><a href="#슬라이스-테스트" class="header-anchor">#</a> 슬라이스 테스트</h3> <p>레이어 별로 잘라서 테스트하고 싶을 때 사용. 레이어 별로 빈이 등록됨</p> <ul><li>@JsonTest</li> <li>@WebMvcTest</li> <li>@WebFluxTest</li> <li>@DataJpaTest</li></ul> <h3 id="테스트-유틸"><a href="#테스트-유틸" class="header-anchor">#</a> 테스트 유틸</h3> <ul><li>OutputCapture</li> <li>TestPropertyValues</li> <li>TestRestTemplate</li> <li>ConfigFileApplicationContextInitializer</li></ul></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">September 13, 2022 21:44</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: jaesungahn91@gmail.com" class="contributor">
          ahnjs
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/TIL/2023/1204/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        1204 ~ 1217
      </a></span> <span class="next"><a href="/TIL/2022/0110/">
        0110 - 0116
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/TIL/assets/js/app.5fb46d7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" defer></script><script src="/TIL/assets/js/page-0102-0109.d861648d.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" defer></script>
  </body>
</html>
