<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>0314 - 0320 | ahnjs TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Today I Learned">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.c9ce91a1.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5fb46d7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" as="script"><link rel="preload" href="/TIL/assets/js/page-0314-0320.a482c7e8.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" as="script"><link rel="prefetch" href="/TIL/assets/js/103.8c089b22.js"><link rel="prefetch" href="/TIL/assets/js/104.119134a5.js"><link rel="prefetch" href="/TIL/assets/js/layout-Blog.a086a7ca.js"><link rel="prefetch" href="/TIL/assets/js/layout-Layout.0945805f.js"><link rel="prefetch" href="/TIL/assets/js/layout-NotFound.9e898f41.js"><link rel="prefetch" href="/TIL/assets/js/layout-Slide.f940a7a7.js"><link rel="prefetch" href="/TIL/assets/js/page-0102-0109.d861648d.js"><link rel="prefetch" href="/TIL/assets/js/page-0102~0108.3f3ff8b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0109~0115.4c6b192d.js"><link rel="prefetch" href="/TIL/assets/js/page-0110-0116.feb84c5b.js"><link rel="prefetch" href="/TIL/assets/js/page-0116~0129.d55b06ca.js"><link rel="prefetch" href="/TIL/assets/js/page-0117-0123.7a6dce2f.js"><link rel="prefetch" href="/TIL/assets/js/page-0124-0206.ee32f254.js"><link rel="prefetch" href="/TIL/assets/js/page-0130~0205.df7a6a64.js"><link rel="prefetch" href="/TIL/assets/js/page-0206~0226.5da382f5.js"><link rel="prefetch" href="/TIL/assets/js/page-0211-0220.cd9bd482.js"><link rel="prefetch" href="/TIL/assets/js/page-0217-0221.1ed564ea.js"><link rel="prefetch" href="/TIL/assets/js/page-0221-0227.40b291d8.js"><link rel="prefetch" href="/TIL/assets/js/page-0222-0229.c4aa2b4d.js"><link rel="prefetch" href="/TIL/assets/js/page-0227~0305.164780e1.js"><link rel="prefetch" href="/TIL/assets/js/page-0228-0313.960c5eb2.js"><link rel="prefetch" href="/TIL/assets/js/page-0301-0307.8a2dd769.js"><link rel="prefetch" href="/TIL/assets/js/page-0306~0319.d7e1dd39.js"><link rel="prefetch" href="/TIL/assets/js/page-0308-0314.95d08be9.js"><link rel="prefetch" href="/TIL/assets/js/page-0315-0321.0bf22c5a.js"><link rel="prefetch" href="/TIL/assets/js/page-0320~0402.dc9cbbee.js"><link rel="prefetch" href="/TIL/assets/js/page-0321-0328.536bc991.js"><link rel="prefetch" href="/TIL/assets/js/page-0322-0328.5002c0f8.js"><link rel="prefetch" href="/TIL/assets/js/page-0329-0404.c6f98895.js"><link rel="prefetch" href="/TIL/assets/js/page-0329~0403.5b50aeae.js"><link rel="prefetch" href="/TIL/assets/js/page-0403~0423.db8f2eb4.js"><link rel="prefetch" href="/TIL/assets/js/page-0404~0410.6dd2170c.js"><link rel="prefetch" href="/TIL/assets/js/page-0405-0411.dfef4290.js"><link rel="prefetch" href="/TIL/assets/js/page-0411~0417.31e79aa4.js"><link rel="prefetch" href="/TIL/assets/js/page-0412-0418.aab597de.js"><link rel="prefetch" href="/TIL/assets/js/page-0418~0424.acb47103.js"><link rel="prefetch" href="/TIL/assets/js/page-0419-0425.bc1c1f3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0425~0501.63985992.js"><link rel="prefetch" href="/TIL/assets/js/page-0426-0502.d7a75a07.js"><link rel="prefetch" href="/TIL/assets/js/page-0502~0515.21ce942d.js"><link rel="prefetch" href="/TIL/assets/js/page-0503-0509.fb0660a5.js"><link rel="prefetch" href="/TIL/assets/js/page-0510-0516.00f7a787.js"><link rel="prefetch" href="/TIL/assets/js/page-0516~0529.c375a6ba.js"><link rel="prefetch" href="/TIL/assets/js/page-0517-0523.b1aa4a22.js"><link rel="prefetch" href="/TIL/assets/js/page-0523~0605.6e7cab56.js"><link rel="prefetch" href="/TIL/assets/js/page-0524-0530.8c92fe4f.js"><link rel="prefetch" href="/TIL/assets/js/page-0531-0606.e40cfd3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0606~0619.b2a4a63a.js"><link rel="prefetch" href="/TIL/assets/js/page-0607-0613.b7eaa930.js"><link rel="prefetch" href="/TIL/assets/js/page-0612.6d4d2838.js"><link rel="prefetch" href="/TIL/assets/js/page-0613.dfd2eb79.js"><link rel="prefetch" href="/TIL/assets/js/page-0614-0620.8c3b6db2.js"><link rel="prefetch" href="/TIL/assets/js/page-0614.c29fe08f.js"><link rel="prefetch" href="/TIL/assets/js/page-0621-0627.8b7cfba5.js"><link rel="prefetch" href="/TIL/assets/js/page-0627~0703.32c82c88.js"><link rel="prefetch" href="/TIL/assets/js/page-0628-0704.a12f4dd5.js"><link rel="prefetch" href="/TIL/assets/js/page-0705-0808.84dfa0c2.js"><link rel="prefetch" href="/TIL/assets/js/page-0711~0717.c1d09532.js"><link rel="prefetch" href="/TIL/assets/js/page-0718~0724.28a7589f.js"><link rel="prefetch" href="/TIL/assets/js/page-0725~0807.ef50582d.js"><link rel="prefetch" href="/TIL/assets/js/page-0807~0902.96994631.js"><link rel="prefetch" href="/TIL/assets/js/page-0808~0814.d656f648.js"><link rel="prefetch" href="/TIL/assets/js/page-0809-0815.348cc1c5.js"><link rel="prefetch" href="/TIL/assets/js/page-0815~0824.df5c5da0.js"><link rel="prefetch" href="/TIL/assets/js/page-0816-0822.87a87566.js"><link rel="prefetch" href="/TIL/assets/js/page-0822~0911.4867b37a.js"><link rel="prefetch" href="/TIL/assets/js/page-0823-0829.8bcfd48b.js"><link rel="prefetch" href="/TIL/assets/js/page-0830-0905.8b54a9e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0903~0910.f917d595.js"><link rel="prefetch" href="/TIL/assets/js/page-0906-0919.a1897d51.js"><link rel="prefetch" href="/TIL/assets/js/page-0911~0918.7dfbe6de.js"><link rel="prefetch" href="/TIL/assets/js/page-0912~0918.274ce7a6.js"><link rel="prefetch" href="/TIL/assets/js/page-0919~0925.e25dd9ff.js"><link rel="prefetch" href="/TIL/assets/js/page-0920-0926.22e5547a.js"><link rel="prefetch" href="/TIL/assets/js/page-0926~1002.d97a33b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0927-1003.cd544f10.js"><link rel="prefetch" href="/TIL/assets/js/page-1003~1009.b12a6f87.js"><link rel="prefetch" href="/TIL/assets/js/page-1004-1010.92ee8f8e.js"><link rel="prefetch" href="/TIL/assets/js/page-1010~1016.00b69211.js"><link rel="prefetch" href="/TIL/assets/js/page-1011-1017.c314b6aa.js"><link rel="prefetch" href="/TIL/assets/js/page-1017~1030.03e8572f.js"><link rel="prefetch" href="/TIL/assets/js/page-1018-1024.35384747.js"><link rel="prefetch" href="/TIL/assets/js/page-1025-1031.e5a2aad2.js"><link rel="prefetch" href="/TIL/assets/js/page-1031~1113.813912c9.js"><link rel="prefetch" href="/TIL/assets/js/page-1101-1107.e08121f1.js"><link rel="prefetch" href="/TIL/assets/js/page-1108-1114.14c10b7a.js"><link rel="prefetch" href="/TIL/assets/js/page-1113~1109.6ffeae7e.js"><link rel="prefetch" href="/TIL/assets/js/page-1114~1127.edbc49cd.js"><link rel="prefetch" href="/TIL/assets/js/page-1115-1124.248147ec.js"><link rel="prefetch" href="/TIL/assets/js/page-1122-1128.de82e713.js"><link rel="prefetch" href="/TIL/assets/js/page-1128~1211.ca0d6242.js"><link rel="prefetch" href="/TIL/assets/js/page-1129-1205.57233094.js"><link rel="prefetch" href="/TIL/assets/js/page-1204~1217.bfef77e0.js"><link rel="prefetch" href="/TIL/assets/js/page-1206-1212.100e1893.js"><link rel="prefetch" href="/TIL/assets/js/page-1212~0101.031e14d3.js"><link rel="prefetch" href="/TIL/assets/js/page-1213-1219.0e09712c.js"><link rel="prefetch" href="/TIL/assets/js/page-1220-1226.4cb62ec6.js"><link rel="prefetch" href="/TIL/assets/js/page-📖TodayILearned.7bda0772.js"><link rel="prefetch" href="/TIL/assets/js/vendors~photo-swipe.7980dd4b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.c9ce91a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/TIL/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">ahnjs TIL</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2023</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">2022</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2022/0102/" class="sidebar-link">0102 - 0109</a></li><li><a href="/TIL/2022/0110/" class="sidebar-link">0110 - 0116</a></li><li><a href="/TIL/2022/0117/" class="sidebar-link">0117 - 0123</a></li><li><a href="/TIL/2022/0124/" class="sidebar-link">0124 - 0206</a></li><li><a href="/TIL/2022/0211/" class="sidebar-link">0211 - 0220</a></li><li><a href="/TIL/2022/0221/" class="sidebar-link">0221 - 0227</a></li><li><a href="/TIL/2022/0228/" class="sidebar-link">0228 - 0313</a></li><li><a href="/TIL/2022/0314/" aria-current="page" class="active sidebar-link">0314 - 0320</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0314/#_0314-spring-boot-maven-plugin" class="sidebar-link">0314 - spring-boot-maven-plugin</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0314/#_0315-swagger-3-변경-사항" class="sidebar-link">0315 - swagger 3 변경 사항</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0314/#_0316-valid와-validated를-이용한-유효성-검증의-동작-원리-및-사용법-예시-1-2" class="sidebar-link">0316 - @Valid와 @Validated를 이용한 유효성 검증의 동작 원리 및 사용법 예시 (1/2)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0314/#_1-valid와-validated" class="sidebar-link heading3">1. @Valid와 @Validated</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0314/#valid와-validated-유효성-검증-차이" class="sidebar-link heading3">@Valid와 @Validated 유효성 검증 차이</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/0314/#_0320-커스텀-애노테이션-custom-annotation-로-직접-유효성-검사" class="sidebar-link">0320 - 커스텀 애노테이션(Custom Annotation)로 직접 유효성 검사</a></li></ul></li><li><a href="/TIL/2022/0321/" class="sidebar-link">0321 - 0328</a></li><li><a href="/TIL/2022/0328/" class="sidebar-link">0329 ~ 0403</a></li><li><a href="/TIL/2022/0404/" class="sidebar-link">0404 ~ 0410</a></li><li><a href="/TIL/2022/0411/" class="sidebar-link">0411 ~ 0417</a></li><li><a href="/TIL/2022/0418/" class="sidebar-link">0418 ~ 0424</a></li><li><a href="/TIL/2022/0425/" class="sidebar-link">0425 ~ 0501</a></li><li><a href="/TIL/2022/0502/" class="sidebar-link">0502 ~ 0515</a></li><li><a href="/TIL/2022/0516/" class="sidebar-link">0516 ~ 0529</a></li><li><a href="/TIL/2022/0523/" class="sidebar-link">0523 ~ 0605</a></li><li><a href="/TIL/2022/0606/" class="sidebar-link">0606 ~ 0619</a></li><li><a href="/TIL/2022/0627/" class="sidebar-link">0627 ~ 0703</a></li><li><a href="/TIL/2022/0711/" class="sidebar-link">0711 ~ 0717</a></li><li><a href="/TIL/2022/0718/" class="sidebar-link">0718 ~ 0724</a></li><li><a href="/TIL/2022/0725/" class="sidebar-link">0725 ~ 0807</a></li><li><a href="/TIL/2022/0808/" class="sidebar-link">0808 ~ 0814</a></li><li><a href="/TIL/2022/0815/" class="sidebar-link">0815 ~ 0824</a></li><li><a href="/TIL/2022/0822/" class="sidebar-link">0822 ~ 0911</a></li><li><a href="/TIL/2022/0912/" class="sidebar-link">0912 ~ 0918</a></li><li><a href="/TIL/2022/0919/" class="sidebar-link">0919 ~ 0925</a></li><li><a href="/TIL/2022/0926/" class="sidebar-link">0926 ~ 1002</a></li><li><a href="/TIL/2022/1003/" class="sidebar-link">1003 ~ 1009</a></li><li><a href="/TIL/2022/1010/" class="sidebar-link">1010 ~ 1016</a></li><li><a href="/TIL/2022/1017/" class="sidebar-link">1017 ~ 1030</a></li><li><a href="/TIL/2022/1031/" class="sidebar-link">1031 ~ 1113</a></li><li><a href="/TIL/2022/1114/" class="sidebar-link">1114 ~ 1127</a></li><li><a href="/TIL/2022/1128/" class="sidebar-link">1128 ~ 1211</a></li><li><a href="/TIL/2022/1212/" class="sidebar-link">1212 ~ 0101</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2021</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">0314 - 0320</span></h1> <div class="page-info"><!----> </div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/TIL/2022/0314/#_0314-spring-boot-maven-plugin" class="anchor-link heading2"><div>0314 - spring-boot-maven-plugin</div></a></li><li class="anchor"><a href="/TIL/2022/0314/#_0315-swagger-3-변경-사항" class="anchor-link heading2"><div>0315 - swagger 3 변경 사항</div></a></li><li class="anchor"><a href="/TIL/2022/0314/#_0316-valid와-validated를-이용한-유효성-검증의-동작-원리-및-사용법-예시-1-2" class="anchor-link heading2"><div>0316 - @Valid와 @Validated를 이용한 유효성 검증의 동작 원리 및 사용법 예시 (1/2)</div></a></li><li class="anchor"><a href="/TIL/2022/0314/#_1-valid와-validated" class="anchor-link heading3"><div>1. @Valid와 @Validated</div></a></li><li class="anchor"><a href="/TIL/2022/0314/#valid와-validated-유효성-검증-차이" class="anchor-link heading3"><div>@Valid와 @Validated 유효성 검증 차이</div></a></li><li class="anchor"><a href="/TIL/2022/0314/#_0320-커스텀-애노테이션-custom-annotation-로-직접-유효성-검사" class="anchor-link heading2"><div>0320 - 커스텀 애노테이션(Custom Annotation)로 직접 유효성 검사</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="_0314-0320"><a href="#_0314-0320" class="header-anchor">#</a> 0314 - 0320</h1> <h2 id="_0314-spring-boot-maven-plugin"><a href="#_0314-spring-boot-maven-plugin" class="header-anchor">#</a> 0314 - spring-boot-maven-plugin</h2> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>플러그인 등록 유무에 따른 jar파일 내의 META-INF/MANIFEST.MF 정보</p></blockquote> <ul><li>Main-Class : Springboot application이기 때문에 Main-Class의 Value에 Springboot의 org.springframework.boot.loader.JarLauncher로 지정</li> <li>Start-Class : 어플리케이션의 MainClass를 Start-Class의 Value에 정의한다.</li> <li>Spring-Boot-Classes : 컴파일된 class파일들이 위치한 경로를 정의한다.</li> <li>Spring-Boot-Lib : pom.xml에 추가한 의존하고 있는 라이브러리들이 위치한 경로를 정의한다.</li></ul> <p>위와 같은 정보들을 spring-boot-maven-plugin이 추가해준다.</p> <p>spring-boot-maven-plugin은 단순히 MANIFEST.MF에 추가적인 정보를 등록해주는 것만은 아니다. 이플러그인의 핵심은 패키징할 때 다음과 같이 실행 가능한 jar파일로 구조를 변경해준다. (spring-boot-maven-plugin은 BOOT-INF에 컴파일된 class파일을 두는 특이한 구조를 갖추고있다. 그리고 JarLauncher가 이 구조에 있는 class파일/jar파일을 로딩하는 역할을 한다.)</p> <br> <h2 id="_0315-swagger-3-변경-사항"><a href="#_0315-swagger-3-변경-사항" class="header-anchor">#</a> 0315 - swagger 3 변경 사항</h2> <ol><li>springdoc-openapi-ui 종속성 추가</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.6.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>annotations 변경</li></ol> <ul><li>@Api → @Tag</li> <li>@ApiIgnore → @Parameter(hidden = true) or @Operation(hidden = true) or @Hidden</li> <li>@ApiImplicitParam → @Parameter</li> <li>@ApiImplicitParams → @Parameters</li> <li>@ApiModel → @Schema</li> <li>@ApiModelProperty(hidden = true) → @Schema(accessMode = READ_ONLY)</li> <li>@ApiModelProperty → @Schema</li> <li>@ApiOperation(value = &quot;foo&quot;, notes = &quot;bar&quot;) → @Operation(summary = &quot;foo&quot;, description = &quot;bar&quot;)</li> <li>@ApiParam → @Parameter</li> <li>@ApiResponse(code = 404, message = &quot;foo&quot;) → @ApiResponse(responseCode = &quot;404&quot;, description = &quot;foo&quot;)</li></ul> <ol start="3"><li>config 변경</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">GroupedOpenApi</span> <span class="token function">publicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">GroupedOpenApi</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;springshop-public&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">&quot;/public/**&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">GroupedOpenApi</span> <span class="token function">adminApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">GroupedOpenApi</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;springshop-admin&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">&quot;/admin/**&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addMethodFilter</span><span class="token punctuation">(</span>method <span class="token operator">-&gt;</span> method<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Admin</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">springShopOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;SpringShop API&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;Spring shop sample application&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">&quot;v0.0.1&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;Apache 2.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&quot;http://springdoc.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">externalDocs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ExternalDocumentation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;SpringShop Wiki Documentation&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&quot;https://springshop.wiki.github.org/docs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>https://www.baeldung.com/spring-rest-openapi-documentation<br>
https://springdoc.org/</p> <br> <h2 id="_0316-valid와-validated를-이용한-유효성-검증의-동작-원리-및-사용법-예시-1-2"><a href="#_0316-valid와-validated를-이용한-유효성-검증의-동작-원리-및-사용법-예시-1-2" class="header-anchor">#</a> 0316 - @Valid와 @Validated를 이용한 유효성 검증의 동작 원리 및 사용법 예시 (1/2)</h2> <p>Spring으로 개발을 하다 보면 DTO 또는 객체를 검증해야 한다. 이를 별도의 검증 클래스로 만들어 사용할 수 있지만 간단한 검증의 경우에는 JSR 표준을 이용해 간견ㄹ하게 처리할 수 있따.</p> <h3 id="_1-valid와-validated"><a href="#_1-valid와-validated" class="header-anchor">#</a> 1. @Valid와 @Validated</h3> <h4 id="valid를-이용한-유효성-검증"><a href="#valid를-이용한-유효성-검증" class="header-anchor">#</a> [ @Valid를 이용한 유효성 검증 ]</h4> <h5 id="valid의-개념-및-사용법"><a href="#valid의-개념-및-사용법" class="header-anchor">#</a> &lt; @Valid의 개념 및 사용법 &gt;</h5> <p>@Valid는 JSR-303 표준 스펙으로써 <code>제약 조건이 부여된 객체에 대해 빈 검증기(Bean Validator)를 이용해서 검증하도록 지시하는 어노테이션</code>이다. Spring에서는 LocalValidatorFactoryBean을 이용해 JSR 표준의 검증 기능을 사용할 수 있는데, LocalValidatorFactoryBean은 JSR-303의 검증 기능을 이용할 수 있도록 해주는 일종의 어댑터에 해당한다.<br>
JSR 표준의 빈 검증 기술의 특징은 객체의 필드에 달린 제약조건 어노테이션을 참고해 검증을 편리하게 할 수 있다는 것이다. 이 빈 검증 기능을 이용하려면 LocalValidatorFactoryBean을 빈으로 등록하고 ValidationService를 제공해주어야 하는데, SpringBoot에서는 의존성만 추가하면 검증을 위한 빈들이 자동으로 등록된다.</p> <h5 id="valid의-동작-원리"><a href="#valid의-동작-원리" class="header-anchor">#</a> &lt; @Valid의 동작 원리 &gt;</h5> <p>모든 요청은 프론트 컨트롤러인 디스패처 서블릿을 통해 컨트롤러로 전달된다. 그리고 컨트롤러의 메소드 호출하는 과정에는 메소드의 값을 처리해주는 ArgumentResolver가 동작하는데, @Valid 역시 ArgumentResolver에 의해 처리가 된다.<br>
대표적으로 @RequestBody가 있는 경우에는 Json 메세지를 객체로 변환해주는 작업이 ArgumentResolver의 구현체인 RequestResponseBodyMethodProcessor가 처리하며, 이 내부에서 @Valid로 시작하는 어노테이션이 있을 경우에 유효성 검사를 진행한다. (이러한 이유로 @Valid가 ㅇ아니라 커스톰 어노테이션인 @Valid커스텀네임여도 동작한다.) 만약 ModelAttribute를 사용중이라면 ModelAttributeMethodProcessor에 의해 @Valid가 처리된다. 그리고 검증에 오류가 있다면 MethodArgumentNotValidException 예외가 발생하게 되고, 디스패처 서블릿에 기본으로 등록된 예외 리졸벼(Exception Resolver)인 DefaultHandlerExceptionResolver에 의해 400 BadRequest에러가 발생한다.</p> <p>이러한 이유로 @Valid는 기본적으로 컨트롤러에서만 동작하며 기본적으로 다른 계층에서는 검증이 되지 않는다. 다른 계층에서 파라미터를 검증하기 위해서는 @Validated와 결합되어야 한다.</p> <h4 id="validated를-이용한-유효성-검증"><a href="#validated를-이용한-유효성-검증" class="header-anchor">#</a> [ @Validated를 이용한 유효성 검증 ]</h4> <h5 id="validated의-개념-및-사용법"><a href="#validated의-개념-및-사용법" class="header-anchor">#</a> &lt; @Validated의 개념 및 사용법 &gt;</h5> <p>파라미터의 유효성 검증은 컨트롤러에서 처리하고 서비스나 레포지토리 계층에서는 유효성 검증을 하지 않는 것이 바람직하다. 하지만 개발을 진행하다보면 불가피하게 다른 곳에서 파라미터를 검증해야 할 수 있다.<br>
Spring에서는 이런 경우를 위해 <code>AOP기반으로 메소드를의 요청을 가로채서 유효성 검증을 진행</code> 할 수 있는 @Validated를 제공하고 있다. @Validated는 JSR 표준 기술이 아니며 Spring 프레임워크에서 제공하는 어노테이션 및 기능이다.<br>
다음과 같이 클래스 레벨에 @Validated를 붙여주고, 유효성을 검증할 메소드의 파라미터에 @Valid를 분여주면 유효성 검증이 진행된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Validated</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">UserRequestDto</span> userRequestDto<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="validated의-동작-원리"><a href="#validated의-동작-원리" class="header-anchor">#</a> &lt; @Validated의 동작 원리 &gt;</h5> <p>특정 ArgumentResolver에 의해 유효성 검사가 진행되었던 @Valid와 달리 @Validated는 AOP 기반으로 메소드 요청을 인터셉터하여 처리된다. @Validated를 클래스 레벨에 선언하면 해당 클래스에 유효성 검증을 위한 인터셉터가 등록된다. 그리고 해당 클래스의 메소드들이 호출될 때 AOP의 포인트 컷으로써 요청을 가로채서 인터셉터를 통해 유효성 검증을 진행한다 (물론 이러한 동작을 위해 @Validated가 붙은 클래스는 CGLib 기반으로 바이트 조작이 된다.)<br>
이러한 이유로 @Validated를 사용하면 컨트롤러, 서비스, 레포지토리 등 계층에 무관하게 스프링 빈이라면 유효성 검증을 진행할 수 있다. 물론 @Validated에 의한 예외 클래스도 다른데 @Valid에 의한 예외 클래스는 MethodArgumentNotValidException이며, @Validated에 의한 예외 클래스는 ConstrainViolationException이다. 이러한 정보를 알고 있으면 나중에 예외 처리를 할 때 도움이 된다.</p> <h5 id="validated의-또-다른-기능-유효성-검증-그룹의-지정"><a href="#validated의-또-다른-기능-유효성-검증-그룹의-지정" class="header-anchor">#</a> &lt; Validated의 또 다른 기능(유효성 검증 그룹의 지정) &gt;</h5> <p>객체를 검증하기 위한 방법이 클래스에 따라 달라질 수 있다. 예를 들면 일반 사용자의 요청과 관리자의 요청을 보내는 경우에 같은 객체로 요청이 오지만 다른 방식으로 검증해야 하는 경우이다. 이런 경우에는 검증에 사용할 제약 조건이 2가지로 나누어져야 한다.<br>
Spring에서는 이런 경우를 위해 제약 조건 어노테이션에 조건이 적용될 검증 그룹을 지정하여 적용할 수 있는 기능 역시 @Validated를 통해 제공하고 있다.<br>
검증 그룹을 지정하기 위해서는 (내용이 없는)마커 인터페이스를 간단히 정의해야 한다. 위의 예시의 경우에는 사용자인 경우와 관리자인 경우를 분리해야 하므로 다음과 같은 2개의 마커 인터페이스를 만들 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserValidationGroup</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AdminValidationGroup</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>그리고 해당 제약 조건이 적용될 그룸을 groups로 지정해줄 수 있다. 제약 조건이 적용될 그룹이 여러 개라면 {}를 이용해 그룹의 이름을 모두 넣어주면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">UserValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">AdminValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

<span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token class-name">UserValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> userId<span class="token punctuation">;</span>

<span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token class-name">AdminValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> adminId<span class="token punctuation">;</span>
</code></pre></div><p>그리고 컨트롤러에서도 다음과 같이 제약조건 검증을 적용할 클래스를 지정해주면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/add&quot;</span><span class="token punctuation">)</span> 
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">UserValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token class-name">UserRequestDto</span> userRequestDto<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>만약 위와 같이 UserValidationGroup을 @Validated의 파라미터로 넣어주었다면 UserValidationGroup에 해당하는 제약 조건만 검증이 된다. 만약 @Validated에 특정 마커를 지정해주지 않았거나, groups가 지정되어 있는데 @Valid를 이용한다면 다음과 같이 처리된다.</p> <ul><li>@Validated에 특정 클래스를 지정하지 않는 경우 : groups가 없는 속성들만 처리</li> <li>@Valid or @Valdated에 특정 클래스를 지정한 경우 : 지정된 클래스를 groups로 가진 제약사항만 처리</li></ul> <h4 id="다양한-제약-조건-어노테이션"><a href="#다양한-제약-조건-어노테이션" class="header-anchor">#</a> [ 다양한 제약 조건 어노테이션 ]</h4> <p>JSR 표준 스펙은 다양한 제약 조건 어노테이션을 제공하고 있는데, 대표적인 어노테이션으로는 다음과 같은 것들이 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>@NotNull: 해당 값이 null이 아닌지 검증함
@NotEmpty: 해당 값이 null이 아니고, 빈 스트링(&quot;&quot;) 아닌지 검증함(&quot; &quot;은 허용됨)
@NotBlank: 해당 값이 null이 아니고, 공백(&quot;&quot;과 &quot; &quot; 모두 포함)이 아닌지 검증함
@AssertTrue: 해당 값이 true인지 검증함
@Size: 해당 값이 주어진 값 사이에 해당하는지 검증함(String, Collection, Map, Array에도 적용 가능)
@Min: 해당 값이 주어진 값보다 작지 않은지 검증함
@Max: 해당 값이 주어진 값보다 크지 않은지 검증함
@Pattern: 해당 값이 주어진 패턴과 일치하는지 검증함
</code></pre></div><p>그 외에도 주어진 값이 이메일 형식에 해당하는지 검증하는 @Email 등 다양한 어노테이션을 제공하고 있는데, 필요한 어노테이션이 있는지는 <a href="https://javaee.github.io/javaee-spec/javadocs/javax/validation/constraints/package-summary.html" target="_blank" rel="noopener noreferrer">자바공식문서<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>를 참고하면 된다<br>
그 외에도 hibernate의 Validator는 해당 값이 URL인지를 검증하는 @URL 등과 같은 어노테이션을 제공하고 있다. 즉, 우리가 필요로 하는 대부분의 제약 사항 어노테이션은 이미 구현되어 있으므로 찾아서 활용한다.</p> <h3 id="valid와-validated-유효성-검증-차이"><a href="#valid와-validated-유효성-검증-차이" class="header-anchor">#</a> @Valid와 @Validated 유효성 검증 차이</h3> <h4 id="valid"><a href="#valid" class="header-anchor">#</a> @Valid</h4> <ul><li>JSR-303 자바 표준 스펙</li> <li>특정 ArgumentResolver를 통해 진행되어 컨트롤러 메소드의 유효성 검증만 가능</li> <li>유효성 검증에 실패할 경우 MethodArgmentNotValidException이 발생</li></ul> <h4 id="validated"><a href="#validated" class="header-anchor">#</a> @Validated</h4> <ul><li>자바 표준 스펙이 아닌 스프링 프레임워크가 제공</li> <li>AOP 기반으로 스프링 빈의 유효성 검증을 위해 사용되며 클래스에는 @Validated를, 메소드에는 @Valid를 붙여준다</li> <li>유효성 검증에 실패할 경우 ConstraintViolationException이 발생</li></ul> <p>별개로 Message Interpolator를 이용하면 유효성 검증이후 메세지를 다국어 처리 할 수 도 있다.</p> <p>https://mangkyu.tistory.com/174</p> <br> <h2 id="_0320-커스텀-애노테이션-custom-annotation-로-직접-유효성-검사"><a href="#_0320-커스텀-애노테이션-custom-annotation-로-직접-유효성-검사" class="header-anchor">#</a> 0320 - 커스텀 애노테이션(Custom Annotation)로 직접 유효성 검사</h2> <h4 id="검증을-위한-커스텀-어노테이션-생성"><a href="#검증을-위한-커스텀-어노테이션-생성" class="header-anchor">#</a> [ 검증을 위한 커스텀 어노테이션 생성 ]</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>FIELD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token class-name">PhoneValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;Invalid Phone&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>@Target({FIELD}) : 해당 어노테이션을 필드에만 선언 가능함</li> <li>@Retention(RUNTIME) : 해당 어노테이션이 유지되는 시간으로써 런타임까지 유효함</li> <li>@Constraint(validatedBy = PhoneValidator.class) : PhoneValidator를 통해 유효성 검사를 진행함</li> <li>@Documented : JavaDoc 생성시 Annotation에 대한 정보도 함께 생성</li></ul> <p>아래의 3가지 속성들은 JSR-303 표준 어노테이션등리 갖는 공통 속성들이다. 해당 속성들은 각각 다음의 역할을 한다.</p> <ul><li>message : 유효하지 않을 경우 반환할 메세지</li> <li>groups : 유효성 검증이 진행될 그룹</li> <li>payload : 유효성 검증 시에 전달할 메타 정보</li></ul> <h4 id="검증을-위한-validator-구현"><a href="#검증을-위한-validator-구현" class="header-anchor">#</a> [ 검증을 위한 Validator 구현 ]</h4> <p>구현할 Validator는 JSR에서 제공하는 javax.validation의 ConstraintValidator 인터페이스를 구현해주어야 한다. 해당 인터페이스는 다음과 같이 생성되어 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Annotation</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> 
    
    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token class-name">A</span> constraintAnnotation<span class="token punctuation">)</span> <span class="token punctuation">{</span> 

    <span class="token punctuation">}</span> 
    
    <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token punctuation">}</span>
</code></pre></div><p>위의 인터페이스는 2가지 제네릭 타입을 받고 있는데, 순서대로 적용될 어노테이션과 적용될 타입에 해당된다. 또한 ConstraintValidator가 갖는 메소드들은 각각 다음의 역할을 한다.</p> <ul><li>initialize : Valdator를 초기화하기 위한 메소드</li> <li>isValid : 유효성을 검증하는 메소드</li></ul> <p>intialize는 기본적으로 default 메소드로 구현되어 있으므로 초기화할 작업이 없다면 따로 구현해주지 않아도 된다. initialize는 isValid가 처음 호출될 때 1회 호출된다. isValid에는 우리가 검증할 로직을 구현주면 된다.<br>
이제 연락처를 검증하기 위한 Validator를 구현하면 다음과 같다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneValidator</span> <span class="token keyword">implements</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\d{3}-\\d{4}-\\d{4}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 예제</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> matcher<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">September 13, 2022 21:44</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: jaesungahn91@gmail.com" class="contributor">
          ahnjs
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/TIL/2022/0228/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        0228 - 0313
      </a></span> <span class="next"><a href="/TIL/2022/0321/">
        0321 - 0328
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/TIL/assets/js/app.5fb46d7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" defer></script><script src="/TIL/assets/js/page-0314-0320.a482c7e8.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" defer></script>
  </body>
</html>
