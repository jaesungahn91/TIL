<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1010 ~ 1016 | ahnjs TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Today I Learned">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.c9ce91a1.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5fb46d7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" as="script"><link rel="preload" href="/TIL/assets/js/page-1010~1016.00b69211.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" as="script"><link rel="prefetch" href="/TIL/assets/js/103.8c089b22.js"><link rel="prefetch" href="/TIL/assets/js/104.119134a5.js"><link rel="prefetch" href="/TIL/assets/js/layout-Blog.a086a7ca.js"><link rel="prefetch" href="/TIL/assets/js/layout-Layout.0945805f.js"><link rel="prefetch" href="/TIL/assets/js/layout-NotFound.9e898f41.js"><link rel="prefetch" href="/TIL/assets/js/layout-Slide.f940a7a7.js"><link rel="prefetch" href="/TIL/assets/js/page-0102-0109.d861648d.js"><link rel="prefetch" href="/TIL/assets/js/page-0102~0108.3f3ff8b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0109~0115.4c6b192d.js"><link rel="prefetch" href="/TIL/assets/js/page-0110-0116.feb84c5b.js"><link rel="prefetch" href="/TIL/assets/js/page-0116~0129.d55b06ca.js"><link rel="prefetch" href="/TIL/assets/js/page-0117-0123.7a6dce2f.js"><link rel="prefetch" href="/TIL/assets/js/page-0124-0206.ee32f254.js"><link rel="prefetch" href="/TIL/assets/js/page-0130~0205.df7a6a64.js"><link rel="prefetch" href="/TIL/assets/js/page-0206~0226.5da382f5.js"><link rel="prefetch" href="/TIL/assets/js/page-0211-0220.cd9bd482.js"><link rel="prefetch" href="/TIL/assets/js/page-0217-0221.1ed564ea.js"><link rel="prefetch" href="/TIL/assets/js/page-0221-0227.40b291d8.js"><link rel="prefetch" href="/TIL/assets/js/page-0222-0229.c4aa2b4d.js"><link rel="prefetch" href="/TIL/assets/js/page-0227~0305.164780e1.js"><link rel="prefetch" href="/TIL/assets/js/page-0228-0313.960c5eb2.js"><link rel="prefetch" href="/TIL/assets/js/page-0301-0307.8a2dd769.js"><link rel="prefetch" href="/TIL/assets/js/page-0306~0319.d7e1dd39.js"><link rel="prefetch" href="/TIL/assets/js/page-0308-0314.95d08be9.js"><link rel="prefetch" href="/TIL/assets/js/page-0314-0320.a482c7e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0315-0321.0bf22c5a.js"><link rel="prefetch" href="/TIL/assets/js/page-0320~0402.dc9cbbee.js"><link rel="prefetch" href="/TIL/assets/js/page-0321-0328.536bc991.js"><link rel="prefetch" href="/TIL/assets/js/page-0322-0328.5002c0f8.js"><link rel="prefetch" href="/TIL/assets/js/page-0329-0404.c6f98895.js"><link rel="prefetch" href="/TIL/assets/js/page-0329~0403.5b50aeae.js"><link rel="prefetch" href="/TIL/assets/js/page-0403~0423.db8f2eb4.js"><link rel="prefetch" href="/TIL/assets/js/page-0404~0410.6dd2170c.js"><link rel="prefetch" href="/TIL/assets/js/page-0405-0411.dfef4290.js"><link rel="prefetch" href="/TIL/assets/js/page-0411~0417.31e79aa4.js"><link rel="prefetch" href="/TIL/assets/js/page-0412-0418.aab597de.js"><link rel="prefetch" href="/TIL/assets/js/page-0418~0424.acb47103.js"><link rel="prefetch" href="/TIL/assets/js/page-0419-0425.bc1c1f3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0425~0501.63985992.js"><link rel="prefetch" href="/TIL/assets/js/page-0426-0502.d7a75a07.js"><link rel="prefetch" href="/TIL/assets/js/page-0502~0515.21ce942d.js"><link rel="prefetch" href="/TIL/assets/js/page-0503-0509.fb0660a5.js"><link rel="prefetch" href="/TIL/assets/js/page-0510-0516.00f7a787.js"><link rel="prefetch" href="/TIL/assets/js/page-0516~0529.c375a6ba.js"><link rel="prefetch" href="/TIL/assets/js/page-0517-0523.b1aa4a22.js"><link rel="prefetch" href="/TIL/assets/js/page-0523~0605.6e7cab56.js"><link rel="prefetch" href="/TIL/assets/js/page-0524-0530.8c92fe4f.js"><link rel="prefetch" href="/TIL/assets/js/page-0531-0606.e40cfd3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0606~0619.b2a4a63a.js"><link rel="prefetch" href="/TIL/assets/js/page-0607-0613.b7eaa930.js"><link rel="prefetch" href="/TIL/assets/js/page-0612.6d4d2838.js"><link rel="prefetch" href="/TIL/assets/js/page-0613.dfd2eb79.js"><link rel="prefetch" href="/TIL/assets/js/page-0614-0620.8c3b6db2.js"><link rel="prefetch" href="/TIL/assets/js/page-0614.c29fe08f.js"><link rel="prefetch" href="/TIL/assets/js/page-0621-0627.8b7cfba5.js"><link rel="prefetch" href="/TIL/assets/js/page-0627~0703.32c82c88.js"><link rel="prefetch" href="/TIL/assets/js/page-0628-0704.a12f4dd5.js"><link rel="prefetch" href="/TIL/assets/js/page-0705-0808.84dfa0c2.js"><link rel="prefetch" href="/TIL/assets/js/page-0711~0717.c1d09532.js"><link rel="prefetch" href="/TIL/assets/js/page-0718~0724.28a7589f.js"><link rel="prefetch" href="/TIL/assets/js/page-0725~0807.ef50582d.js"><link rel="prefetch" href="/TIL/assets/js/page-0807~0902.96994631.js"><link rel="prefetch" href="/TIL/assets/js/page-0808~0814.d656f648.js"><link rel="prefetch" href="/TIL/assets/js/page-0809-0815.348cc1c5.js"><link rel="prefetch" href="/TIL/assets/js/page-0815~0824.df5c5da0.js"><link rel="prefetch" href="/TIL/assets/js/page-0816-0822.87a87566.js"><link rel="prefetch" href="/TIL/assets/js/page-0822~0911.4867b37a.js"><link rel="prefetch" href="/TIL/assets/js/page-0823-0829.8bcfd48b.js"><link rel="prefetch" href="/TIL/assets/js/page-0830-0905.8b54a9e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0903~0910.f917d595.js"><link rel="prefetch" href="/TIL/assets/js/page-0906-0919.a1897d51.js"><link rel="prefetch" href="/TIL/assets/js/page-0911~0918.7dfbe6de.js"><link rel="prefetch" href="/TIL/assets/js/page-0912~0918.274ce7a6.js"><link rel="prefetch" href="/TIL/assets/js/page-0919~0925.e25dd9ff.js"><link rel="prefetch" href="/TIL/assets/js/page-0920-0926.22e5547a.js"><link rel="prefetch" href="/TIL/assets/js/page-0926~1002.d97a33b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0927-1003.cd544f10.js"><link rel="prefetch" href="/TIL/assets/js/page-1003~1009.b12a6f87.js"><link rel="prefetch" href="/TIL/assets/js/page-1004-1010.92ee8f8e.js"><link rel="prefetch" href="/TIL/assets/js/page-1011-1017.c314b6aa.js"><link rel="prefetch" href="/TIL/assets/js/page-1017~1030.03e8572f.js"><link rel="prefetch" href="/TIL/assets/js/page-1018-1024.35384747.js"><link rel="prefetch" href="/TIL/assets/js/page-1025-1031.e5a2aad2.js"><link rel="prefetch" href="/TIL/assets/js/page-1031~1113.813912c9.js"><link rel="prefetch" href="/TIL/assets/js/page-1101-1107.e08121f1.js"><link rel="prefetch" href="/TIL/assets/js/page-1108-1114.14c10b7a.js"><link rel="prefetch" href="/TIL/assets/js/page-1113~1109.6ffeae7e.js"><link rel="prefetch" href="/TIL/assets/js/page-1114~1127.edbc49cd.js"><link rel="prefetch" href="/TIL/assets/js/page-1115-1124.248147ec.js"><link rel="prefetch" href="/TIL/assets/js/page-1122-1128.de82e713.js"><link rel="prefetch" href="/TIL/assets/js/page-1128~1211.ca0d6242.js"><link rel="prefetch" href="/TIL/assets/js/page-1129-1205.57233094.js"><link rel="prefetch" href="/TIL/assets/js/page-1204~1217.bfef77e0.js"><link rel="prefetch" href="/TIL/assets/js/page-1206-1212.100e1893.js"><link rel="prefetch" href="/TIL/assets/js/page-1212~0101.031e14d3.js"><link rel="prefetch" href="/TIL/assets/js/page-1213-1219.0e09712c.js"><link rel="prefetch" href="/TIL/assets/js/page-1220-1226.4cb62ec6.js"><link rel="prefetch" href="/TIL/assets/js/page-📖TodayILearned.7bda0772.js"><link rel="prefetch" href="/TIL/assets/js/vendors~photo-swipe.7980dd4b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.c9ce91a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/TIL/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">ahnjs TIL</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2023</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">2022</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2022/0102/" class="sidebar-link">0102 - 0109</a></li><li><a href="/TIL/2022/0110/" class="sidebar-link">0110 - 0116</a></li><li><a href="/TIL/2022/0117/" class="sidebar-link">0117 - 0123</a></li><li><a href="/TIL/2022/0124/" class="sidebar-link">0124 - 0206</a></li><li><a href="/TIL/2022/0211/" class="sidebar-link">0211 - 0220</a></li><li><a href="/TIL/2022/0221/" class="sidebar-link">0221 - 0227</a></li><li><a href="/TIL/2022/0228/" class="sidebar-link">0228 - 0313</a></li><li><a href="/TIL/2022/0314/" class="sidebar-link">0314 - 0320</a></li><li><a href="/TIL/2022/0321/" class="sidebar-link">0321 - 0328</a></li><li><a href="/TIL/2022/0328/" class="sidebar-link">0329 ~ 0403</a></li><li><a href="/TIL/2022/0404/" class="sidebar-link">0404 ~ 0410</a></li><li><a href="/TIL/2022/0411/" class="sidebar-link">0411 ~ 0417</a></li><li><a href="/TIL/2022/0418/" class="sidebar-link">0418 ~ 0424</a></li><li><a href="/TIL/2022/0425/" class="sidebar-link">0425 ~ 0501</a></li><li><a href="/TIL/2022/0502/" class="sidebar-link">0502 ~ 0515</a></li><li><a href="/TIL/2022/0516/" class="sidebar-link">0516 ~ 0529</a></li><li><a href="/TIL/2022/0523/" class="sidebar-link">0523 ~ 0605</a></li><li><a href="/TIL/2022/0606/" class="sidebar-link">0606 ~ 0619</a></li><li><a href="/TIL/2022/0627/" class="sidebar-link">0627 ~ 0703</a></li><li><a href="/TIL/2022/0711/" class="sidebar-link">0711 ~ 0717</a></li><li><a href="/TIL/2022/0718/" class="sidebar-link">0718 ~ 0724</a></li><li><a href="/TIL/2022/0725/" class="sidebar-link">0725 ~ 0807</a></li><li><a href="/TIL/2022/0808/" class="sidebar-link">0808 ~ 0814</a></li><li><a href="/TIL/2022/0815/" class="sidebar-link">0815 ~ 0824</a></li><li><a href="/TIL/2022/0822/" class="sidebar-link">0822 ~ 0911</a></li><li><a href="/TIL/2022/0912/" class="sidebar-link">0912 ~ 0918</a></li><li><a href="/TIL/2022/0919/" class="sidebar-link">0919 ~ 0925</a></li><li><a href="/TIL/2022/0926/" class="sidebar-link">0926 ~ 1002</a></li><li><a href="/TIL/2022/1003/" class="sidebar-link">1003 ~ 1009</a></li><li><a href="/TIL/2022/1010/" aria-current="page" class="active sidebar-link">1010 ~ 1016</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#_1011-생성자-바인딩-constructor-binding-로-프로퍼티-properties-설정-값-불러오기" class="sidebar-link">1011 - 생성자 바인딩(Constructor Binding)로 프로퍼티(Properties) 설정 값 불러오기</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#_1012-불변-객체-immutable-object-및-final을-사용해야-하는-이유" class="sidebar-link">1012 - 불변 객체(Immutable Object) 및 final을 사용해야 하는 이유</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#_1-불변-객체-immutable-object-및-final을-사용해야-하는-이유" class="sidebar-link heading3">1. 불변 객체(Immutable Object) 및 final을 사용해야 하는 이유</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#_2-java에서-불변-객체를-생성하는-법" class="sidebar-link heading3">2. Java에서 불변 객체를 생성하는 법</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#_1013-configurationpropertiesscan" class="sidebar-link">1013 - @ConfigurationPropertiesScan</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#enableconfigurationproperties의-한계점" class="sidebar-link heading3">[ @EnableConfigurationProperties의 한계점 ]</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#configurationpropertiesscan의-사용법" class="sidebar-link heading3">[ @ConfigurationPropertiesScan의 사용법 ]</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/1010/#_1015-인덱스-생성전략" class="sidebar-link">1015 - 인덱스 생성전략</a></li></ul></li><li><a href="/TIL/2022/1017/" class="sidebar-link">1017 ~ 1030</a></li><li><a href="/TIL/2022/1031/" class="sidebar-link">1031 ~ 1113</a></li><li><a href="/TIL/2022/1114/" class="sidebar-link">1114 ~ 1127</a></li><li><a href="/TIL/2022/1128/" class="sidebar-link">1128 ~ 1211</a></li><li><a href="/TIL/2022/1212/" class="sidebar-link">1212 ~ 0101</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2021</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">1010 ~ 1016</span></h1> <div class="page-info"><!----> </div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/TIL/2022/1010/#_1011-생성자-바인딩-constructor-binding-로-프로퍼티-properties-설정-값-불러오기" class="anchor-link heading2"><div>1011 - 생성자 바인딩(Constructor Binding)로 프로퍼티(Properties) 설정 값 불러오기</div></a></li><li class="anchor"><a href="/TIL/2022/1010/#_1012-불변-객체-immutable-object-및-final을-사용해야-하는-이유" class="anchor-link heading2"><div>1012 - 불변 객체(Immutable Object) 및 final을 사용해야 하는 이유</div></a></li><li class="anchor"><a href="/TIL/2022/1010/#_1-불변-객체-immutable-object-및-final을-사용해야-하는-이유" class="anchor-link heading3"><div>1. 불변 객체(Immutable Object) 및 final을 사용해야 하는 이유</div></a></li><li class="anchor"><a href="/TIL/2022/1010/#_2-java에서-불변-객체를-생성하는-법" class="anchor-link heading3"><div>2. Java에서 불변 객체를 생성하는 법</div></a></li><li class="anchor"><a href="/TIL/2022/1010/#_1013-configurationpropertiesscan" class="anchor-link heading2"><div>1013 - @ConfigurationPropertiesScan</div></a></li><li class="anchor"><a href="/TIL/2022/1010/#enableconfigurationproperties의-한계점" class="anchor-link heading3"><div>[ @EnableConfigurationProperties의 한계점 ]</div></a></li><li class="anchor"><a href="/TIL/2022/1010/#configurationpropertiesscan의-사용법" class="anchor-link heading3"><div>[ @ConfigurationPropertiesScan의 사용법 ]</div></a></li><li class="anchor"><a href="/TIL/2022/1010/#_1015-인덱스-생성전략" class="anchor-link heading2"><div>1015 - 인덱스 생성전략</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="_1010-1016"><a href="#_1010-1016" class="header-anchor">#</a> 1010 ~ 1016</h1> <h2 id="_1011-생성자-바인딩-constructor-binding-로-프로퍼티-properties-설정-값-불러오기"><a href="#_1011-생성자-바인딩-constructor-binding-로-프로퍼티-properties-설정-값-불러오기" class="header-anchor">#</a> 1011 - 생성자 바인딩(Constructor Binding)로 프로퍼티(Properties) 설정 값 불러오기</h2> <h4 id="생성자로-바인딩하기-constructorbinding"><a href="#생성자로-바인딩하기-constructorbinding" class="header-anchor">#</a> [ 생성자로 바인딩하기(@ConstructorBinding) ]</h4> <ul><li>설정파일</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>h2<span class="token punctuation">.</span></span>Driver</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc<span class="token operator">:</span>h2<span class="token operator">:</span>mem<span class="token operator">:</span>db<span class="token punctuation">;</span>DB_CLOSE_DELAY<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>h2test
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span>h2test
</code></pre></div><ul><li>생상자를 이용해 properties의 값을 바인딩하도록 @ConstructorBinding 어노테이션을 추가</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConstructorBinding</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSourceProperties</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> driverClassName<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="_1012-불변-객체-immutable-object-및-final을-사용해야-하는-이유"><a href="#_1012-불변-객체-immutable-object-및-final을-사용해야-하는-이유" class="header-anchor">#</a> 1012 - 불변 객체(Immutable Object) 및 final을 사용해야 하는 이유</h2> <h3 id="_1-불변-객체-immutable-object-및-final을-사용해야-하는-이유"><a href="#_1-불변-객체-immutable-object-및-final을-사용해야-하는-이유" class="header-anchor">#</a> 1. 불변 객체(Immutable Object) 및 final을 사용해야 하는 이유</h3> <h4 id="불변-객체-immutable-object-란"><a href="#불변-객체-immutable-object-란" class="header-anchor">#</a> [ 불변 객체(Immutable Object)란? ]</h4> <p>불변 객체란 객체 생성 이후 내부의 상태가 변하지 않는 객체이다. 불변 객체는 read-only 메소드만을 제공하며, 객체의 내부 상태를 제공하는 메소드를 제공하지 않거나 방어적 복사(defensive-copy)를 통해 제공한다. Java의 대표적인 불변 객체로는 String이 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;Old&quot;</span><span class="token punctuation">;</span>
name<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'E'</span><span class="token punctuation">;</span>
</code></pre></div><p>Java의 String은 불변 클래스이기 떄문에 위와 같이 String 내부의 char형 배열을 얻어 수정하여도 반영되지 않는다. Java에서는 배열이나 객체 등의 참조(Reference)를 전달한다. 그렇기 때문에 참조를 통해 값을 수정하면 내부의 상태가 변하기 때문에 내부를 복사하여 전달하고 있는데, 이를 방어적 복사(defensive-copy)라고 한다. String의 toCharArray는 다음과 같이 복사하여 전달하고 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Cannot use Arrays.copyOf because of class initialization order issues</span>
    <span class="token keyword">char</span> result<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>value<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="불변-객체-및-final을-사용해야-하는-이유"><a href="#불변-객체-및-final을-사용해야-하는-이유" class="header-anchor">#</a> [ 불변 객체 및 final을 사용해야 하는 이유 ]</h4> <blockquote><p>Thread-Safe하여 병렬 프로그래밍에 유용하며, 동기화를 고려하지 않아도 된다.</p></blockquote> <ul><li>멀티 쓰레드 환경에서 동기화 문제가 발생하는 이유는 공유 자원에 동시에 쓰기(Write) 때문이다. 하지만 만약 공유 자원이 불변이라면 항상 동일한 값을 반환하기 때문에 동기화를 고려하지 않아도 된다. 이는 안정성을 보장할 뿐만 아니라 동기화를 하지 않음으로써 성능상의 이점도 가져다준다.</li></ul> <blockquote><p>실패 원자적인(Failure Atomic) 메소드를 만들 수 있다.</p></blockquote> <ul><li>가변 객체를 통해 작업을 하는 도중 예외가 발생하면 해당 객체가 불안정한 상태에 빠질 수 있고, 불안정한 상태를 갖는 객체는 또 다른 에러를 유발할 수 있다. 하지만 불변 객체라면 어떠한 예외가 발생하여도 메소드 호출 전의 상태를 유지할 수 있을 것이다. 그리고 예외가 발생하여도 오류가 발생하지 않은 것 처럼 다음 로직을 처리할 수 있다.</li></ul> <blockquote><p>Cache나 Map 또는 Set 등의 요소로 활용하기에 더욱 적합하다.</p></blockquote> <ul><li>만약 캐시나 Map, Set 등의 원소인 가변 객체가 변경되었다면 이를 갱신하는 등의 부가 작업이 필요할 것이다. 하지만 불변 객체라면 한 번 데이터가 저장된 이후에 다른 작업들을 고려하지 않아도 되므로 사용하는데 용이하게 작용할 것이다.</li></ul> <blockquote><p>부수 효과(Side Effect)를 피해 오류가능성을 최소화할 수 있다.</p></blockquote> <ul><li>부수 효과란 변수의 값이나 상태 등의 변화가 발생하는 효과를 의미한다. 만약 객체의 수정자(Setter)를 통해 여러 객체들에서 값을 변경한다면 객체의 상태를 예측하기 어려워질 것이다. 바뀐 상태를 파악하기 위해서는 메소드들을 살펴보아야 하고, 이는 유지보수성을 상당히 떨어뜨린다. 그래서 이러한 부수효과가 없는 순수 함수들을 만드는 것이 상당히 중요하다. 불변 객체는 기본적으로 값의 수정이 불가능하기 때문에 변경 가능성이 적으며, 객체의 생성과 사용이 상당히 제한된다. 그렇기 때문에 메소드들은 자연스럽게 순수 함수들로 구성될 것이고, 다른 메소드가 호출되어도 객체의 상태가 유지되기 때문에 안전하게 객체를 다시 사용할 수 있다. 이러한 불변 객체는 오류를 줄여 유지보수성이 높은 코드를 작성하도록 도와줄 것이다.</li></ul> <blockquote><p>다른 사람이 작성한 함수를 예측가능하며 안전하게 사용할 수 있다.</p></blockquote> <ul><li>일반적으로 개발은 다른 사람들과 협업을 하게 된다. 불변성(Immutability)은 협업 과정에서도 도움을 주는데, 불변성이 보장된 함수라면 다른 사람이 개발한 함수를 위험없이 이용할 수 있다. 마찬가지로 다른 사람도 내가 작성한 메소드를 호출하여도, 값이 변하지 않음을 보장받을 수 있다. 그렇기에 우리는 변경에 대한 불안없이 다른 사람의 코드를 이용할 수 있다. 또한 불필요한 시간을 절약할 수도 있다.</li></ul> <blockquote><p>가비지 컬렉션의 성능을 높일 수 있다.</p></blockquote> <ul><li>불변성의 많은 이점 중에서 많은 사람들이 놓치는 것이 바로 GC성능을 높여준다는 것이다. 불변의 객체는 한번 생성된 이후에 수정이 불가능한 객체로, Java에서는 final 키워드를 사용하여 불변의 객체를 생성할 수 있다. 이렇게 객체를 생성하기 위해서는 객체를 가지는 또 다른 컨테이너 객체(ImmutableHolder)도 존재한다는 것인데, 당연히 불변의 객체(Object value)가 먼저 생성되어야 컨테이너 객체가 이를 참조할 수 있을 것이다. 즉, 컨테이너는 컨테이너가 참조하는 가장 젊은 객체들보다 더 젊다는 것(늦게 생성되었다는 것)이다. 이를 정리하면 다음과 같다.
<ul><li>Object 타입의 value 객체 생성</li> <li>ImmutableHolder 타입의 컨테이너 객체 생성</li> <li>ImmutableHolder가 value 객체를 참조</li></ul></li></ul> <p>이러한 점은 GC가 수행될 때, 가비지 컬렉터가 컨테이너 객체 하위의 불변 객체들은 Skip할 수 있도록 도와준다. 왜냐하면 해당 컨테이너 객체가 살아있다는 것은 하위의 불변 객체들(value) 역시 처음에 할당된 상태로 참조되고 있음을 의미하기 때문이다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MutableHolder</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> value<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span> value <span class="token operator">=</span> o<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImmutableHolder</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> value<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">ImmutableHolder</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span> value <span class="token operator">=</span> o<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createHolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. Object 타입의 value 객체 생성</span>
    <span class="token keyword">final</span> <span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token string">&quot;MangKyu&quot;</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2. Immutable 생성 및 값 참조</span>
    <span class="token keyword">final</span> <span class="token class-name">ImmutableHolder</span> holder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImmutableHolder</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p>결국 불변의 객체를 활용하면 가비지 컬렉터가 스캔해야 되는 객체의 수가 줄어서 스캔해야 하는 메모리 영역과 빈도수 역시 줄어들 것이고, GC가 수행되어도 지연 시간을 줄일 수 있을 것이다. 그렇기 때문에 필드값을 수정할 수 있는 MutableHolder보다는 필드값을 수정할 수 없는 ImmutableHolder를 사용하는 것이 좋다.</p> <h3 id="_2-java에서-불변-객체를-생성하는-법"><a href="#_2-java에서-불변-객체를-생성하는-법" class="header-anchor">#</a> 2. Java에서 불변 객체를 생성하는 법</h3> <h4 id="final-키워드"><a href="#final-키워드" class="header-anchor">#</a> [ final 키워드 ]</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;Old&quot;</span><span class="token punctuation">;</span>
name <span class="token operator">=</span> <span class="token string">&quot;New&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// 컴파일 에러 </span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 가능</span>
</code></pre></div><ul><li>이를 방지하려면 불변 클래스로 생성해야함</li></ul> <h4 id="불변-클래스-예시"><a href="#불변-클래스-예시" class="header-anchor">#</a> [ 불변 클래스 예시 ]</h4> <p>Java에서 불변 객체를 생성하기 위해서는 다음과 같은 규칙에 따라서 클래스를 생성한다.</p> <ol><li>클래스를 final로 선언하라</li> <li>모든 클래스 변수를 private와 final로 선언하라</li> <li>객체를 생성하기 위한 생성자 또는 정적 팩토리 메소드를 추가하라</li> <li>참조에 의해 변경가능성이 있는 경우 방어적 복사를 이용하여 전달하라</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">ImmutableClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ImmutableClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ImmutableClass</span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ImmutableClass</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>클래스들은 가변적이여야 하는 매우 타당한 이유가 있지 않는 한 반드시 불변으로 만들어야 한다. 만약 클래스를 불변으로 &gt; 만드는 것이 불가능하다면, 가능한 변경 가능성을 최소화하라. - Effective Java -</p></blockquote> <h2 id="_1013-configurationpropertiesscan"><a href="#_1013-configurationpropertiesscan" class="header-anchor">#</a> 1013 - @ConfigurationPropertiesScan</h2> <p>@EnableConfigurationProperties에 등록해야 하는 클래스들이 많은 경우에는 일일이 등록하는게 번거로울 수 있다.</p> <h3 id="enableconfigurationproperties의-한계점"><a href="#enableconfigurationproperties의-한계점" class="header-anchor">#</a> [ @EnableConfigurationProperties의 한계점 ]</h3> <p>@EnableConfigurationProperties를 이용해 설정 프로퍼티 클래스(@Configuration Properties)를 사용하는 경우에는 해당 클래스들이 많아질 경우에 코드가 상당히 무거워지는 한계가 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">InfluxProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>SpringBoot 2.2부터는 이러한 문제점들을 해결하기 위해 @ConfigurationPropertiesScan 이라는 어노테이션을 제공하고 있다.</p> <h3 id="configurationpropertiesscan의-사용법"><a href="#configurationpropertiesscan의-사용법" class="header-anchor">#</a> [ @ConfigurationPropertiesScan의 사용법 ]</h3> <p>@ConfigurationPropertiesScan 어노테이션은 @ComponentScan과 상당히 유사하다.<br>
@ConfigurationPropertiesScan 어노테이션은 패키지를 기반으로 @ConfigurationProperties가 등록된 클래스들을 찾아 값들을 주입하고 빈으로 등록해준다. @ConfigurationPropertiesScan에 스캔을 실행할 패키지 또는 클래스를 지정해줄 수 있으며, 만약 별도로 지정하지 않는다면 해당 어노테이션이 붙은 패키지와 그 하위 패키지에 대해 스캔을 진행한다. @Component나 그 하위 어노테이션(@Configuration 등)이 붙은 클래스들은 @ConfigurationPropertiesScan에 의해 스캔되지 않는다.<br>
일반적으로 Spring Boot의 메인 클래스에 @ConfigurationPropertiesScan 어노테이션을 다음과 같이 추가해주고, 필요한 경우 Base Package를 지정해준다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConfigurationPropertiesScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.mang.atdd.membership&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="_1015-인덱스-생성전략"><a href="#_1015-인덱스-생성전략" class="header-anchor">#</a> 1015 - 인덱스 생성전략</h2> <h4 id="인덱스-선정-기준"><a href="#인덱스-선정-기준" class="header-anchor">#</a> [ 인덱스 선정 기준 ]</h4> <ul><li>모든 액세스 형태와 분석을 토대로이상적인 컬럼 구성과 순서 결정을 통해 최소의 인덱스로 모든 액세스 형태를 만족할 수 있도록 해야한다.</li> <li>가능한 실측자료(액세스 형태 수집, 분석, 액세스의 빈도, 처리범위의 크기, 분포도, 테이블의 크기, 액세스 유형 등)를 활용하여 종합적으로 전략적인 결정을 해야한다.</li> <li>여기서 분포도란 쉽게 말해 사용 빈도로 이해를 하면 된다. 즉, 분포도가 좋다는 의미는 한 컬럼에 해당하는 값이 희소성이 높다는 뜻이다.</li></ul> <h4 id="저장용-대형-테이블-적용-기준"><a href="#저장용-대형-테이블-적용-기준" class="header-anchor">#</a> [ 저장용 대형 테이블 적용 기준 ]</h4> <ul><li>로그성 데이터를 관리할 목적으로 생성된 테이블을 저장용 대형 테이블이라고 한다.</li> <li>이러한 테이블의 특징으로는 대량의 데이터가 지속적으로 입력이 된다는 것이다.</li> <li>따라서 테이블에서 기본키(PK)를 가지는 것은 입력시 부담이 될 수 있으므로 이를 사용하지 않는 것도 고려해야 한다. 대신 UNIQUE INDEX 생성을 고려해야 한다.</li> <li>또한, 테이블에 파티션을 만들고 파티션마다 필요한 인덱스를(Local Index)를 생성하는 것이 좋다.</li> <li>파티션 인덱스 사용시, 사용 파티션의 인덱스만 사용하는 것도 고려해야 한다. =&gt; 즉, 전체 Local Index를 UNUSABLE 상태로 만든 후, 이후 필요한 파티션의 인덱스만 생성하는 방식</li></ul> <h4 id="composite-index-결합-인덱스"><a href="#composite-index-결합-인덱스" class="header-anchor">#</a> [ Composite index (결합 인덱스) ]</h4> <ul><li>여러 컬럼을 모아 하나의 인덱스로 만드는 방식. 주로 SQL 문장에서 WHERE 절의 조건 컬럼이 2개 이상의 AND로 연결 되어 함께 사용되는 경우에 많이 사용.</li> <li>단, OR로 조회되는 경우는 결합 인덱스를 만들면 안된다.</li> <li>특징
<ul><li>인덱스의 첫 번째 컬럼이 조건절에 없다면 일반적으로 인덱스가 사용되지 않는다.
<ul><li>Equal 연산이 아닌 검색 조건이 들어오는 경우(범위 연산), 처리 범위가 크게 증가하여 효율이 크게 저하될 수 있다.</li></ul></li></ul></li></ul> <h4 id="결합-인덱스를-구성하는-컬럼의-순서"><a href="#결합-인덱스를-구성하는-컬럼의-순서" class="header-anchor">#</a> [ 결합 인덱스를 구성하는 컬럼의 순서 ]</h4> <p>성능을 향상시키기 위해서는 결합 인덱스를 구성하는 컬럼은 반드시 다음의 순서에 맞도록 생성해야 한다.</p> <ul><li>1순위 : 컬럼이 사용한 연산자에 의한 인덱스 컬럼 선정</li> <li>2순위 : 랜덤 액세스를 고려한 인덱스 컬럼 선정</li> <li>3순위 : 정렬 제거를 위한 인덱스 컬럼 선정</li> <li>4순위 : 단일 컬럼의 분포도를 고려한 인덱스 컬럼 선정</li></ul> <p>위 우선 순위를 지키지 않는다면 애당초 해당 인덱스를 이용한 성능 향상은 기대하기 조차 힘들다.</p> <blockquote><p>예시 1</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 카드번호<span class="token punctuation">,</span> 사용금액 <span class="token keyword">FROM</span> 거래내역 <span class="token keyword">WHERE</span> 카드번호 <span class="token operator">=</span> <span class="token string">'111'</span> <span class="token operator">AND</span> 거래일자 <span class="token operator">BETWEEN</span> <span class="token string">'20080501'</span> <span class="token operator">AND</span> <span class="token string">'20080510'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>카드번호 컬럼의 분포도는 매우 좋으며 거래일자 컬럼의 분포도는 매우 좋지 않다. 카드번호, 거래일자 순으로 결합 인덱스를 구성했을때, 카드번호 컬럼의 값에 의해 처리 범위는 감소하게 되며 또한 거래일자 컬럼에 의해서라도 처리 범위가 감소하게 되므로 원하는 데이터에 대해 최소의 액세스로 결과를 추출할 수 있게 된다.</li></ul> <blockquote><p>예시 2</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 카드번호<span class="token punctuation">,</span> 사용금액 <span class="token keyword">FROM</span> 거래내역 <span class="token keyword">WHERE</span> 카드번호 <span class="token operator">BETWEEN</span> <span class="token string">'111'</span> <span class="token operator">AND</span> <span class="token string">'555'</span> <span class="token operator">AND</span> 거래일자 <span class="token operator">=</span> <span class="token string">'20080515'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>컬럼의 분포도만을 생각하여 카드번호 + 거래일자 인덱스를 생성한다면 카드번호 컬럼에 의해서만 처리 범위가 감소하게 되어 성능 저하가 발생한다.</li> <li>그 이유는 111 카드번호부터 555 카드번호까지 2008년 5월 15일 데이터만을 액세스하는 것이 아니라 '111' 카드번호부터 '555'카드 번호까지 모든 데이터를 액세스하기 때문이다. =&gt; 즉, 거래일자 컬럼은 처리 위를 감소시키지 못한다.</li> <li>따라서 결합 인덱스를 구성할 경우, 다음과 같은 조건에 따라 결합 인덱스를 구성해야 한다.
<ul><li>점 조건(=, IN) + 점 조건(=, IN) : 두 조건에 의해 처리 범위 감소</li> <li>점 조건(=, IN) + 선분 조건(LIKE, BETWEEN) : 두 조건에 의해 처리 범위 감소</li> <li>선분 조건(LIKE, BETWEEN) + 선분 조건(LIKE, BETWEEN) : 앞의 선분 조건에 의해 처리 범위 감소</li> <li>선분 조건(LIKE, BETWEEN) + 점 조건(=, IN) : 앞의 선분 조건에 의해서만 처리 범위 감소</li></ul></li></ul> <p>: 따라서 위와 같이 연산자에 의해 처리 범위가 결정되며 최소의 처리 범위를 보장받기 위해서는 점 조건 앞에 선분 조건이 존재하면 안된다.</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">October 16, 2022 21:47</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: jaesungahn91@gmail.com" class="contributor">
          jaesungahn91
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/TIL/2022/1003/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        1003 ~ 1009
      </a></span> <span class="next"><a href="/TIL/2022/1017/">
        1017 ~ 1030
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/TIL/assets/js/app.5fb46d7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" defer></script><script src="/TIL/assets/js/page-1010~1016.00b69211.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" defer></script>
  </body>
</html>
