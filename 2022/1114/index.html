<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1114 ~ 1127 | ahnjs TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Today I Learned">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.c9ce91a1.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5fb46d7a.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" as="script"><link rel="preload" href="/TIL/assets/js/page-1114~1127.edbc49cd.js" as="script"><link rel="preload" href="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" as="script"><link rel="prefetch" href="/TIL/assets/js/103.8c089b22.js"><link rel="prefetch" href="/TIL/assets/js/104.119134a5.js"><link rel="prefetch" href="/TIL/assets/js/layout-Blog.a086a7ca.js"><link rel="prefetch" href="/TIL/assets/js/layout-Layout.0945805f.js"><link rel="prefetch" href="/TIL/assets/js/layout-NotFound.9e898f41.js"><link rel="prefetch" href="/TIL/assets/js/layout-Slide.f940a7a7.js"><link rel="prefetch" href="/TIL/assets/js/page-0102-0109.d861648d.js"><link rel="prefetch" href="/TIL/assets/js/page-0102~0108.3f3ff8b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0109~0115.4c6b192d.js"><link rel="prefetch" href="/TIL/assets/js/page-0110-0116.feb84c5b.js"><link rel="prefetch" href="/TIL/assets/js/page-0116~0129.d55b06ca.js"><link rel="prefetch" href="/TIL/assets/js/page-0117-0123.7a6dce2f.js"><link rel="prefetch" href="/TIL/assets/js/page-0124-0206.ee32f254.js"><link rel="prefetch" href="/TIL/assets/js/page-0130~0205.df7a6a64.js"><link rel="prefetch" href="/TIL/assets/js/page-0206~0226.5da382f5.js"><link rel="prefetch" href="/TIL/assets/js/page-0211-0220.cd9bd482.js"><link rel="prefetch" href="/TIL/assets/js/page-0217-0221.1ed564ea.js"><link rel="prefetch" href="/TIL/assets/js/page-0221-0227.40b291d8.js"><link rel="prefetch" href="/TIL/assets/js/page-0222-0229.c4aa2b4d.js"><link rel="prefetch" href="/TIL/assets/js/page-0227~0305.164780e1.js"><link rel="prefetch" href="/TIL/assets/js/page-0228-0313.960c5eb2.js"><link rel="prefetch" href="/TIL/assets/js/page-0301-0307.8a2dd769.js"><link rel="prefetch" href="/TIL/assets/js/page-0306~0319.d7e1dd39.js"><link rel="prefetch" href="/TIL/assets/js/page-0308-0314.95d08be9.js"><link rel="prefetch" href="/TIL/assets/js/page-0314-0320.a482c7e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0315-0321.0bf22c5a.js"><link rel="prefetch" href="/TIL/assets/js/page-0320~0402.dc9cbbee.js"><link rel="prefetch" href="/TIL/assets/js/page-0321-0328.536bc991.js"><link rel="prefetch" href="/TIL/assets/js/page-0322-0328.5002c0f8.js"><link rel="prefetch" href="/TIL/assets/js/page-0329-0404.c6f98895.js"><link rel="prefetch" href="/TIL/assets/js/page-0329~0403.5b50aeae.js"><link rel="prefetch" href="/TIL/assets/js/page-0403~0423.db8f2eb4.js"><link rel="prefetch" href="/TIL/assets/js/page-0404~0410.6dd2170c.js"><link rel="prefetch" href="/TIL/assets/js/page-0405-0411.dfef4290.js"><link rel="prefetch" href="/TIL/assets/js/page-0411~0417.31e79aa4.js"><link rel="prefetch" href="/TIL/assets/js/page-0412-0418.aab597de.js"><link rel="prefetch" href="/TIL/assets/js/page-0418~0424.acb47103.js"><link rel="prefetch" href="/TIL/assets/js/page-0419-0425.bc1c1f3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0425~0501.63985992.js"><link rel="prefetch" href="/TIL/assets/js/page-0426-0502.d7a75a07.js"><link rel="prefetch" href="/TIL/assets/js/page-0502~0515.21ce942d.js"><link rel="prefetch" href="/TIL/assets/js/page-0503-0509.fb0660a5.js"><link rel="prefetch" href="/TIL/assets/js/page-0510-0516.00f7a787.js"><link rel="prefetch" href="/TIL/assets/js/page-0516~0529.c375a6ba.js"><link rel="prefetch" href="/TIL/assets/js/page-0517-0523.b1aa4a22.js"><link rel="prefetch" href="/TIL/assets/js/page-0523~0605.6e7cab56.js"><link rel="prefetch" href="/TIL/assets/js/page-0524-0530.8c92fe4f.js"><link rel="prefetch" href="/TIL/assets/js/page-0531-0606.e40cfd3f.js"><link rel="prefetch" href="/TIL/assets/js/page-0606~0619.b2a4a63a.js"><link rel="prefetch" href="/TIL/assets/js/page-0607-0613.b7eaa930.js"><link rel="prefetch" href="/TIL/assets/js/page-0612.6d4d2838.js"><link rel="prefetch" href="/TIL/assets/js/page-0613.dfd2eb79.js"><link rel="prefetch" href="/TIL/assets/js/page-0614-0620.8c3b6db2.js"><link rel="prefetch" href="/TIL/assets/js/page-0614.c29fe08f.js"><link rel="prefetch" href="/TIL/assets/js/page-0621-0627.8b7cfba5.js"><link rel="prefetch" href="/TIL/assets/js/page-0627~0703.32c82c88.js"><link rel="prefetch" href="/TIL/assets/js/page-0628-0704.a12f4dd5.js"><link rel="prefetch" href="/TIL/assets/js/page-0705-0808.84dfa0c2.js"><link rel="prefetch" href="/TIL/assets/js/page-0711~0717.c1d09532.js"><link rel="prefetch" href="/TIL/assets/js/page-0718~0724.28a7589f.js"><link rel="prefetch" href="/TIL/assets/js/page-0725~0807.ef50582d.js"><link rel="prefetch" href="/TIL/assets/js/page-0807~0902.96994631.js"><link rel="prefetch" href="/TIL/assets/js/page-0808~0814.d656f648.js"><link rel="prefetch" href="/TIL/assets/js/page-0809-0815.348cc1c5.js"><link rel="prefetch" href="/TIL/assets/js/page-0815~0824.df5c5da0.js"><link rel="prefetch" href="/TIL/assets/js/page-0816-0822.87a87566.js"><link rel="prefetch" href="/TIL/assets/js/page-0822~0911.4867b37a.js"><link rel="prefetch" href="/TIL/assets/js/page-0823-0829.8bcfd48b.js"><link rel="prefetch" href="/TIL/assets/js/page-0830-0905.8b54a9e8.js"><link rel="prefetch" href="/TIL/assets/js/page-0903~0910.f917d595.js"><link rel="prefetch" href="/TIL/assets/js/page-0906-0919.a1897d51.js"><link rel="prefetch" href="/TIL/assets/js/page-0911~0918.7dfbe6de.js"><link rel="prefetch" href="/TIL/assets/js/page-0912~0918.274ce7a6.js"><link rel="prefetch" href="/TIL/assets/js/page-0919~0925.e25dd9ff.js"><link rel="prefetch" href="/TIL/assets/js/page-0920-0926.22e5547a.js"><link rel="prefetch" href="/TIL/assets/js/page-0926~1002.d97a33b4.js"><link rel="prefetch" href="/TIL/assets/js/page-0927-1003.cd544f10.js"><link rel="prefetch" href="/TIL/assets/js/page-1003~1009.b12a6f87.js"><link rel="prefetch" href="/TIL/assets/js/page-1004-1010.92ee8f8e.js"><link rel="prefetch" href="/TIL/assets/js/page-1010~1016.00b69211.js"><link rel="prefetch" href="/TIL/assets/js/page-1011-1017.c314b6aa.js"><link rel="prefetch" href="/TIL/assets/js/page-1017~1030.03e8572f.js"><link rel="prefetch" href="/TIL/assets/js/page-1018-1024.35384747.js"><link rel="prefetch" href="/TIL/assets/js/page-1025-1031.e5a2aad2.js"><link rel="prefetch" href="/TIL/assets/js/page-1031~1113.813912c9.js"><link rel="prefetch" href="/TIL/assets/js/page-1101-1107.e08121f1.js"><link rel="prefetch" href="/TIL/assets/js/page-1108-1114.14c10b7a.js"><link rel="prefetch" href="/TIL/assets/js/page-1113~1109.6ffeae7e.js"><link rel="prefetch" href="/TIL/assets/js/page-1115-1124.248147ec.js"><link rel="prefetch" href="/TIL/assets/js/page-1122-1128.de82e713.js"><link rel="prefetch" href="/TIL/assets/js/page-1128~1211.ca0d6242.js"><link rel="prefetch" href="/TIL/assets/js/page-1129-1205.57233094.js"><link rel="prefetch" href="/TIL/assets/js/page-1204~1217.bfef77e0.js"><link rel="prefetch" href="/TIL/assets/js/page-1206-1212.100e1893.js"><link rel="prefetch" href="/TIL/assets/js/page-1212~0101.031e14d3.js"><link rel="prefetch" href="/TIL/assets/js/page-1213-1219.0e09712c.js"><link rel="prefetch" href="/TIL/assets/js/page-1220-1226.4cb62ec6.js"><link rel="prefetch" href="/TIL/assets/js/page-📖TodayILearned.7bda0772.js"><link rel="prefetch" href="/TIL/assets/js/vendors~photo-swipe.7980dd4b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.c9ce91a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/TIL/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">ahnjs TIL</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2023</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">2022</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2022/0102/" class="sidebar-link">0102 - 0109</a></li><li><a href="/TIL/2022/0110/" class="sidebar-link">0110 - 0116</a></li><li><a href="/TIL/2022/0117/" class="sidebar-link">0117 - 0123</a></li><li><a href="/TIL/2022/0124/" class="sidebar-link">0124 - 0206</a></li><li><a href="/TIL/2022/0211/" class="sidebar-link">0211 - 0220</a></li><li><a href="/TIL/2022/0221/" class="sidebar-link">0221 - 0227</a></li><li><a href="/TIL/2022/0228/" class="sidebar-link">0228 - 0313</a></li><li><a href="/TIL/2022/0314/" class="sidebar-link">0314 - 0320</a></li><li><a href="/TIL/2022/0321/" class="sidebar-link">0321 - 0328</a></li><li><a href="/TIL/2022/0328/" class="sidebar-link">0329 ~ 0403</a></li><li><a href="/TIL/2022/0404/" class="sidebar-link">0404 ~ 0410</a></li><li><a href="/TIL/2022/0411/" class="sidebar-link">0411 ~ 0417</a></li><li><a href="/TIL/2022/0418/" class="sidebar-link">0418 ~ 0424</a></li><li><a href="/TIL/2022/0425/" class="sidebar-link">0425 ~ 0501</a></li><li><a href="/TIL/2022/0502/" class="sidebar-link">0502 ~ 0515</a></li><li><a href="/TIL/2022/0516/" class="sidebar-link">0516 ~ 0529</a></li><li><a href="/TIL/2022/0523/" class="sidebar-link">0523 ~ 0605</a></li><li><a href="/TIL/2022/0606/" class="sidebar-link">0606 ~ 0619</a></li><li><a href="/TIL/2022/0627/" class="sidebar-link">0627 ~ 0703</a></li><li><a href="/TIL/2022/0711/" class="sidebar-link">0711 ~ 0717</a></li><li><a href="/TIL/2022/0718/" class="sidebar-link">0718 ~ 0724</a></li><li><a href="/TIL/2022/0725/" class="sidebar-link">0725 ~ 0807</a></li><li><a href="/TIL/2022/0808/" class="sidebar-link">0808 ~ 0814</a></li><li><a href="/TIL/2022/0815/" class="sidebar-link">0815 ~ 0824</a></li><li><a href="/TIL/2022/0822/" class="sidebar-link">0822 ~ 0911</a></li><li><a href="/TIL/2022/0912/" class="sidebar-link">0912 ~ 0918</a></li><li><a href="/TIL/2022/0919/" class="sidebar-link">0919 ~ 0925</a></li><li><a href="/TIL/2022/0926/" class="sidebar-link">0926 ~ 1002</a></li><li><a href="/TIL/2022/1003/" class="sidebar-link">1003 ~ 1009</a></li><li><a href="/TIL/2022/1010/" class="sidebar-link">1010 ~ 1016</a></li><li><a href="/TIL/2022/1017/" class="sidebar-link">1017 ~ 1030</a></li><li><a href="/TIL/2022/1031/" class="sidebar-link">1031 ~ 1113</a></li><li><a href="/TIL/2022/1114/" aria-current="page" class="active sidebar-link">1114 ~ 1127</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#_1114-도메인-주도-설계의-모듈-구성-패키지-구성" class="sidebar-link">1114 - 도메인 주도 설계의 모듈 구성(패키지 구성)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#계층-기반-패키지" class="sidebar-link heading3">계층 기반 패키지</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#기능-도메인-기반-패키지" class="sidebar-link heading3">기능(도메인) 기반 패키지</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#포트와-어댑터" class="sidebar-link heading3">포트와 어댑터</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#컴포넌트-기반-패키지" class="sidebar-link heading3">컴포넌트 기반 패키지</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#_1116-spring-security-without-the-websecurityconfigureradapter" class="sidebar-link">1116 - Spring Security without the WebSecurityConfigurerAdapter</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#httpsecurity-구성-비교" class="sidebar-link heading3">HttpSecurity 구성 비교</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#ldap란" class="sidebar-link heading3">LDAP란?</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#jdbc-인증-설정-비교" class="sidebar-link heading3">JDBC 인증 설정 비교</a></li></ul></li><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#_1123-spring-security-구조" class="sidebar-link">1123 - Spring Security 구조</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/1114/#spring-security-주요-모듈" class="sidebar-link heading3">Spring Security 주요 모듈</a></li></ul></li></ul></li><li><a href="/TIL/2022/1128/" class="sidebar-link">1128 ~ 1211</a></li><li><a href="/TIL/2022/1212/" class="sidebar-link">1212 ~ 0101</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">2021</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">1114 ~ 1127</span></h1> <div class="page-info"><!----> </div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/TIL/2022/1114/#_1114-도메인-주도-설계의-모듈-구성-패키지-구성" class="anchor-link heading2"><div>1114 - 도메인 주도 설계의 모듈 구성(패키지 구성)</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#계층-기반-패키지" class="anchor-link heading3"><div>계층 기반 패키지</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#기능-도메인-기반-패키지" class="anchor-link heading3"><div>기능(도메인) 기반 패키지</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#포트와-어댑터" class="anchor-link heading3"><div>포트와 어댑터</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#컴포넌트-기반-패키지" class="anchor-link heading3"><div>컴포넌트 기반 패키지</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#_1116-spring-security-without-the-websecurityconfigureradapter" class="anchor-link heading2"><div>1116 - Spring Security without the WebSecurityConfigurerAdapter</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#httpsecurity-구성-비교" class="anchor-link heading3"><div>HttpSecurity 구성 비교</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#ldap란" class="anchor-link heading3"><div>LDAP란?</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#jdbc-인증-설정-비교" class="anchor-link heading3"><div>JDBC 인증 설정 비교</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#_1123-spring-security-구조" class="anchor-link heading2"><div>1123 - Spring Security 구조</div></a></li><li class="anchor"><a href="/TIL/2022/1114/#spring-security-주요-모듈" class="anchor-link heading3"><div>Spring Security 주요 모듈</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="_1114-1127"><a href="#_1114-1127" class="header-anchor">#</a> 1114 ~ 1127</h1> <h2 id="_1114-도메인-주도-설계의-모듈-구성-패키지-구성"><a href="#_1114-도메인-주도-설계의-모듈-구성-패키지-구성" class="header-anchor">#</a> 1114 - 도메인 주도 설계의 모듈 구성(패키지 구성)</h2> <h3 id="계층-기반-패키지"><a href="#계층-기반-패키지" class="header-anchor">#</a> 계층 기반 패키지</h3> <p>가장 단순한 첫번째 설계원칙인 수평 계층형 아키텍처</p> <ul><li>기술적인 관점에서 해당 코드가 하는 일에 기반해 그 코드를 분할. 보통 웹베이스 코딩을 하게 되면 <code>MVC</code>, <code>MVP</code> 패턴으로 개발을 하게 되는데 이도 <code>계층 기반 패키지</code>라고 부르며 각 계층은 유사한 종류의 것들을 묶는 도구로 사용</li> <li>이 전형적인 아키텍처에서는 <code>사용 인터페이스</code>, <code>업무규칙</code>, <code>영속성코드</code>를 계층이 각각 하나씩 존재하며, 임의의 N계층은 반드시 N+1계층에만 의존 해야한다.</li></ul> <h3 id="기능-도메인-기반-패키지"><a href="#기능-도메인-기반-패키지" class="header-anchor">#</a> 기능(도메인) 기반 패키지</h3> <p>기능 기반 패키지는 서로 연관된 기능, 도메인 개념 또는 Aggregate Root에 기반하여 수직의 얇은 조각으로 코드를 나누는 방식.<br>
특정 기능을 지칭하는 하나의 패키지 내에 모든 타입과, 개념을 반영해서 구현.</p> <ul><li>인터페이스와 클래스가 모두 단 하나의 패키지에 속한다. 이로 인해 코드의 상위 수준 구조가 업무 도메인에 대해 무언가를 알려주게 된다. 따라서 이 코드베이스가 계층단위(웹, 서비스, 리포지토리)가 아니라 주문(업무 도메인)과 관련된 무언가를 한다는 것을 볼 수 있다.</li> <li>변경시 변경해야 할 코드가 모두 한 패키지 내에 응집력을 갖고 있기때문에 유리하다.</li></ul> <h3 id="포트와-어댑터"><a href="#포트와-어댑터" class="header-anchor">#</a> 포트와 어댑터</h3> <p>엉클 밥에 따르면 <code>포트와 어댑터</code> 혹은 <code>육각형 아키텍처</code>, <code>경계, 컨트롤러, 엔티티</code> 등의 방식으로 접근하는 이유는 업무/도메인에 초점을 둔 코드가 기술적인 세부 구현과 독립적이며 분리된 아키텍처를 만들기 위해서이다.</p> <p>'내부' 영역은 도메인 개념을 모두 포함하는 반면, '외부'영역은 UI, 데이터베이스, 서드파티등과의 상호작용을 포함한다. 여기서 중요한 규칙은 '외부'가 '내부'에 의존하며, 그 반대는 불가능하다.</p> <ul><li>도메인 주도 설계에서는 OrderRepository는 Orders라는 명칭으로 바꿔줘야 한다. 그 이유는 도메인에 대해 논의할때 '주문'에 대해 말하는것이지 '주문 리포지토리'에 대해 말하는 것이 아니기 때문이다.</li></ul> <h3 id="컴포넌트-기반-패키지"><a href="#컴포넌트-기반-패키지" class="header-anchor">#</a> 컴포넌트 기반 패키지</h3> <p>컴포넌트 기반 패키지는 마틴 파울러가 제시하는 방법으로, 지금까지 방식을 혼합한 것으로 큰 단위의 단일 컴포넌트와 관련된 모든 책임을 하나의 패키지로 묶는데 주안점을 두고 있다.<br>
이 접근법은 서비스 중심적인 시각으로 소프트웨어 시스템을 바라 보며, 마이크로서비스 아키텍처가 가진 시각과도 동일하다.</p> <ul><li>여기서 말하는 '컴포넌트'에 대해 마틴파울러는 &quot;컴포넌트는 멋지고 깔끔한 인터페이스로 감싸진 연관된 기능들의 묶음으로, 애플리케이션과 같은 실행 환경 내부에 존재한다.&quot;로 정의하고 있다.</li> <li>컴포넌트 기반 패키지 접근법의 주된 이점은 주문과 관련된 무언가를 코딩해야 할 때 오직, OrdersComponent만 둘러보면 된다는 점이다. 이 컴포넌트 내부에서 관심사의 분리는 여전히 유효하며, 컴포넌트 구현과 관련된 세부사항은 사용자가 알 필요가 없다.</li> <li>이는 마이크로 서비스나 서비스 지향 아키텍처를 적용했을 때 얻는 이점과도 유사하다. 따라서 모노리틱 애플리케이션에서 컴포넌트를 잘 정의하면 결합 분리 모드를 통해 마이크로 서비스 아키텍처로 가기 위한 발판으로 삼을 수 있다.</li></ul> <br> <h2 id="_1116-spring-security-without-the-websecurityconfigureradapter"><a href="#_1116-spring-security-without-the-websecurityconfigureradapter" class="header-anchor">#</a> 1116 - Spring Security without the WebSecurityConfigurerAdapter</h2> <p>Spring Security 5.7.0-M2 부터는 구성 요소 기반 보안 설정으로 변경된다. 따라서 <code>WebSecurityConfigurerAdapter</code> 상속 후, configure 메소드를 오버라이딩 하여 설정하는 방식에서 <code>SecurityFilterChain</code>를 빈으로 등록하는 방식을 권장한다.</p> <h3 id="httpsecurity-구성-비교"><a href="#httpsecurity-구성-비교" class="header-anchor">#</a> HttpSecurity 구성 비교</h3> <ul><li>WebSecurityConfigurerAdapter의 configure 메소드를 오버라이딩</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        http
            <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authz<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> authz
                <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span><span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><ul><li>SecurityFilterChain 빈 등록</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfiguration</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        http
            <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authz<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> authz
                <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span><span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="ldap란"><a href="#ldap란" class="header-anchor">#</a> LDAP란?</h3> <p>LDAP(Lightweight Directory Access Protocol)란, 네트워크 상에서 조직이나 개인정보 혹은 파일이나 디바이스 정보 등을 찾아보는 것을 가능하게 만든 소프트웨어 프로토콜이다.</p> <h3 id="jdbc-인증-설정-비교"><a href="#jdbc-인증-설정-비교" class="header-anchor">#</a> JDBC 인증 설정 비교</h3> <ul><li>WebSecurityConfigurerAdapter 상속, configure(AuthenticationManagerBuilder auth) 메소드 오버라이딩하여 설정</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EmbeddedDatabaseBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">EmbeddedDatabaseType</span><span class="token punctuation">.</span>H2<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDetails</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">withDefaultPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">&quot;USER&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        auth<span class="token punctuation">.</span><span class="token function">jdbcAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withDefaultSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>JdbcUserDetailsManager 빈을 등록하는 방식</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EmbeddedDatabaseBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">EmbeddedDatabaseType</span><span class="token punctuation">.</span>H2<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addScript</span><span class="token punctuation">(</span><span class="token class-name">JdbcDaoImpl</span><span class="token punctuation">.</span>DEFAULT_USER_SCHEMA_DDL_LOCATION<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDetailsManager</span> <span class="token function">users</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 이 예에서는 User.withDefaultPasswordEncoder()가독성을 위해 방법을 사용</span>
        <span class="token class-name">UserDetails</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">withDefaultPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">&quot;USER&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JdbcUserDetailsManager</span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcUserDetailsManager</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> users<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>https://blog.naver.com/PostView.naver?blogId=h850415&amp;logNo=222755455272&amp;parentCategoryNo=&amp;categoryNo=37&amp;viewDate=&amp;isShowPopularPosts=true&amp;from=search<br>
https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter</p> <br> <h2 id="_1123-spring-security-구조"><a href="#_1123-spring-security-구조" class="header-anchor">#</a> 1123 - Spring Security 구조</h2> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbeDENY%2FbtrBs0cquNc%2FPkwRQzgyzhoy1ecQrlQOJk%2Fimg.png" alt="image"></p> <h3 id="spring-security-주요-모듈"><a href="#spring-security-주요-모듈" class="header-anchor">#</a> Spring Security 주요 모듈</h3> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FAbFLx%2FbtqEJC1tYaJ%2FBDq9cRTqiDarlBa3Z05FoK%2Fimg.png" alt="image"></p> <h4 id="security-contextholder"><a href="#security-contextholder" class="header-anchor">#</a> <strong>[ Security ContextHolder ]</strong></h4> <p>SecurityContextHolder는 보안 주체의 세부 정보를 포함하여 응용프로그램의 현재 보안 컨텍스트에 대한 세부 정보가 저장된다. SecurityContextHolder는 기본적으로 SecurityContextHolder.MODE_INHERITABLETHREADLOCAL 방법과 SecurityContextHolder.MODE_THREADLOCAL 방법을 제공한다.</p> <h4 id="securitycontext"><a href="#securitycontext" class="header-anchor">#</a> <strong>[ SecurityContext ]</strong></h4> <p>Authentication을 보관하는 역할을 하며, SecurityContext를 통해 Authentication 객체를 꺼내올 수 있다.</p> <h4 id="authentication"><a href="#authentication" class="header-anchor">#</a> <strong>[ Authentication ]</strong></h4> <p>Authentication는 현재 접근하는 주체의 정보와 권한을 담는  인터페이스이다. Authentication 객체는 Security Context에 저장되며, SecurityContextHolder를 통해 SecurityContext에 접근하고, SecurityContext를 통해 Authentication에 접근할 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Authentication</span> <span class="token keyword">extends</span> <span class="token class-name">Principal</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>  
    <span class="token comment">// 현재 사용자의 권한 목록을 가져옴  </span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token comment">// credentials(주로 비밀번호)을 가져옴  </span>
    <span class="token class-name">Object</span> <span class="token function">getCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token class-name">Object</span> <span class="token function">getDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token comment">// Principal 객체를 가져옴.  </span>
    <span class="token class-name">Object</span> <span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token comment">// 인증 여부를 가져옴  </span>
    <span class="token keyword">boolean</span> <span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token comment">// 인증 여부를 설정함  </span>
    <span class="token keyword">void</span> <span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isAuthenticated<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre></div><h4 id="usernamepasswordauthenticationtoken"><a href="#usernamepasswordauthenticationtoken" class="header-anchor">#</a> <strong>[ UsernamePasswordAuthenticationToken ]</strong></h4> <p>UsernamePasswordAuthenticationToken은 Authentication을 implements한 AbstractAuthenticationToken의 하위 클래스로, User의 ID가 Principal 역할을 하고, Password가 Credential의 역할을 한다. UsernamePasswordAuthenticationToken의 첫 번째 생성자는 인증전의 객체를 생성하고, 두번째 생성자는 인증이 완료된 객체를 생성한다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAuthenticationToken</span> <span class="token punctuation">{</span>  
    <span class="token comment">// 주로 사용자의 ID에 해당함  </span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> principal<span class="token punctuation">;</span>  
    <span class="token comment">// 주로 사용자의 PW에 해당함  </span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> credentials<span class="token punctuation">;</span>  
  
    <span class="token comment">// 인증 완료 전의 객체 생성  </span>
    <span class="token keyword">public</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span><span class="token class-name">Object</span> principal<span class="token punctuation">,</span> <span class="token class-name">Object</span> credentials<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> principal<span class="token punctuation">;</span>  
        <span class="token keyword">this</span><span class="token punctuation">.</span>credentials <span class="token operator">=</span> credentials<span class="token punctuation">;</span>  
        <span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token comment">// 인증 완료 후의 객체 생성  </span>
    <span class="token keyword">public</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span><span class="token class-name">Object</span> principal<span class="token punctuation">,</span> <span class="token class-name">Object</span> credentials<span class="token punctuation">,</span>  
                                               <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">super</span><span class="token punctuation">(</span>authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> principal<span class="token punctuation">;</span>  
        <span class="token keyword">this</span><span class="token punctuation">.</span>credentials <span class="token operator">=</span> credentials<span class="token punctuation">;</span>  
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must use super, as we override  </span>
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
  
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractAuthenticationToken</span> <span class="token keyword">implements</span> <span class="token class-name">Authentication</span><span class="token punctuation">,</span> <span class="token class-name">CredentialsContainer</span> <span class="token punctuation">{</span>  
<span class="token punctuation">}</span>
</code></pre></div><h4 id="authenticationprovider"><a href="#authenticationprovider" class="header-anchor">#</a> <strong>[ AuthenticationProvider ]</strong></h4> <p>AuthentivationProvider에서는 실제 인증에 대한 부분을 처리하는데, 인증 전의 Authentication 객체를 받아서 인증이 완료된 객체를 반환하는 역할을 한다. 아래와 같은 AuthenticationProvider 인터페이스를 구현해서 Custom한 AuthenticationProvider을 작성해서 AuthenticationManager에 등록하면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AuthenticationProvider</span> <span class="token punctuation">{</span>  
  
    <span class="token comment">// 인증 전의 Authenticaion 객체를 받아서 인증된 Authentication 객체를 반환  </span>
    <span class="token class-name">Authentication</span> <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> var1<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">boolean</span> <span class="token function">supports</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token punctuation">}</span>
</code></pre></div><h4 id="authentication-manager"><a href="#authentication-manager" class="header-anchor">#</a> <strong>[ Authentication Manager ]</strong></h4> <p>인증에 대한 부분은 SpringSecurity의 AuthenticationManager를 통해서 처리하게 되는데, 실질적으로는 AuthenticationManager에 등록된 AuthenticationProvider에 의해 처리된다. 인증이 성공하면 2번째 생성자를 이용해 인증이 성공한(isAuthenticated=true)객체를 생성하여 Security Context에 저장한다. 그리고 인증 상태를 유지하기 위해 세션에 보관하며, 인증이 실패한 경우에는 AuthenticationException를 발생시킨다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AuthenticationManager</span> <span class="token punctuation">{</span>  
    <span class="token class-name">Authentication</span> <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span>  
            <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre></div><p>AuthenticationManager를 implements한 ProviderManager는 실제 인증 과정에 대한 로직을 가지고 있는 AuthenticationProvider를 List로 가지고 있으며, ProviderManager는 for문을 통해 모든 provider를 조회하면서 authenticate 처리를 한다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProviderManager</span> <span class="token keyword">implements</span> <span class="token class-name">AuthenticationManager</span><span class="token punctuation">,</span> <span class="token class-name">MessageSourceAware</span><span class="token punctuation">,</span>  
        <span class="token class-name">InitializingBean</span> <span class="token punctuation">{</span>  
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationProvider</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">return</span> providers<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    <span class="token keyword">public</span> <span class="token class-name">Authentication</span> <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span>  
            <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">{</span>  
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Authentication</span><span class="token punctuation">&gt;</span></span> toTest <span class="token operator">=</span> authentication<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">AuthenticationException</span> lastException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  
        <span class="token class-name">Authentication</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  
        <span class="token keyword">boolean</span> debug <span class="token operator">=</span> logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">//for문으로 모든 provider를 순회하여 처리하고 result가 나올 때까지 반복한다.  </span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">AuthenticationProvider</span> provider <span class="token operator">:</span> <span class="token function">getProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
            <span class="token keyword">try</span> <span class="token punctuation">{</span>  
                result <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
                <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                    <span class="token function">copyDetails</span><span class="token punctuation">(</span>authentication<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>  
                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>  
            <span class="token punctuation">}</span>  
            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">AccountStatusException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                <span class="token function">prepareException</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> authentication<span class="token punctuation">)</span><span class="token punctuation">;</span>  
                <span class="token comment">// SEC-546: Avoid polling additional providers if auth failure is due to  </span>
                <span class="token comment">// invalid account status                throw e;  </span>
            <span class="token punctuation">}</span>  
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
        <span class="token punctuation">}</span>  
        <span class="token keyword">throw</span> lastException<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre></div><p>위에서 설명한 ProviderManager에 우리가 직접 구현한 CustomAuthenticationProvider를 등록하는 방법은 SecurityConfig에서 빈으로 등록할 수 있다.</p> <h4 id="userdetails"><a href="#userdetails" class="header-anchor">#</a> <strong>[ UserDetails ]</strong></h4> <p>인증에 성공하여 생성된 UserDetails 객체는 Authentication 객체를 구현한 UsernamePasswordAuthenticationToken을 생성하기 위해 사용된다. UserDetails 인터페이스를 살펴보면 아래와 같이 정보를 반환하는 메소드를 가지고 있다. UserDetails 인터페이스의 경우 직접 개발한 UserVO 모델에 UserDetails를 implements하여 이를 처리하거나 UserDetailsVO에 UserDetails를 implements하여 처리할 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDetails</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>  
  
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">boolean</span> <span class="token function">isAccountNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">boolean</span> <span class="token function">isAccountNonLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">boolean</span> <span class="token function">isCredentialsNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">boolean</span> <span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token punctuation">}</span>
</code></pre></div><h4 id="userdetailsservice"><a href="#userdetailsservice" class="header-anchor">#</a> <strong>[ UserDetailsService ]</strong></h4> <p>UserDetailsService 인터페이스는 UserDetails 객체를 반환하는 단 하나의 메소드를 가지고 있는데, 일반적으로 이를 구현한 클래스의 내부에 UserRepository를 주입받아 DB와 연결하여 처리한다. UserDetails 인터페이스는 아래와 같다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDetailsService</span> <span class="token punctuation">{</span> 

<span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> var1<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">;</span> 

<span class="token punctuation">}</span>
</code></pre></div></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">November 28, 2022 17:30</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: jaesungahn91@gmail.com" class="contributor">
          jaesungahn91
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/TIL/2022/1031/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        1031 ~ 1113
      </a></span> <span class="next"><a href="/TIL/2022/1128/">
        1128 ~ 1211
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/TIL/assets/js/app.5fb46d7a.js" defer></script><script src="/TIL/assets/js/vendors~layout-Layout.1c8ba735.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.2212e50f.js" defer></script><script src="/TIL/assets/js/page-1114~1127.edbc49cd.js" defer></script><script src="/TIL/assets/js/vendors~layout-Blog~layout-Layout.e5523903.js" defer></script>
  </body>
</html>
